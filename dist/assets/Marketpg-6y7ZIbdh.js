import{r as e,j as s,cZ as t,c_ as a,bk as r,c$ as n,a1 as l,I as i,f as o,h as c,i as d,d0 as x,S as m,cQ as u,Q as h,aG as f,aM as p,R as b,cS as g,b4 as j,V as v,d1 as y}from"./index-CvIXhaMv.js";import{R as w}from"./react-stars-DecT5tWK.js";import{R as N}from"./Roundedstar-DswUk0sY.js";function k({vendor:o}){const c=e.useMemo((()=>{var e;const l=[];if(null==o?void 0:o.sourcingMarket){let e=o.sourcingMarket;Array.isArray(e)&&(e=e[0]),e&&l.push({label:e,icon:s.jsx(t,{className:"text-blue-500 w-3 h-3"})})}return(null==o?void 0:o.restockFrequency)&&l.push({label:o.restockFrequency,icon:s.jsx(a,{className:"animate-spin-slow text-green-500 w-3 h-3"})}),(null==(e=null==o?void 0:o.stockpile)?void 0:e.enabled)&&l.push({label:`${o.stockpile.durationInWeeks}-week piling`,icon:s.jsx(r,{className:"text-purple-500 w-3 h-3"})}),(null==o?void 0:o.deliveryMode)&&l.push({label:o.deliveryMode,icon:s.jsx(n,{className:"text-orange-500 w-3 h-3"})}),l}),[o]),[d,x]=e.useState(0);if(e.useEffect((()=>{if(c.length<=1)return;const e=setInterval((()=>{x((e=>(e+1)%c.length))}),3500);return()=>clearInterval(e)}),[c]),!c.length)return null;return s.jsxs("span",{className:"ml-2 -translate-y-1 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-full blur-sm"}),s.jsx(l,{mode:"wait",children:s.jsxs(i.span,{variants:{enter:{opacity:0,y:8,scale:.95,filter:"blur(2px)"},center:{opacity:1,y:0,scale:1,filter:"blur(0px)"},exit:{opacity:0,y:-8,scale:.95,filter:"blur(2px)"}},initial:"enter",animate:"center",exit:"exit",transition:{duration:.3,ease:[.4,0,.2,1]},className:"inline-flex items-center rounded-full bg-gradient-to-r from-gray-50 to-gray-100 text-gray-700 leading-none space-x-2 px-1 py-1 text-[10px] font-medium shadow-[0_2px_8px_rgba(0,0,0,0.08)] border border-gray-200/60 hover:shadow-[0_4px_12px_rgba(0,0,0,0.12)] hover:border-gray-300/60 transition-all duration-200 backdrop-blur-sm",whileHover:{scale:1.05,transition:{duration:.2}},children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4 bg-white rounded-full shadow-sm",children:c[d].icon}),s.jsx("span",{className:"font-medium text-gray-800 tracking-wide",children:c[d].label}),c.length>1&&s.jsx("div",{className:"flex space-x-1 ml-1",children:c.map(((e,t)=>s.jsx("div",{className:"w-1 h-1 rounded-full transition-all duration-300 "+(t===d?"bg-gray-600":"bg-gray-300")},t)))})]},d)})]})}const S=()=>{const t=o(),a=c(),{local:r,online:n,isFetched:l,status:i}=d((e=>e.vendors)),[S,C]=e.useState(""),[M,I]=e.useState(""),[_,F]=e.useState(!1),[L,O]=e.useState(!1),[z,A]=e.useState(!1),[Q,R]=e.useState(!1);e.useEffect((()=>{l||t(x())}),[t,l]);const T=n,W=e.useMemo((()=>{const e=S.toLowerCase().trim();return T.filter((s=>{const t=!e||s.shopName.toLowerCase().includes(e),a=!M||s.categories.includes(M),r=!L||s.stockpile&&s.stockpile.enabled,n=!z||s.deliveryMode&&s.deliveryMode.toLowerCase().includes("pickup")||!s.deliveryMode,l=!Q||s.deliveryMode&&s.deliveryMode.toLowerCase().includes("delivery");return t&&a&&r&&n&&l}))}),[T,S,M,L,z,Q]),$=()=>{C("")},q=e=>{const{rating:s=0,ratingCount:t=0}=e;return t>0?s/t:0};return s.jsxs(s.Fragment,{children:[s.jsx(m,{title:"Browse Markets - My Thrift",description:"Browse through our list of vendors on My Thrift",url:"https://www.shopmythrift.store/browse-markets"}),s.jsxs("div",{className:"mb-1",children:[s.jsx("div",{className:"sticky pt-3 px-2 w-full top-0 bg-white z-10",children:s.jsxs("div",{className:"flex flex-col mb-2 px-2.5",children:[!_&&s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("h1",{className:"text-xl font-opensans font-semibold",children:"Stores"}),s.jsx(u,{className:"text-3xl cursor-pointer",onClick:()=>F(!0)})]}),_&&s.jsxs("div",{className:"flex items-center mb-6 w-full relative",children:[s.jsx(h,{className:"text-3xl cursor-pointer ",onClick:()=>{F(!1),$(),I("")}}),s.jsx("input",{type:"text",className:"flex-1 border font-opensans text-black text-base border-gray-300 rounded-full px-3 py-2 font-medium focus:outline-none",value:S,onChange:e=>{C(e.target.value.toLowerCase())},placeholder:"Search vendors..."}),S&&s.jsx(f,{className:"text-xl text-gray-500 cursor-pointer absolute right-3",onClick:$})]}),!_&&s.jsxs("div",{className:"flex  w-full py-3 overflow-x-auto space-x-2 scrollbar-hide",children:[s.jsx("button",{onClick:()=>R(!Q),className:"flex-shrink-0 h-12 px-4 text-xs font-semibold font-opensans text-black rounded-full backdrop-blur-md flex items-center justify-center transition-all duration-100  border "+(Q?"bg-customOrange text-white":"bg-white"),children:"Delivery"}),s.jsx("button",{onClick:()=>O(!L),className:"flex-shrink-0 h-12 px-4 text-xs font-semibold font-opensans text-black rounded-full backdrop-blur-md flex items-center justify-center transition-all duration-100  border "+(L?"bg-customOrange text-white":"bg-white"),children:"Stockpile"}),s.jsx("button",{onClick:()=>A(!z),className:"flex-shrink-0 h-12 px-4 text-xs font-semibold font-opensans text-black rounded-full backdrop-blur-md flex items-center justify-center transition-all duration-100  border "+(z?"bg-customOrange text-white":"bg-white"),children:"Pickup"}),["Thrifts","Mens","Womens","Underwears","Y2K","Jewelry","Kids","Trads","Dresses","Gowns","Shoes","Accessories","Bags","Sportswear","Formal"].map((e=>s.jsx("button",{onClick:()=>I(e===M?"":e),className:"flex-shrink-0 h-12 px-4 text-xs font-semibold font-opensans text-black rounded-full backdrop-blur-md flex items-center justify-center transition-all duration-100  border "+(M===e?"bg-customOrange text-white":"bg-white"),children:e},e)))]}),s.jsx("hr",{className:"bg-customGrey mb-1"})]})}),s.jsx("div",{className:"vendor-list px-2 pb-24",children:"loading"===i?Array.from({length:5}).map(((e,t)=>s.jsx("div",{className:"vendor-item",children:s.jsxs("div",{className:"flex justify-between p-3 mb-1 bg-white ",children:[s.jsxs("div",{children:[s.jsx(p,{width:150,height:24}),s.jsx("div",{className:"flex items-center mt-1",children:s.jsx(p,{width:100,height:16})}),s.jsxs("div",{className:"flex items-center mt-4",children:[s.jsx(p,{width:30,height:16,className:"mr-2"}),s.jsx(p,{width:120,height:24}),s.jsx(p,{width:50,height:16,className:"ml-2"})]})]}),s.jsx("div",{children:s.jsx(p,{height:96,width:96})})]})},t))):W.length>0?W.map((e=>{var r;return s.jsx("div",{className:"vendor-item border-b border-gray-100 ",children:s.jsxs("div",{className:"flex justify-between p-3 mb-3 bg-white ",onClick:()=>(e=>{t(y());try{Object.keys(sessionStorage).filter((e=>e.startsWith("quickMode_"))).forEach((e=>sessionStorage.removeItem(e)))}catch{}a(`/store/${e.id}`)})(e),children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"font-poppins text-black text-xl mb-1 font-medium flex items-center space-x-2",children:[s.jsx("span",{children:e.shopName.length>18?`${e.shopName.substring(0,18)}...`:e.shopName}),e.flashSale&&s.jsx("span",{className:"\r\n                          inline-block    \r\n                          bg-customOrange  \r\n                          animate-pulse\r\n                          text-white \r\n                          text-[8px] \r\n                          font-semibold \r\n                          rounded-md\r\n                          py-1            \r\n                          px-1              \r\n                          leading-none      \r\n                        ",children:"Launching soon"})]}),s.jsx("p",{className:"font-sans text-gray-300 text-xs flex items-center -translate-y-1",children:((null==(r=e.categories)?void 0:r.slice(0,3))||[]).map(((e,t)=>s.jsxs(b.Fragment,{children:[t>0&&s.jsx(g,{className:"mx-1 dot-size text-gray-300"}),e]},t)))}),s.jsxs("div",{className:"flex -ml-1 items-center text-gray-700 font-ubuntu font- text-xs translate-y-4 mb-0",children:[s.jsx(j,{className:"mr-1 text-customOrange"}),s.jsx("span",{children:e.state}),s.jsx(k,{vendor:e})]}),s.jsxs("div",{className:"flex items-center translate-y-4",children:[s.jsx("span",{className:"text-black font-light text-xs mr-2",children:q(e).toFixed(1)}),s.jsx(w,{count:5,value:e.rating/e.ratingCount||0,size:24,activeColor:"#ffd700",emptyIcon:s.jsx(N,{filled:!1}),filledIcon:s.jsx(N,{filled:!0}),edit:!1}),s.jsxs("span",{className:"text-black ratings-text font-light ml-2",children:["(",e.ratingCount||0,")"]})]})]}),s.jsxs("div",{className:"relative w-24 h-24 overflow-hidden",children:[s.jsx(v,{className:"object-cover w-full h-full rounded-lg",src:e.coverImageUrl||"https://images.saatchiart.com/saatchi/1750204/art/9767271/8830343-WUMLQQKS-7.jpg",alt:e.shopName}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-transparent via-white/50 to-transparent",style:{backgroundSize:"200% 200%",animation:"shimmer 4s infinite ease-in-out reverse"}})]})]})},e.id)})):s.jsxs("div",{className:"text-center my-10",children:[s.jsx("h2",{className:"text-2xl font-opensans font-medium",children:"☹️ No results found"}),s.jsx("p",{className:"text-gray-600 text-sm font-opensans",children:"Please try searching for another vendor."})]})})]})]})};export{S as default};
