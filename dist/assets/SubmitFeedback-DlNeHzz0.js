import{r as e,W as s,a5 as t,u as a,j as r,G as l,_ as o,as as i,Q as n,e as c,O as d,a6 as u,a7 as m,a8 as h}from"./index-B6_tP4YQ.js";import{$ as x}from"./module-rdBSHQ9l.js";import{S as f}from"./SEO-CG8nsGhn.js";import"./emotion-unitless.esm-sScrWPmR.js";const b=()=>{const[b,g]=e.useState(""),[p,j]=e.useState(""),[y,v]=e.useState([]),[w,N]=e.useState(""),[k,S]=e.useState(!1),[O,C]=e.useState(!1),F=s(),P=t();e.useEffect((()=>{const e=F.currentUser;e&&(N(e.email),C(!0))}),[F]);const E=a();return r.jsxs(r.Fragment,{children:[r.jsx(f,{title:"Submit Feedback - My Thrift",description:"Submit your feedback to the My Thrift team!",url:"https://www.shopmythrift.store/send-us-feedback"}),r.jsxs("div",{className:"flex flex-col items-center bg-gray-50  pb-4 font-opensans text-gray-800",children:[r.jsx("div",{className:"sticky top-0 bg-white z-10 flex items-center justify-between w-full px-3 py-4 border-b shadow-sm",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(l,{className:"text-2xl text-black cursor-pointer",onClick:()=>E(-1)}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Send Us Feedback"})]})}),r.jsxs("div",{className:"w-full max-w-3xl bg-white  px-2",children:[r.jsxs("div",{className:"bg-customOrange flex flex-col relative text-center p-10  rounded-md justify-center items-center h-32 mb-3",children:[r.jsx("div",{className:"absolute top-0 right-0",children:r.jsx("img",{src:"./Vector.png",alt:"",className:"w-16 h-24"})}),r.jsx("div",{className:"absolute bottom-0 left-0",children:r.jsx("img",{src:"./Vector2.png",alt:"",className:"w-16 h-16"})}),r.jsx("h1",{className:"text-3xl text-white font-bold mb-2",children:"Submit Your Feedback"})]}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("label",{className:"text-sm font-medium font-opensans text-gray-700",children:["Whats the issue?",r.jsxs("select",{value:b,onChange:e=>g(e.target.value),className:"w-full p-2 border focus:outline-customOrange border-gray-300 rounded mt-1",children:[r.jsx("option",{value:"",children:"Select a type"}),r.jsx("option",{value:"Complaint",children:"Complaint"}),r.jsx("option",{value:"Suggestion",children:"Suggestion"}),r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Bug",children:"Noticed a Bug"}),r.jsx("option",{value:"Payment",children:"Payment Issues"})]})]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Explain better:",r.jsx("textarea",{value:p,onChange:e=>j(e.target.value),className:"w-full p-2 border focus:outline-customOrange border-gray-300 rounded mt-1 resize-none",rows:"5",placeholder:"Describe your feedback here..."})]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Email Address:",r.jsx("input",{type:"email",value:w,onChange:e=>N(e.target.value),className:"w-full p-2 border focus:outline-customOrange border-gray-300 rounded mt-1 "+(O?"bg-gray-200":""),readOnly:O,placeholder:"Enter your email address"})]}),r.jsx("div",{className:"text-sm",children:"Attach up to 3 pictures or screenshots to help us better understand you (Optional):"}),r.jsx("div",{className:"overflow-x-auto ",children:r.jsxs("div",{className:"flex space-x-4",children:[y.map(((e,s)=>r.jsxs("div",{className:"relative w-36 h-36",children:[r.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover rounded-lg border-2 border-dashed border-customOrange"}),r.jsx("button",{onClick:()=>(e=>{v((s=>s.filter(((s,t)=>t!==e))))})(s),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 text-xs w-7 h-7",children:"‚àí"})]},s))),y.length<3&&r.jsxs("label",{className:"w-36 h-36 rounded-lg border-2 border-dashed border-customOrange flex items-center justify-center cursor-pointer",children:[r.jsx("span",{className:"text-customOrange",children:"+"}),r.jsx("input",{type:"file",onChange:e=>{const s=e.target.files[0];s&&y.length<3&&v((e=>[...e,s]))},className:"hidden"})]})]})})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:async()=>{if(b&&p&&w)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)){S(!0);try{const e=F.currentUser,s=`${(null==e?void 0:e.uid)||"guest"}-${Date.now()}`;let t=[];y.length>0&&(t=await(async(e,s)=>{const t=[];for(const r of e)try{const e=u(P,`feedbacks/${s}-${r.name}`);await m(e,r);const a=await h(e);t.push(a)}catch(a){throw new Error("Failed to upload attachment.")}return t})(y,s));const a={userId:(null==e?void 0:e.uid)||null,email:w,feedbackType:b,feedbackText:p,attachmentUrls:t,submittedAt:i()};await n(c(d,"feedbacks",s),a),o.success("Feedback submitted successfully!"),g(""),j(""),v([]),O||N("")}catch(e){o.error("Failed to submit feedback. Please try again later.")}finally{S(!1)}}else o.error("Please provide a valid email address.");else o.error("Please fill in all required fields.")},disabled:k,className:"w-full h-12 rounded-full bg-customOrange text-white font-medium text-sm hover:bg-customDeepOrange flex items-center justify-center",children:k?r.jsx(x,{width:"25",height:"25",strokeColor:"white",strokeWidth:"4"}):"Submit Feedback"})}),r.jsx("div",{className:"my-3 text-center text-xs text-customOrange",children:"‚ìò Your feedback helps us improve our service. Thank you for taking the time to share your thoughts with us.üòÅüß°"})]})]})]})};export{b as default};
