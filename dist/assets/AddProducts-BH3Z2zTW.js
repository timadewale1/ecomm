import{r as e,bS as t,bT as n,bU as s,R as r,j as o,Q as i,M as a,by as l,b as c,bz as u,_ as d,aC as p,q as m,c as f,a as h,w as b,g as v,bV as y,bW as x,bX as g,bY as w,bZ as S,b_ as j,b$ as k,d as N,y as P,e as C,ac as O,s as T,c0 as E,c1 as I,a9 as R,Y as M,bB as D,bh as A,az as z,c2 as L,a2 as B,c3 as _,c4 as F,bD as W,bE as U,bF as H,ab as V,bA as $}from"./index-CvIXhaMv.js";import{g as G}from"./index-C-KPEfQB.js";import{r as q}from"./index-BaqZIR9i.js";import{a as K}from"./index-DfGOTzdC.js";import{_ as Y}from"./inheritsLoose-BMl3PfwL.js";import{T as X,a as Q}from"./Transition-DlEawdUv.js";import{T as J}from"./index-DZJSELV0.js";import{p as Z,a as ee}from"./producttype-CCeY2YpR.js";function te(t,n){var s=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){s[t.key]=function(t){return n&&e.isValidElement(t)?n(t):t}(t)})),s}function ne(e,t,n){return null!=n[t]?n[t]:e.props[t]}function se(t,n,s){var r=te(t.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var s,r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var a={};for(var l in t){if(r[l])for(s=0;s<r[l].length;s++){var c=r[l][s];a[r[l][s]]=n(c)}a[l]=n(l)}for(s=0;s<o.length;s++)a[o[s]]=n(o[s]);return a}(n,r);return Object.keys(o).forEach((function(i){var a=o[i];if(e.isValidElement(a)){var l=i in n,c=i in r,u=n[i],d=e.isValidElement(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&e.isValidElement(u)&&(o[i]=e.cloneElement(a,{onExited:s.bind(null,a),in:u.props.in,exit:ne(a,"exit",t),enter:ne(a,"enter",t)})):o[i]=e.cloneElement(a,{in:!1}):o[i]=e.cloneElement(a,{onExited:s.bind(null,a),in:!0,exit:ne(a,"exit",t),enter:ne(a,"enter",t)})}})),o}var re=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},oe=function(o){function i(e,n){var s,r=(s=o.call(this,e,n)||this).handleExited.bind(t(s));return s.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},s}Y(i,o);var a=i.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(t,n){var s,r,o=n.children,i=n.handleExited;return{children:n.firstRender?(s=t,r=i,te(s.children,(function(t){return e.cloneElement(t,{onExited:r.bind(null,t),in:!0,appear:ne(t,"appear",s),enter:ne(t,"enter",s),exit:ne(t,"exit",s)})}))):se(t,o,i),firstRender:!1}},a.handleExited=function(e,t){var s=te(this.props.children);e.key in s||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var s=n({},t.children);return delete s[e.key],{children:s}})))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,o=s(e,["component","childFactory"]),i=this.state.contextValue,a=re(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,null===t?r.createElement(X.Provider,{value:i},a):r.createElement(X.Provider,{value:i},r.createElement(t,o,a))},i}(r.Component);oe.propTypes={},oe.defaultProps={component:"div",childFactory:function(e){return e}};const ie=({isOpen:t,onClose:n,children:s})=>{const r=e.useRef(null);return e.useEffect((()=>{t&&G.fromTo(r.current,{opacity:0,y:810},{opacity:1,y:0,duration:1,ease:"power2.out"})}),[t]),t?o.jsx("div",{className:"fixed inset-0 flex rounded-t-lg flex-col items-center justify-center w-full bg-gray-300 bg-opacity-70 modal",children:o.jsxs("div",{ref:r,className:"bg-white rounded-t-lg mx-1 px-2 py-4 flex flex-col items-center w-full md:w-3/4 lg:w-1/2 max-h-screen overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[o.jsx(i,{className:"text-3xl cursor-pointer",onClick:n}),o.jsx("h2",{className:"text-xl font-opensans text-center font-semibold text-black",children:"Add Product"}),o.jsx("div",{className:"w-3 h-3"})]}),o.jsx("div",{className:"w-full p-2",children:s})]})}):null};a.setAppElement("#root");const ae=({isOpen:t,onRequestClose:n,handleSaveDiscount:s})=>{const[r,i]=e.useState([]),[y,x]=e.useState(null),[g,w]=e.useState(""),[S,j]=e.useState(""),[k,N]=e.useState(""),[P,C]=e.useState(""),[O,T]=e.useState(""),[E,I]=e.useState(!1),[R,M]=e.useState("monetary"),[D,A]=e.useState(!1),[z,L]=e.useState(""),[B,_]=e.useState(!1),F=()=>_(!1);e.useEffect((()=>{(async()=>{try{const e=m(f(h,"inAppDiscounts"),b("isActive","==",!0)),t=await v(e),n=[];t.forEach((e=>{n.push({id:e.id,...e.data()})})),n.push({id:"personal",name:"Run Personal Discount"}),i(n),n.length>0&&(x(n[0]),T(`inApp-${n[0].id}`))}catch(e){}})()}),[]),e.useEffect((()=>{const e=parseFloat(g),t=parseFloat(S);if(!isNaN(e)&&!isNaN(t)&&e>0&&t<e){const n=e-t,s=Math.round(n/e*100);N(n.toFixed(2)),C(s)}else N(""),C("")}),[g,S]);const W=e=>(e.replace(/\D/g,"")/100).toFixed(2),U=O.startsWith("inApp")||"personal-monetary"===O,H="personal-freebies"===O;let V="";U?""===g.trim()?V="Initial price is required.":""===S.trim()?V="Discount price is required.":parseFloat(S)<300?V="Discount price must be at least 300.":parseFloat(S)>=parseFloat(g)&&(V="Discount price must be less than the initial price."):H&&""===z.trim()&&(V="Freebie details are required.");const $=""===V;return o.jsxs(o.Fragment,{children:[o.jsxs(a,{isOpen:t,onRequestClose:()=>n(!0),className:"discount-modal",overlayClassName:"modal-overlay",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-2 py-2",children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx("h2",{className:"font-opensans text-lg text-customRichBrown font-semibold",children:y&&"personal"!==y.id?"In‑App Discount":"Personal Discount"}),o.jsx(l,{className:"text-customOrange text-xl ml-2"})]}),o.jsx(c,{className:"text-black text-xl cursor-pointer",onClick:()=>n(!0)})]}),o.jsxs("div",{className:"py-4 px-2 overflow-y-auto max-h-[90vh]",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown",children:"Select a Discount Option"}),o.jsx("button",{className:"bg-white w-full text-left text-sm font-opensans border-gray-100 border-2 px-4 py-2 rounded-lg",onClick:()=>I(!E),children:y?y.name:"Select Discount"}),E&&o.jsx("div",{className:"absolute z-50 bg-white w-full rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 mt-2 p-3",children:r.map((e=>o.jsxs("button",{onClick:()=>{x(e),I(!1),"personal"!==e.id?T(`inApp-${e.id}`):T("personal-monetary")},className:"block w-full text-left text-sm text-black font-opensans px-2 py-1 hover:bg-gray-100 rounded-md",children:[e.name," ",e.startDate&&e.endDate?`(Valid from ${new Date(1e3*e.startDate.seconds).toDateString()} to ${new Date(1e3*e.endDate.seconds).toDateString()})`:""]},e.id)))})]}),y&&"personal"===y.id&&o.jsxs("div",{className:"relative mt-4 flex flex-col ",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown",children:"Select Personal Discount Type"}),o.jsx("button",{className:"ml-2",onClick:()=>_(!0),children:o.jsx(u,{className:"w-5 h-5 text-customRichBrown"})})]}),o.jsxs("div",{className:"w-full",children:[o.jsx("button",{className:"bg-white w-full text-left text-sm font-opensans border-gray-100 border-2 px-4 py-2 rounded-lg mt-2",onClick:()=>A(!D),children:"monetary"===R?"Monetary":"Freebies"}),D&&o.jsxs("div",{className:"absolute z-50 bg-white w-full rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 mt-2 p-3",children:[o.jsx("button",{onClick:()=>{M("monetary"),A(!1),T("personal-monetary")},className:"block w-full text-left text-sm text-black font-opensans px-2 py-1 hover:bg-gray-100 rounded-md",children:"Monetary"}),o.jsx("button",{onClick:()=>{M("freebies"),A(!1),T("personal-freebies")},className:"block w-full text-left text-sm text-black font-opensans px-2 py-1 hover:bg-gray-100 rounded-md",children:"Freebies"})]})]})]}),(y&&"personal"!==y.id||y&&"personal"===y.id&&"monetary"===R)&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown",children:"Initial Price"}),o.jsx("input",{type:"text",value:g,onChange:e=>w(W(e.target.value)),className:"w-full text-right border-2 font-opensans text-gray-800 border-gray-100 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"0.00"}),o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown mt-4",children:"Discount Price"}),o.jsx("input",{type:"text",value:S,onChange:e=>j(W(e.target.value)),onBlur:()=>{parseFloat(S)<300&&(d.error("Discount price must be at least 300"),j(""))},className:"w-full text-right border-2 font-opensans text-gray-800 border-gray-100 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"0.00"}),o.jsxs("div",{className:"mt-4 flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown",children:"Subtractive Value"}),o.jsxs("div",{className:"w-full border-2 rounded-md px-2 py-2 bg-gray-50 font-opensans font-medium text-black text-sm border-gray-100 text-right",children:["₦",k]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown",children:"Percentage Cut"}),o.jsxs("div",{className:"w-full border-2 rounded-md px-2 py-2 bg-gray-50 font-opensans font-medium text-black text-sm border-gray-100 text-right",children:[P,"%"]})]})]})]}),y&&"personal"===y.id&&"freebies"===R&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium font-opensans text-customRichBrown",children:"Freebie Details"}),o.jsx("input",{type:"text",value:z,onChange:e=>L(e.target.value),className:"w-full border-2 font-opensans text-gray-800 border-gray-100 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"Enter details (e.g., Buy 1 Get 1 Free, Free Delivery)"})]}),!$&&o.jsx("div",{className:"mt-4",children:o.jsx("p",{className:"text-sm font-opensans text-red-600",children:V})}),o.jsx("div",{className:"flex justify-center mt-6",children:o.jsx("button",{onClick:()=>{let e;y&&"personal"!==y.id?e={discountType:`inApp-${y.id}`,selectedDiscount:y,initialPrice:parseFloat(g),discountPrice:parseFloat(S),subtractiveValue:parseFloat(k),percentageCut:parseFloat(P)}:y&&"personal"===y.id&&("monetary"===R?e={discountType:"personal-monetary",initialPrice:parseFloat(g),discountPrice:parseFloat(S),subtractiveValue:parseFloat(k),percentageCut:parseFloat(P)}:"freebies"===R&&(e={discountType:"personal-freebies",freebieText:z})),s(e),n()},disabled:!$,className:"w-full px-4 py-3 rounded-full font-opensans font-medium text-sm "+($?"bg-customOrange text-white hover:bg-orange-700":"bg-gray-400 text-gray-200 cursor-not-allowed"),children:"Save Discount"})})]})]}),o.jsxs(a,{isOpen:B,onRequestClose:F,className:"modal-content-rider h-auto",overlayClassName:"modal-overlay backdrop-blur-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-7 h-7 bg-blue-100 flex justify-center items-center rounded-full",children:o.jsx(p,{className:"text-customRichBrown"})}),o.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Personal Discount Details"})]}),o.jsx(c,{className:"text-xl relative -top-2",onClick:F})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsx("p",{className:"text-xs font-opensans text-black font-medium",children:"Monetary Discount:"}),o.jsx("p",{className:"text-xs font-opensans text-black",children:"With a Monetary Discount, you set an initial price and a discounted price. The system calculates the amount off and the percentage reduction (displayed as a whole number). Ensure that the discount price is at least 300 and less than the initial price."}),o.jsx("p",{className:"text-xs font-opensans text-black font-medium mt-2",children:"Freebies Discount:"}),o.jsx("p",{className:"text-xs font-opensans text-black",children:'When choosing Freebies, no price reduction is applied. Instead, you provide details of the free offer (e.g., "Buy 1 Get 1 Free" or "Free Delivery"). This option is ideal if you wish to offer an incentive without changing the product price.'})]}),o.jsx("div",{className:"flex justify-end mt-2",children:o.jsx("button",{onClick:F,className:"bg-customOrange text-white font-opensans py-2 px-12 rounded-full flex items-center",children:"Close"})})]})]})};var le,ce,ue={},de={},pe={},me={};function fe(){return le||(le=1,function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=m;var s=o(t),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};function a(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=!1;function m(e){p=e}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){m(!0)}}))}catch(v){}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{capture:!0};return p?e:e.capture}function h(e){if("touches"in e){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.screenX,y:e.screenY}}var b=function(e){function t(){var e;l(this,t);for(var n=arguments.length,s=Array(n),r=0;r<n;r++)s[r]=arguments[r];var o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s)));return o._handleSwipeStart=o._handleSwipeStart.bind(o),o._handleSwipeMove=o._handleSwipeMove.bind(o),o._handleSwipeEnd=o._handleSwipeEnd.bind(o),o._onMouseDown=o._onMouseDown.bind(o),o._onMouseMove=o._onMouseMove.bind(o),o._onMouseUp=o._onMouseUp.bind(o),o._setSwiperRef=o._setSwiperRef.bind(o),o}return d(t,e),c(t,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,f({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,f({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(e){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(e))}},{key:"_onMouseMove",value:function(e){this.mouseDown&&this._handleSwipeMove(e)}},{key:"_onMouseUp",value:function(e){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(e)}},{key:"_handleSwipeStart",value:function(e){var t=h(e),n=t.x,s=t.y;this.moveStart={x:n,y:s},this.props.onSwipeStart(e)}},{key:"_handleSwipeMove",value:function(e){if(this.moveStart){var t=h(e),n=t.x,s=t.y,r=n-this.moveStart.x,o=s-this.moveStart.y;this.moving=!0,this.props.onSwipeMove({x:r,y:o},e)&&e.cancelable&&e.preventDefault(),this.movePosition={deltaX:r,deltaY:o}}}},{key:"_handleSwipeEnd",value:function(e){this.props.onSwipeEnd(e);var t=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-t?this.props.onSwipeLeft(1,e):this.movePosition.deltaX>t&&this.props.onSwipeRight(1,e),this.movePosition.deltaY<-t?this.props.onSwipeUp(1,e):this.movePosition.deltaY>t&&this.props.onSwipeDown(1,e)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(e){this.swiper=e,this.props.innerRef(e)}},{key:"render",value:function(){var e=this.props;e.tagName;var t=e.className,n=e.style,r=e.children;e.allowMouseEvents,e.onSwipeUp,e.onSwipeDown,e.onSwipeLeft,e.onSwipeRight,e.onSwipeStart,e.onSwipeMove,e.onSwipeEnd,e.innerRef,e.tolerance;var o=a(e,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return s.default.createElement(this.props.tagName,i({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:t,style:n},o),r)}}]),t}(t.Component);b.displayName="ReactSwipe",b.propTypes={tagName:r.default.string,className:r.default.string,style:r.default.object,children:r.default.node,allowMouseEvents:r.default.bool,onSwipeUp:r.default.func,onSwipeDown:r.default.func,onSwipeLeft:r.default.func,onSwipeRight:r.default.func,onSwipeStart:r.default.func,onSwipeMove:r.default.func,onSwipeEnd:r.default.func,innerRef:r.default.func,tolerance:r.default.number.isRequired},b.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},e.default=b}(me,y(),x())),me}function he(){return ce||(ce=1,function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=s(t);function s(e){return e&&e.__esModule?e:{default:e}}e.default=n.default}(pe,fe())),pe}var be,ve={};function ye(){if(be)return ve;be=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var e,t=(e=q())&&e.__esModule?e:{default:e};var n={ROOT:function(e){return(0,t.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,t.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,n){return(0,t.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":"horizontal"===n,"axis-vertical":"horizontal"!==n})},SLIDER:function(e,n){return(0,t.default)({thumbs:!e,slider:e,animated:!n})},ITEM:function(e,n,s){return(0,t.default)({thumb:!e,slide:e,selected:n,previous:s})},ARROW_PREV:function(e){return(0,t.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,t.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,t.default)({dot:!0,selected:e})}};return ve.default=n,ve}var xe,ge={},we={};var Se,je={};function ke(){if(Se)return je;Se=1,Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;return je.default=function(e,t,n){var s=0===e?e:e+t;return"translate3d"+("("+("horizontal"===n?[s,0,0]:[0,s,0]).join(",")+")")},je}var Ne,Pe,Ce={};function Oe(){if(Ne)return Ce;Ne=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=void 0;return Ce.default=function(){return window},Ce}function Te(){if(Pe)return ge;Pe=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=s?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(y()),t=i(ye()),n=(xe||(xe=1,Object.defineProperty(we,"__esModule",{value:!0}),we.outerWidth=void 0,we.outerWidth=function(e){var t=e.offsetWidth,n=getComputedStyle(e);return t+(parseInt(n.marginLeft)+parseInt(n.marginRight))}),we),s=i(ke()),r=i(he()),o=i(Oe());function i(e){return e&&e.__esModule?e:{default:e}}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}function u(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(i){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,i);var a=p(l);function l(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),h(m(r=a.call(this,t)),"itemsWrapperRef",void 0),h(m(r),"itemsListRef",void 0),h(m(r),"thumbsRef",void 0),h(m(r),"setItemsWrapperRef",(function(e){r.itemsWrapperRef=e})),h(m(r),"setItemsListRef",(function(e){r.itemsListRef=e})),h(m(r),"setThumbsRef",(function(e,t){r.thumbsRef||(r.thumbsRef=[]),r.thumbsRef[t]=e})),h(m(r),"updateSizes",(function(){if(r.props.children&&r.itemsWrapperRef&&r.thumbsRef){var t=e.Children.count(r.props.children),s=r.itemsWrapperRef.clientWidth,o=r.props.thumbWidth?r.props.thumbWidth:(0,n.outerWidth)(r.thumbsRef[0]),i=Math.floor(s/o),a=i<t,l=a?t-i:0;r.setState((function(e,t){return{itemSize:o,visibleItems:i,firstItem:a?r.getFirstItem(t.selectedItem):0,lastPosition:l,showArrows:a}}))}})),h(m(r),"handleClickItem",(function(e,t,n){if(!function(e){return e.hasOwnProperty("key")}(n)||"Enter"===n.key){var s=r.props.onSelectItem;"function"==typeof s&&s(e,t)}})),h(m(r),"onSwipeStart",(function(){r.setState({swiping:!0})})),h(m(r),"onSwipeEnd",(function(){r.setState({swiping:!1})})),h(m(r),"onSwipeMove",(function(t){var n=t.x;if(!r.state.itemSize||!r.itemsWrapperRef||!r.state.visibleItems)return!1;var o=e.Children.count(r.props.children),i=-100*r.state.firstItem/r.state.visibleItems;0===i&&n>0&&(n=0),i===100*-Math.max(o-r.state.visibleItems,0)/r.state.visibleItems&&n<0&&(n=0);var a=i+100/(r.itemsWrapperRef.clientWidth/n);return r.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(e){r.itemsListRef.style[e]=(0,s.default)(a,"%",r.props.axis)})),!0})),h(m(r),"slideRight",(function(e){r.moveTo(r.state.firstItem-("number"==typeof e?e:1))})),h(m(r),"slideLeft",(function(e){r.moveTo(r.state.firstItem+("number"==typeof e?e:1))})),h(m(r),"moveTo",(function(e){e=(e=e<0?0:e)>=r.state.lastPosition?r.state.lastPosition:e,r.setState({firstItem:e})})),r.state={selectedItem:t.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},r}return u(l,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(e){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==e.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,o.default)().addEventListener("resize",this.updateSizes),(0,o.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,o.default)().removeEventListener("resize",this.updateSizes),(0,o.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(e){var t=e;return e>=this.state.lastPosition&&(t=this.state.lastPosition),e<this.state.firstItem+this.state.visibleItems&&(t=this.state.firstItem),e<this.state.firstItem&&(t=e),t}},{key:"renderItems",value:function(){var n=this;return this.props.children.map((function(s,r){var o=t.default.ITEM(!1,r===n.state.selectedItem),i={key:r,ref:function(e){return n.setThumbsRef(e,r)},className:o,onClick:n.handleClickItem.bind(n,r,n.props.children[r]),onKeyDown:n.handleClickItem.bind(n,r,n.props.children[r]),"aria-label":"".concat(n.props.labels.item," ").concat(r+1),style:{width:n.props.thumbWidth}};return e.default.createElement("li",c({},i,{role:"button",tabIndex:0}),s)}))}},{key:"render",value:function(){var n=this;if(!this.props.children)return null;var o,i=e.Children.count(this.props.children)>1,a=this.state.showArrows&&this.state.firstItem>0,l=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,c=-this.state.firstItem*(this.state.itemSize||0),u=(0,s.default)(c,"px",this.props.axis),d=this.props.transitionTime+"ms";return o={WebkitTransform:u,MozTransform:u,MsTransform:u,OTransform:u,transform:u,msTransform:u,WebkitTransitionDuration:d,MozTransitionDuration:d,MsTransitionDuration:d,OTransitionDuration:d,transitionDuration:d,msTransitionDuration:d},e.default.createElement("div",{className:t.default.CAROUSEL(!1)},e.default.createElement("div",{className:t.default.WRAPPER(!1),ref:this.setItemsWrapperRef},e.default.createElement("button",{type:"button",className:t.default.ARROW_PREV(!a),onClick:function(){return n.slideRight()},"aria-label":this.props.labels.leftArrow}),i?e.default.createElement(r.default,{tagName:"ul",className:t.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:o,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):e.default.createElement("ul",{className:t.default.SLIDER(!1,this.state.swiping),ref:function(e){return n.setItemsListRef(e)},style:o},this.renderItems()),e.default.createElement("button",{type:"button",className:t.default.ARROW_NEXT(!l),onClick:function(){return n.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),l}(e.Component);return ge.default=b,h(b,"displayName","Thumbs"),h(b,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350}),ge}var Ee,Ie={};var Re,Me={};function De(){if(Re)return Me;Re=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.setPosition=Me.getPosition=Me.isKeyboardEvent=Me.defaultStatusFormatter=Me.noop=void 0;var e,t=y(),n=(e=ke())&&e.__esModule?e:{default:e};Me.noop=function(){};Me.defaultStatusFormatter=function(e,t){return"".concat(e," of ").concat(t)};Me.isKeyboardEvent=function(e){return!!e&&e.hasOwnProperty("key")};Me.getPosition=function(e,n){if(n.infiniteLoop&&++e,0===e)return 0;var s=t.Children.count(n.children);if(n.centerMode&&"horizontal"===n.axis){var r=-e*n.centerSlidePercentage,o=s-1;return e&&(e!==o||n.infiniteLoop)?r+=(100-n.centerSlidePercentage)/2:e===o&&(r+=100-n.centerSlidePercentage),r}return 100*-e};return Me.setPosition=function(e,t){var s={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(r){s[r]=(0,n.default)(e,"%",t)})),s},Me}var Ae,ze,Le={};function Be(){if(ze)return de;ze=1,Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0;var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=s?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(y()),t=l(he()),n=l(ye()),s=l(Te()),r=l((Ee||(Ee=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0,Ie.default=function(){return document}),Ie)),o=l(Oe()),i=De(),a=function(){if(Ae)return Le;Ae=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.fadeAnimationHandler=Le.slideStopSwipingHandler=Le.slideSwipeAnimationHandler=Le.slideAnimationHandler=void 0;var e,t=y(),n=(e=ke())&&e.__esModule?e:{default:e},s=De();function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}return Le.slideAnimationHandler=function(e,r){var i={},a=r.selectedItem,l=a,c=t.Children.count(e.children)-1;if(e.infiniteLoop&&(a<0||a>c))return l<0?e.centerMode&&e.centerSlidePercentage&&"horizontal"===e.axis?i.itemListStyle=(0,s.setPosition)(-(c+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):i.itemListStyle=(0,s.setPosition)(100*-(c+2),e.axis):l>c&&(i.itemListStyle=(0,s.setPosition)(0,e.axis)),i;var u=(0,s.getPosition)(a,e),d=(0,n.default)(u,"%",e.axis),p=e.transitionTime+"ms";return i.itemListStyle={WebkitTransform:d,msTransform:d,OTransform:d,transform:d},r.swiping||(i.itemListStyle=o(o({},i.itemListStyle),{},{WebkitTransitionDuration:p,MozTransitionDuration:p,OTransitionDuration:p,transitionDuration:p,msTransitionDuration:p})),i},Le.slideSwipeAnimationHandler=function(e,n,r,o){var i={},a="horizontal"===n.axis,l=t.Children.count(n.children),c=(0,s.getPosition)(r.selectedItem,n),u=n.infiniteLoop?(0,s.getPosition)(l-1,n)-100:(0,s.getPosition)(l-1,n),d=a?e.x:e.y,p=d;0===c&&d>0&&(p=0),c===u&&d<0&&(p=0);var m=c+100/(r.itemSize/p),f=Math.abs(d)>n.swipeScrollTolerance;return n.infiniteLoop&&f&&(0===r.selectedItem&&m>-100?m-=100*l:r.selectedItem===l-1&&m<100*-l&&(m+=100*l)),(!n.preventMovementUntilSwipeScrollTolerance||f||r.swipeMovementStarted)&&(r.swipeMovementStarted||o({swipeMovementStarted:!0}),i.itemListStyle=(0,s.setPosition)(m,n.axis)),f&&!r.cancelClick&&o({cancelClick:!0}),i},Le.slideStopSwipingHandler=function(e,t){var n=(0,s.getPosition)(t.selectedItem,e);return{itemListStyle:(0,s.setPosition)(n,e.axis)}},Le.fadeAnimationHandler=function(e,t){var n=e.transitionTime+"ms",s="ease-in-out",r={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:s,msTransitionTimingFunction:s,MozTransitionTimingFunction:s,WebkitTransitionTimingFunction:s,OTransitionTimingFunction:s};return t.swiping||(r=o(o({},r),{},{WebkitTransitionDuration:n,MozTransitionDuration:n,OTransitionDuration:n,transitionDuration:n,msTransitionDuration:n})),{slideStyle:r,selectedStyle:o(o({},r),{},{opacity:1,position:"relative"}),prevStyle:o({},r)}},Le}();function l(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d.apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=x(e);if(t){var r=x(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(l){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,l);var c=b(u);function u(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),g(v(n=c.call(this,t)),"thumbsRef",void 0),g(v(n),"carouselWrapperRef",void 0),g(v(n),"listRef",void 0),g(v(n),"itemsRef",void 0),g(v(n),"timer",void 0),g(v(n),"animationHandler",void 0),g(v(n),"setThumbsRef",(function(e){n.thumbsRef=e})),g(v(n),"setCarouselWrapperRef",(function(e){n.carouselWrapperRef=e})),g(v(n),"setListRef",(function(e){n.listRef=e})),g(v(n),"setItemsRef",(function(e,t){n.itemsRef||(n.itemsRef=[]),n.itemsRef[t]=e})),g(v(n),"autoPlay",(function(){e.Children.count(n.props.children)<=1||(n.clearAutoPlay(),n.props.autoPlay&&(n.timer=setTimeout((function(){n.increment()}),n.props.interval)))})),g(v(n),"clearAutoPlay",(function(){n.timer&&clearTimeout(n.timer)})),g(v(n),"resetAutoPlay",(function(){n.clearAutoPlay(),n.autoPlay()})),g(v(n),"stopOnHover",(function(){n.setState({isMouseEntered:!0},n.clearAutoPlay)})),g(v(n),"startOnLeave",(function(){n.setState({isMouseEntered:!1},n.autoPlay)})),g(v(n),"isFocusWithinTheCarousel",(function(){return!!n.carouselWrapperRef&&!((0,r.default)().activeElement!==n.carouselWrapperRef&&!n.carouselWrapperRef.contains((0,r.default)().activeElement))})),g(v(n),"navigateWithKeyboard",(function(e){if(n.isFocusWithinTheCarousel()){var t="horizontal"===n.props.axis,s=t?37:38;(t?39:40)===e.keyCode?n.increment():s===e.keyCode&&n.decrement()}})),g(v(n),"updateSizes",(function(){if(n.state.initialized&&n.itemsRef&&0!==n.itemsRef.length){var e="horizontal"===n.props.axis,t=n.itemsRef[0];if(t){var s=e?t.clientWidth:t.clientHeight;n.setState({itemSize:s}),n.thumbsRef&&n.thumbsRef.updateSizes()}}})),g(v(n),"setMountState",(function(){n.setState({hasMount:!0}),n.updateSizes()})),g(v(n),"handleClickItem",(function(t,s){0!==e.Children.count(n.props.children)&&(n.state.cancelClick?n.setState({cancelClick:!1}):(n.props.onClickItem(t,s),t!==n.state.selectedItem&&n.setState({selectedItem:t})))})),g(v(n),"handleOnChange",(function(t,s){e.Children.count(n.props.children)<=1||n.props.onChange(t,s)})),g(v(n),"handleClickThumb",(function(e,t){n.props.onClickThumb(e,t),n.moveTo(e)})),g(v(n),"onSwipeStart",(function(e){n.setState({swiping:!0}),n.props.onSwipeStart(e)})),g(v(n),"onSwipeEnd",(function(e){n.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),n.props.onSwipeEnd(e),n.clearAutoPlay(),n.state.autoPlay&&n.autoPlay()})),g(v(n),"onSwipeMove",(function(e,t){n.props.onSwipeMove(t);var s=n.props.swipeAnimationHandler(e,n.props,n.state,n.setState.bind(v(n)));return n.setState(m({},s)),!!Object.keys(s).length})),g(v(n),"decrement",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.moveTo(n.state.selectedItem-("number"==typeof e?e:1))})),g(v(n),"increment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.moveTo(n.state.selectedItem+("number"==typeof e?e:1))})),g(v(n),"moveTo",(function(t){if("number"==typeof t){var s=e.Children.count(n.props.children)-1;t<0&&(t=n.props.infiniteLoop?s:0),t>s&&(t=n.props.infiniteLoop?0:s),n.selectItem({selectedItem:t}),n.state.autoPlay&&!1===n.state.isMouseEntered&&n.resetAutoPlay()}})),g(v(n),"onClickNext",(function(){n.increment(1)})),g(v(n),"onClickPrev",(function(){n.decrement(1)})),g(v(n),"onSwipeForward",(function(){n.increment(1),n.props.emulateTouch&&n.setState({cancelClick:!0})})),g(v(n),"onSwipeBackwards",(function(){n.decrement(1),n.props.emulateTouch&&n.setState({cancelClick:!0})})),g(v(n),"changeItem",(function(e){return function(t){(0,i.isKeyboardEvent)(t)&&"Enter"!==t.key||n.moveTo(e)}})),g(v(n),"selectItem",(function(t){n.setState(m({previousItem:n.state.selectedItem},t),(function(){n.setState(n.animationHandler(n.props,n.state))})),n.handleOnChange(t.selectedItem,e.Children.toArray(n.props.children)[t.selectedItem])})),g(v(n),"getInitialImage",(function(){var e=n.props.selectedItem,t=n.itemsRef&&n.itemsRef[e];return(t&&t.getElementsByTagName("img")||[])[0]})),g(v(n),"getVariableItemHeight",(function(e){var t=n.itemsRef&&n.itemsRef[e];if(n.state.hasMount&&t&&t.children.length){var s=t.children[0].getElementsByTagName("img")||[];if(s.length>0){var r=s[0];if(!r.complete){r.addEventListener("load",(function e(){n.forceUpdate(),r.removeEventListener("load",e)}))}}var o=(s[0]||t.children[0]).clientHeight;return o>0?o:null}return null}));var s={initialized:!1,previousItem:t.selectedItem,selectedItem:t.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:t.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return n.animationHandler="function"==typeof t.animationHandler&&t.animationHandler||"fade"===t.animationHandler&&a.fadeAnimationHandler||a.slideAnimationHandler,n.state=m(m({},s),n.animationHandler(t,s)),n}return f(u,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(e,t){e.children||!this.props.children||this.state.initialized||this.setupCarousel(),!e.autoFocus&&this.props.autoFocus&&this.forceFocus(),t.swiping&&!this.state.swiping&&this.setState(m({},this.props.stopSwipingHandler(this.props,this.state))),e.selectedItem===this.props.selectedItem&&e.centerMode===this.props.centerMode||(this.updateSizes(),this.moveTo(this.props.selectedItem)),e.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var t=this;this.bindEvents(),this.state.autoPlay&&e.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},(function(){var e=t.getInitialImage();e&&!e.complete?e.addEventListener("load",t.setMountState):t.setMountState()}))}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.addEventListener("mouseenter",this.stopOnHover),e.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.removeEventListener("mouseenter",this.stopOnHover),e.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,o.default)().addEventListener("resize",this.updateSizes),(0,o.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,r.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,o.default)().removeEventListener("resize",this.updateSizes),(0,o.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var e=this.getInitialImage();e&&e.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,r.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var e;null===(e=this.carouselWrapperRef)||void 0===e||e.focus()}},{key:"renderItems",value:function(t){var s=this;return this.props.children?e.Children.map(this.props.children,(function(r,o){var i=o===s.state.selectedItem,a=o===s.state.previousItem,l=i&&s.state.selectedStyle||a&&s.state.prevStyle||s.state.slideStyle||{};s.props.centerMode&&"horizontal"===s.props.axis&&(l=m(m({},l),{},{minWidth:s.props.centerSlidePercentage+"%"})),s.state.swiping&&s.state.swipeMovementStarted&&(l=m(m({},l),{},{pointerEvents:"none"}));var c={ref:function(e){return s.setItemsRef(e,o)},key:"itemKey"+o+(t?"clone":""),className:n.default.ITEM(!0,o===s.state.selectedItem,o===s.state.previousItem),onClick:s.handleClickItem.bind(s,o,r),style:l};return e.default.createElement("li",c,s.props.renderItem(r,{isSelected:o===s.state.selectedItem,isPrevious:o===s.state.previousItem}))})):[]}},{key:"renderControls",value:function(){var t=this,n=this.props,s=n.showIndicators,r=n.labels,o=n.renderIndicator,i=n.children;return s?e.default.createElement("ul",{className:"control-dots"},e.Children.map(i,(function(e,n){return o&&o(t.changeItem(n),n===t.state.selectedItem,n,r.item)}))):null}},{key:"renderStatus",value:function(){return this.props.showStatus?e.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,e.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return this.props.showThumbs&&this.props.children&&0!==e.Children.count(this.props.children)?e.default.createElement(s.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children)):null}},{key:"render",value:function(){var s=this;if(!this.props.children||0===e.Children.count(this.props.children))return null;var r=this.props.swipeable&&e.Children.count(this.props.children)>1,o="horizontal"===this.props.axis,i=this.props.showArrows&&e.Children.count(this.props.children)>1,a=i&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,l=i&&(this.state.selectedItem<e.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,c=this.renderItems(!0),u=c.shift(),p=c.pop(),f={className:n.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},h={};if(o){if(f.onSwipeLeft=this.onSwipeForward,f.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var b=this.getVariableItemHeight(this.state.selectedItem);h.height=b||"auto"}}else f.onSwipeUp="natural"===this.props.verticalSwipe?this.onSwipeBackwards:this.onSwipeForward,f.onSwipeDown="natural"===this.props.verticalSwipe?this.onSwipeForward:this.onSwipeBackwards,f.style=m(m({},f.style),{},{height:this.state.itemSize}),h.height=this.state.itemSize;return e.default.createElement("div",{"aria-label":this.props.ariaLabel,className:n.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},e.default.createElement("div",{className:n.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,a,this.props.labels.leftArrow),e.default.createElement("div",{className:n.default.WRAPPER(!0,this.props.axis),style:h},r?e.default.createElement(t.default,d({tagName:"ul",innerRef:this.setListRef},f,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&p,this.renderItems(),this.props.infiniteLoop&&u):e.default.createElement("ul",{className:n.default.SLIDER(!0,this.state.swiping),ref:function(e){return s.setListRef(e)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&p,this.renderItems(),this.props.infiniteLoop&&u)),this.props.renderArrowNext(this.onClickNext,l,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),u}(e.default.Component);return de.default=w,g(w,"displayName","Carousel"),g(w,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:i.noop,onClickThumb:i.noop,onChange:i.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(t,s,r){return e.default.createElement("button",{type:"button","aria-label":r,className:n.default.ARROW_PREV(!s),onClick:t})},renderArrowNext:function(t,s,r){return e.default.createElement("button",{type:"button","aria-label":r,className:n.default.ARROW_NEXT(!s),onClick:t})},renderIndicator:function(t,s,r,o){return e.default.createElement("li",{className:n.default.DOT(s),onClick:t,onKeyDown:t,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(o," ").concat(r+1)})},renderItem:function(e){return e},renderThumbs:function(t){var n=e.Children.map(t,(function(t){var n=t;if("img"!==t.type&&(n=e.Children.toArray(t.props.children).find((function(e){return"img"===e.type}))),n)return n}));return 0===n.filter((function(e){return e})).length?[]:n},statusFormatter:i.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:a.slideSwipeAnimationHandler,stopSwipingHandler:a.slideStopSwipingHandler}),de}var _e,Fe,We={};Fe||(Fe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return s.default}});var t=r(Be()),n=(_e||(_e=1),We),s=r(Te());function r(e){return e&&e.__esModule?e:{default:e}}}(ue));var Ue=["in","onExited","appear","enter","exit"],He=function(t){return function(n){n.in,n.onExited,n.appear,n.enter,n.exit;var s=S(n,Ue);return e.createElement(t,s)}},Ve=["component","duration","in","onExited"],$e=function(t){var s=t.component,r=t.duration,o=void 0===r?1:r,i=t.in;t.onExited;var a=S(t,Ve),l=e.useRef(null),c={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(o,"ms")},exiting:{opacity:0},exited:{opacity:0}};return e.createElement(Q,{mountOnEnter:!0,unmountOnExit:!0,in:i,timeout:o,nodeRef:l},(function(t){var r={style:j({},c[t]),ref:l};return e.createElement(s,n({innerProps:r},a))}))},Ge=function(t){var n=t.children,s=t.in,r=t.onExited,o=e.useRef(null),i=e.useState("auto"),a=k(i,2),l=a[0],c=a[1];e.useEffect((function(){var e=o.current;if(e){var t=window.requestAnimationFrame((function(){return c(e.getBoundingClientRect().width)}));return function(){return window.cancelAnimationFrame(t)}}}),[]);var u=function(e){switch(e){default:return{width:l};case"exiting":return{width:0,transition:"width ".concat(260,"ms ease-out")};case"exited":return{width:0}}};return e.createElement(Q,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:s,onExited:function(){var e=o.current;e&&(null==r||r(e))},timeout:260,nodeRef:o},(function(t){return e.createElement("div",{ref:o,style:j({overflow:"hidden",whiteSpace:"nowrap"},u(t))},n)}))},qe=["in","onExited"],Ke=function(t){return function(s){var r=s.in,o=s.onExited,i=S(s,qe);return e.createElement(Ge,{in:r,onExited:o},e.createElement(t,n({cropWithEllipsis:r},i)))}},Ye=function(t){return function(s){return e.createElement($e,n({component:t,duration:s.isMulti?260:1},s))}},Xe=function(t){return function(s){return e.createElement($e,n({component:t},s))}},Qe=["component"],Je=["children"],Ze=function(t){var s=t.component,r=S(t,Qe),o=et(r);return e.createElement(oe,n({component:s},o))},et=function(t){var n=t.children,s=S(t,Je),r=s.isMulti,o=s.hasValue,i=s.innerProps,a=s.selectProps,l=a.components,c=a.controlShouldRenderValue,u=e.useState(r&&c&&o),d=k(u,2),p=d[0],m=d[1],f=e.useState(!1),h=k(f,2),b=h[0],v=h[1];e.useEffect((function(){o&&!p&&m(!0)}),[o,p]),e.useEffect((function(){b&&!o&&p&&m(!1),v(!1)}),[b,o,p]);var y=function(){return v(!0)},x=j(j({},i),{},{style:j(j({},null==i?void 0:i.style),{},{display:r&&o||p?"flex":"grid"})});return j(j({},s),{},{innerProps:x,children:e.Children.toArray(n).map((function(t){if(r&&e.isValidElement(t)){if(t.type===l.MultiValue)return e.cloneElement(t,{onExited:y});if(t.type===l.Placeholder&&p)return null}return t}))})},tt=function(t){return function(s){return s.isMulti?e.createElement(Ze,n({component:t},s)):e.createElement(oe,n({component:t},s))}},nt=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],st=function(){var e=w({components:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),t=e.Input,n=e.MultiValue,s=e.Placeholder,r=e.SingleValue,o=e.ValueContainer,i=S(e,nt);return j({Input:He(t),MultiValue:Ke(n),Placeholder:Ye(s),SingleValue:Xe(r),ValueContainer:tt(o)},i)},rt=st();rt.Input,rt.MultiValue,rt.Placeholder,rt.SingleValue,rt.ValueContainer;var ot=g(st);var it,at,lt,ct,ut,dt,pt,mt;it={exports:{}},"undefined"!=typeof window&&(at=window,lt=at.HTMLCanvasElement&&at.HTMLCanvasElement.prototype,ct=at.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),ut=ct&&at.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),dt=at.BlobBuilder||at.WebKitBlobBuilder||at.MozBlobBuilder||at.MSBlobBuilder,pt=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,mt=(ct||dt)&&at.atob&&at.ArrayBuffer&&at.Uint8Array&&function(e){var t,n,s,r,o,i,a,l,c;if(!(t=e.match(pt)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],r=e.slice(t[0].length),o=s?atob(r):decodeURIComponent(r),i=new ArrayBuffer(o.length),a=new Uint8Array(i),l=0;l<o.length;l+=1)a[l]=o.charCodeAt(l);return ct?new Blob([ut?a:i],{type:n}):((c=new dt).append(i),c.getBlob(n))},at.HTMLCanvasElement&&!lt.toBlob&&(lt.mozGetAsFile?lt.toBlob=function(e,t,n){var s=this;setTimeout((function(){n&&lt.toDataURL&&mt?e(mt(s.toDataURL(t,n))):e(s.mozGetAsFile("blob",t))}))}:lt.toDataURL&&mt&&(lt.msToBlob?lt.toBlob=function(e,t,n){var s=this;setTimeout((function(){(t&&"image/png"!==t||n)&&lt.toDataURL&&mt?e(mt(s.toDataURL(t,n))):e(s.msToBlob(t))}))}:lt.toBlob=function(e,t,n){var s=this;setTimeout((function(){e(mt(s.toDataURL(t,n)))}))})),it.exports?it.exports=mt:at.dataURLtoBlob=mt);const ft=({availableSizes:t,addSubProduct:n,closeModal:s,initialSubProducts:r=[]})=>{const[a,l]=e.useState(r.length>0?r:[{subProductId:Math.random().toString(36).substr(2,9),images:[],size:"",color:"",stock:""}]),c=e.useRef(null),[u,p]=e.useState(0),m=(e,t,n)=>{const s=[...a];s[e][t]=n,l(s)},f=()=>{a.length>=4?d.error("You can only add up to 4 sub-products",{duration:3e3}):l([...a,{subProductId:Math.random().toString(36).substr(2,9),images:[],size:"",color:"",stock:""}])},h=()=>{const e=c.current.scrollLeft,t=c.current.offsetWidth,n=Math.round(e/t);p(n)},b=a.every((e=>e.images.length>0&&""!==e.size&&""!==e.color&&e.stock>0));return o.jsxs("div",{className:"fixed inset-0  bg-white z-50  overflow-y-auto flex flex-col",children:[o.jsxs("div",{className:"relative flex items-center justify-center p-4",children:[o.jsx("button",{className:"absolute left-4 text-black",onClick:()=>s(!1),children:o.jsx(i,{className:"h-6 w-6"})}),o.jsx("h2",{className:"text-lg font-opensans font-semibold",children:"Sub-product"})]}),o.jsx("div",{className:"p-4 flex-grow",children:a.map(((e,n)=>o.jsxs("div",{className:"mb-6 relative",children:[n>0&&o.jsx("button",{className:"absolute top-0 right-0 text-customBrown mb-2 p-2",onClick:()=>(e=>{const t=a.filter(((t,n)=>n!==e));l(t),d.dismiss(),d.success("Sub-product removed successfully",{duration:3e3})})(n),children:o.jsx(E,{className:"h-5 -translate-y-2 w-5"})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("h3",{className:"text-md font-semibold mb-2 font-opensans text-black flex items-center",children:[o.jsx(J,{className:"w-5 h-5 mr-2 text-xl text-black"}),"Upload Image"]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{ref:c,className:"relative w-full h-80 flex overflow-x-scroll snap-x snap-mandatory space-x-4",style:{scrollBehavior:"smooth"},onScroll:h,children:[e.images.length>0?e.images.map(((e,t)=>o.jsxs("div",{className:`relative flex-shrink-0 w-full h-full border-2 border-dashed border-opacity-30  border-customBrown rounded-md snap-center ${t===u?"opacity-100":"opacity-75"} transition-opacity duration-300`,children:[o.jsx("img",{src:e.preview||(e instanceof File?URL.createObjectURL(e):e),alt:`SubProduct ${n} Image ${t+1}`,className:"w-full h-full object-cover rounded-md"}),o.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-customBrown text-white rounded-full p-1",onClick:e=>{e.stopPropagation(),((e,t)=>{const n=[...a];n[e].images.splice(t,1),l(n)})(n,t)},children:o.jsx(E,{className:"h-4 w-4 text-white"})})]},t))):o.jsxs("div",{className:"w-full h-full border-2 border-dashed border-opacity-30  border-customBrown rounded-md flex items-center flex-col justify-center cursor-pointer",onClick:()=>document.getElementById(`imageUpload-${n}`).click(),children:[o.jsx(I,{className:"h-16 w-16 text-customOrange opacity-20"}),o.jsx("h2",{className:"font-opensans px-10 text-center font-light text-xs text-customOrange opacity-90",children:"Upload product image here. Image must not be more than 3MB"})]}),o.jsx("input",{id:`imageUpload-${n}`,type:"file",accept:"image/*",onChange:e=>((e,t)=>{const n=Array.from(t.target.files),s=[...a],r=[];if(n.forEach((e=>{e.size>3145728?(d.dismiss(),d.error(`${e.name} exceeds the maximum file size of 3MB`,{duration:3e3})):r.push(e)})),r.length+s[e].images.length>2)return d.dismiss(),void d.error("You can upload a maximum of 2 images",{duration:3e3});s[e].images=[...s[e].images,...r],l(s)})(n,e),className:"hidden"})]}),e.images.length>1&&o.jsx("div",{className:"flex justify-center mt-2",children:e.images.map(((e,t)=>o.jsx("div",{className:"cursor-pointer mx-0.5 rounded-full transition-all duration-300 "+(t===u?"bg-customOrange h-2.5 w-2.5":"bg-orange-300 h-2 w-2"),onClick:()=>(e=>{p(e);const t=c.current.offsetWidth;c.current.scrollTo({left:t*e,behavior:"smooth"})})(t)},t)))}),o.jsx("div",{className:"flex justify-end mt-2 w-full",children:e.images.length<2&&o.jsxs("button",{onClick:()=>document.getElementById(`imageUpload-${n}`).click(),className:"flex items-center font-semibold justify-end text-customOrange",children:[o.jsx(R,{className:"text-xl"}),o.jsx("span",{className:"ml-1 font-opensans  text-sm",children:"Add Another Image"})]})})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"text-sm font-opensans font-medium text-black mb-1",children:"Size"}),o.jsx(M,{options:t.map((e=>({label:e,value:e}))),value:{label:e.size,value:e.size},onChange:e=>m(n,"size",e.value),className:"w-full",placeholder:"Select Product Size",isSearchable:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans font-medium mb-1 text-sm text-black",children:"Color"}),o.jsx("input",{type:"text",value:e.color,onChange:e=>m(n,"color",e.target.value),className:"w-full h-12 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange",placeholder:""})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans  font-medium mb-1 text-sm text-black",children:"Stock Quantity"}),o.jsx("input",{type:"number",value:e.stock,onChange:e=>m(n,"stock",e.target.value),className:"w-full h-12 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange",placeholder:""})]}),n===a.length-1&&o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{className:"text-customOrange text-sm flex border-customBrown border rounded-full px-4 font-opensans h-12 items-center",onClick:f,children:[o.jsx(R,{className:"text-lg mr-1"}),"Add another"]})})]},n)))}),o.jsx("div",{className:"flex justify-center p-4 ",children:o.jsx("button",{className:"px-4 h-12 w-full text-white rounded-full font-opensans "+(b?"bg-customOrange":"bg-orange-200"),onClick:()=>{n(a),s(!1)},disabled:!b,children:"Proceed"})})]})},ht=[{type:"Books",subTypes:["Fiction","Non-Fiction","Textbooks","Comics","Biographies","Mystery","Science Fiction","Fantasy","Self-Help","Cookbooks"]},{type:"Cameras",subTypes:["DSLR","Polaroid","Mirrorless","Vintage Cameras","Compact Cameras","Point-and-Shoot","Instant Cameras","Action Cameras","Film Cameras","Camcorders","Drone Cameras","360° Cameras","Camera Lenses","Photography Accessories"]},{type:"Electronics",subTypes:["Headphones","Speakers","Smartphones","Laptops","Tablets","Monitors","Wearables","Drones","Smart Home Devices","Chargers & Cables","Photography Accessories"]},{type:"Furniture",subTypes:["Chairs","Tables","Sofas","Beds","Dressers","Desks","Bookcases","Coffee Tables","Ottomans","Recliners","Wardrobes","Nightstands"]},{type:"Makeup & Beauty",subTypes:["Lipstick","Foundation","Mascara","Eyeliner","Blush","Eyeshadow","Concealer","Primer","Setting Powder","Highlighter","Skincare","Perfume"]},{type:"Art & Craft",subTypes:["Paintings","Sculptures","Photography","Prints","Drawings","Digital Art","Mixed Media","Ceramics","Installation Art","Textile Art","Craft Supplies"]},{type:"Home Decor",subTypes:["Wall Art","Rugs","Vases","Candles","Mirrors","Pillows","Curtains","Clocks","Statues","Planters","Throws & Blankets"]},{type:"Glassware",subTypes:["Wine Glasses","Tumblers","Champagne Flutes","Beer Mugs","Shot Glasses","Decanters","Pitchers","Carafes","Vases","Bowls","Jars & Bottles"]},{type:"Kitchen & Dining",subTypes:["Cookware","Bakeware","Utensils","Cutlery","Dinnerware","Glassware","Small Appliances","Mixing Bowls","Storage Containers","Kitchen Gadgets"]},{type:"Tools & DIY",subTypes:["Hand Tools","Power Tools","Gardening Tools","Hardware","Paint & Supplies","Tool Storage","Electrical","Plumbing","Safety Gear","Building Materials"]},{type:"Toys & Games",subTypes:["Action Figures","Board Games","Puzzles","Dolls","Educational Toys","Video Games","LEGO & Building Sets","Outdoor Games","Stuffed Animals","RC Toys"]},{type:"Sports & Outdoors",subTypes:["Fitness Equipment","Bicycles","Camping Gear","Fishing Gear","Golf Clubs","Tennis Equipment","Water Sports","Protective Gear","Hiking Gear"]},{type:"Baby & Kids",subTypes:["Toys","Strollers","Car Seats","Nursery Furniture","Feeding Supplies","Baby Carriers","Diaper Bags","Books for Kids","Learning Games"]},{type:"Health & Personal Care",subTypes:["Vitamins & Supplements","Personal Hygiene","Oral Care","Hair Care","Bath & Body","First Aid","Medical Supplies","Wellness Devices","Massage Tools","Essential Oils"]},{type:"Pet Supplies",subTypes:["Pet Food","Toys & Treats","Beds & Furniture","Collars & Leashes","Grooming","Aquarium Supplies","Bird Cages","Small Animal Habitats","Training Supplies","Health & Wellness"]},{type:"Gift Packages",subTypes:["Room Decoration","Rose Bouquet","Money Bouquets","Money Boxes","Money Tower","Gym Package","Self Care Package","Anniversary Package","Birthday Package","Period Survival Kit Package","Mother's Day Package","Father's Day Package","Reconciliation Package","Just Because I Love You Package","Graduation Package","Valentine’s Day Package","Get Well Soon Package","Housewarming Package","Bridal Shower Package","Baby Shower Package","Friendship Package","Thank You Package","Corporate Gifting Package","Festive Holiday Package"]},{type:"Vintage & Collectibles",subTypes:["Antiques","Memorabilia","Coins & Stamps","Vintage Clothing","Retro Electronics","Collectible Toys","Posters & Ephemera","Records & Vinyl","Art Glass","Local Artifacts"]},{type:"Media & Entertainment",subTypes:["Vinyl Records","CDs","DVDs & Blu-Ray","Books","Magazines","Board Games","Video Games","Sheet Music","Comics","Collectible Cards"]},{type:"Appliances",subTypes:["Refrigerators","Microwaves","Washers & Dryers","Dishwashers","Ovens","Air Conditioners","Vacuum Cleaners","Coffee Makers","Blenders","Toasters"]},{type:"Plants & Gardening",subTypes:["Indoor Plants","Outdoor Plants","Succulents","Planters","Garden Tools","Seeds & Bulbs","Garden Decor","Terrariums","Growing Kits","Compost & Soil"]},{type:"Stationery & Office",subTypes:["Notebooks","Pens & Pencils","Desk Organizers","Calendars & Planners","Art Supplies","Paper","Office Electronics","Filing & Storage","Labels & Stickers","Craft Tools"]}];function bt({runDiscount:e,setRunDiscount:t,discountDetails:n=null,onClearDiscount:s}){var r;let i=null;return n&&((null==(r=n.discountType)?void 0:r.startsWith("inApp"))||"personal-monetary"===n.discountType?i=`${n.percentageCut}% off`:"personal-freebies"===n.discountType&&(i=((e,t=20)=>e.length<=t?e:e.slice(0,t)+"…")(n.freebieText??""))),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-opensans font-medium text-sm text-black",children:"Run a discount on this product?"}),o.jsx("div",{className:`w-11 h-5.5 flex items-center rounded-full cursor-pointer\n        ${e?"bg-customOrange/10":"bg-gray-200"}\n        transition-colors duration-300`,onClick:()=>{e&&s&&s(),t(!e)},children:o.jsx("div",{className:`h-5 w-5 rounded-full shadow-md transform\n          ${e?"bg-customOrange translate-x-6":"bg-white"}\n          transition-transform duration-300`})}),e&&i&&o.jsxs("div",{className:"ml-3 flex items-center space-x-1",children:[o.jsx("span",{className:"font-opensans text-xs px-2 py-0.5 rounded-full "+("personal-freebies"===n.discountType?"bg-customOrange text-white":"bg-green-600 text-white"),children:i}),s&&o.jsx(E,{onClick:()=>s(),className:"w-4 h-4 text-red-600 cursor-pointer",title:"Remove discount"})]})]})}function vt({hasVariations:e,setHasVariations:t,onInfo:n,subProductsCount:s=0,onAddMore:r}){return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(u,{className:"w-5 h-5 text-customBrown cursor-pointer",onClick:n}),o.jsx("span",{className:"font-opensans font-medium text-sm text-black",children:"Add sub-products here"})]}),o.jsx("div",{className:`w-11 h-5 flex items-center rounded-full cursor-pointer\n            ${e?"bg-customOrange/10":"bg-gray-200"}\n            transition-colors duration-300`,onClick:()=>t(!e),children:o.jsx("div",{className:`h-5 w-5 rounded-full shadow-md transform\n              ${e?"bg-customOrange translate-x-6":"bg-white"}\n              transition-transform duration-300`})})]}),e&&s>0&&o.jsxs("div",{className:"flex justify-end items-center mt-4 space-x-2",children:[o.jsxs("span",{className:"bg-customOrange text-white text-xs px-2 py-0.5 rounded-md font-opensans",children:[s," saved"]}),o.jsx("button",{type:"button",onClick:r,className:"p-1 rounded-full bg-customOrange/10 hover:bg-customOrange/20 transition-colors",title:"Add another variation",children:o.jsx(R,{className:"w-4 h-4 text-customOrange"})})]})]})}ot();const yt=({vendorId:t,closeModal:n})=>{const[s,r]=e.useState(""),[i,l]=e.useState(""),[c,u]=e.useState(""),[p,y]=e.useState(null),[x,g]=e.useState([]),[w,S]=e.useState(""),[j,k]=e.useState(""),[G,q]=e.useState(""),[Y,X]=e.useState(""),[Q,te]=e.useState(""),[ne,se]=e.useState([]),[re,oe]=e.useState(null),[ie,le]=e.useState(null),[ce,ue]=e.useState([{color:"",sizes:[{size:"",stock:""}]}]),[de,pe]=e.useState(!1),[me,fe]=e.useState((()=>localStorage.getItem("matildaItemClass")||"fashion")),[he,be]=e.useState([]),[ve,ye]=e.useState(""),[xe,ge]=e.useState([]),[we,Se]=e.useState(0),je=e.useRef(null),[ke,Ne]=e.useState(""),[Pe,Ce]=e.useState([]),[Oe,Te]=e.useState(""),[Ee,Ie]=e.useState(!1),[Re,Me]=e.useState(!1),[De,Ae]=e.useState(!1),[ze,Le]=e.useState(!1),[Be,_e]=e.useState(!1),[Fe,We]=e.useState([]),[Ue,He]=e.useState([]),[Ve,$e]=e.useState([]),[Ge,qe]=e.useState(!1),[Ke,Ye]=e.useState(!1),[Xe,Qe]=e.useState(""),[Je,Ze]=e.useState(""),[et,tt]=e.useState(""),[nt,st]=e.useState(!1),[rt,ot]=e.useState(""),[it,at]=e.useState([]),[lt,ct]=e.useState(!0),[ut,dt]=e.useState(null),[pt,mt]=e.useState(null),[yt,xt]=e.useState(!0),gt=D();a.setAppElement("#root"),e.useEffect((()=>{(async()=>{if(ut){const e=N(h,"vendors",t),n=await P(e);if(n.exists()){const e=n.data();Ne(e.shopName||"Unknown Vendor")}else Ne("Unknown Vendor")}})()}),[ut,t]),e.useEffect((()=>{}),[]),e.useEffect((()=>{ze||$e([])}),[ze]),e.useEffect((()=>{const e=A(),t=z(e,(e=>{e?dt(e):(dt(null),d.error("No user is signed in."))}));return()=>t()}),[]),e.useEffect((()=>{if(re&&ie){const e=re.value.trim(),t=Z[e];let n=[];if(Array.isArray(t))n=t;else if("object"==typeof t&&null!==t){n=t[ie.value.replace(/\s+/g,"")]||[]}if(n&&n.length>0){const e=n.map((e=>({label:e,value:e})));be(e),We(n)}else be([]),We([])}else be([]),We([])}),[re,ie]);e.useEffect((()=>{pt&&(pt.discountType.startsWith("inApp")||"personal-monetary"===pt.discountType)?(u(pt.discountPrice.toString()),st(!0)):st(!1)}),[pt]);const wt=(e=!1)=>{Ye(!1),e&&(qe(!1),mt(null))};e.useEffect((()=>{localStorage.setItem("matildaItemClass",me)}),[me]);e.useEffect((()=>{s&&Y&&re&&ie&&ce.length&&j&&Ot()}),[s,Y,re,ie,ce,pt,j]),null==re||re.subTypes.map((e=>"string"==typeof e?{label:e,value:e}:{label:e.name,value:e.name})),e.useEffect((()=>{ze&&!Be&&_e(!0)}),[ze]);e.useEffect((()=>{(async()=>{try{const e=f(h,"inAppDiscounts"),t=m(e,b("isActive","==",!0)),n=(await v(t)).docs.map((e=>({id:e.id,...e.data()})));at(n)}catch(e){}finally{ct(!1)}})()}),[]);const St=e=>{var t;const n=d.loading("Uploading image(s)...");let s=Array.from(e.target.files||[]);const r=Math.max(0,4-xe.length);if(r<=0)return d.dismiss(n),d.error("You can only upload a maximum of 4 images."),void(e.target.value="");s.length>r&&(d(`Only ${r} more image${r>1?"s":""} allowed. Extra file(s) ignored.`,{icon:"⚠️"}),s=s.slice(0,r));let o=0;for(const a of s)try{if(!(null==(t=a.type)?void 0:t.startsWith("image/"))){d.error(`${a.name} is not a valid image file.`);continue}if(a.size>3145728){d.error(`${a.name} exceeds the maximum file size of 3MB.`);continue}const e=URL.createObjectURL(a);ge((t=>t.length>=4?t:(o+=1,[...t,{file:a,preview:e}])))}catch(i){d.error(`Image upload failed for ${a.name}`)}d.dismiss(n),o>0?d.success(`${o} image${o>1?"s":""} added`):d.error("No images were added."),e.target.value=""},jt=("fashion"===me?ee:ht).map((e=>({label:e.type,value:e.type,subTypes:e.subTypes}))),kt=(e,t,n,s)=>{const r=[...ce];r[e].sizes[t][n]=s,ue(r)},Nt=(e,t)=>{const n=[...ce];n[e].sizes[t].isActive=!0,ue(n)},Pt=(e=!1)=>{_e(!1),e&&Le(!1)},Ct=async(e,n,s)=>{const r=f(h,"vendors",t,"activityNotes"),o={title:e,type:s,timestamp:new Date,note:n};try{await C(r,o)}catch(i){}},Ot=async()=>{Me(!0);try{const e=ce.map((e=>e.color.trim())).filter(Boolean),t=ce.flatMap((e=>e.sizes.map((e=>e.size)))).filter(Boolean),n={name:s.trim(),category:Y,productType:(null==re?void 0:re.value)||"",subType:(null==ie?void 0:ie.value)||"",colours:e,sizes:t,price:parseFloat(c),condition:j,discount:pt??null},{data:r}=await K.post("https://mythrift-blue-frog-1458.fly.dev/api/v1/description",n);l(r.description)}catch(e){d.error("Couldn’t generate description 😕")}finally{Me(!1)}};return o.jsxs("div",{className:"flex flex-col max-h-full  h-full bg-white",children:[o.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto scrollbar-hide px-2 pb-10 space-y-6",children:[De&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:o.jsx(B,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"96",visible:!0})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("h3",{className:"text-md font-semibold mb-2 font-opensans text-black flex items-center",children:[o.jsx(J,{className:"w-5 h-5 mr-2 text-xl font-medium text-black"}),"Upload Image"]}),o.jsx("div",{className:"flex flex-col items-center",children:o.jsxs("div",{ref:je,className:"relative w-full h-80 flex overflow-x-scroll snap-x snap-mandatory space-x-4",style:{scrollBehavior:"smooth"},onScroll:()=>{const e=je.current.scrollLeft,t=je.current.offsetWidth,n=Math.round(e/t);Se(n)},children:[xe.length>0?xe.map(((e,t)=>{const n=e.preview??(e instanceof File?URL.createObjectURL(e):e);return o.jsxs("div",{className:`relative flex-shrink-0 w-full h-full border-2 border-dashed border-customBrown border-opacity-30 rounded-md snap-center ${t===we?"opacity-100":"opacity-65"} transition-opacity duration-300`,children:[o.jsx("img",{src:n,alt:`Product ${t+1}`,className:"w-full h-full object-cover rounded-md"}),o.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-customBrown text-white rounded-full p-1",onClick:e=>{e.stopPropagation(),(e=>{const t=xe.filter(((t,n)=>n!==e));ge(t),e===we&&t.length>0&&Se(0)})(t)},children:o.jsx(E,{className:"h-4 w-4 text-white"})})]},t)})):o.jsxs("div",{className:"w-full h-full border-opacity-30 border-2 border-dashed border-customBrown rounded-md flex items-center flex-col justify-center cursor-pointer",onClick:()=>document.getElementById("coverFileInput").click(),children:[o.jsx(I,{className:"h-16 w-16 text-customOrange opacity-20"}),o.jsx("h2",{className:"font-opensans px-10 text-center font-light text-xs text-customOrange opacity-90",children:"Upload product image here. Image must not be more than 3MB"})]}),o.jsx("input",{id:"coverFileInput",type:"file",accept:"image/*",onChange:St,multiple:!0,className:"hidden"})]})}),xe.length>1&&o.jsx("div",{className:"flex justify-center mt-2",children:xe.map(((e,t)=>o.jsx("div",{className:"cursor-pointer mx-0.5 rounded-full transition-all duration-300 "+(t===we?"bg-customOrange h-2.5 w-2.5":"bg-orange-300 h-2 w-2"),onClick:()=>(e=>{Se(e);const t=je.current.offsetWidth;je.current.scrollTo({left:t*e,behavior:"smooth"})})(t)},t)))}),o.jsxs("div",{className:"flex justify-end mt-2",children:[xe.length<4&&o.jsxs("button",{onClick:()=>document.getElementById("imageUpload").click(),className:"flex items-center font-semibold text-customOrange",children:[o.jsx(R,{className:"text-xl"}),o.jsx("span",{className:"ml-1 font-opensans text-sm",children:"Add Another Image"})]}),o.jsx("input",{id:"imageUpload",type:"file",accept:"image/*",multiple:!0,onChange:St,className:"hidden"})]})]}),o.jsx("div",{className:"w-full max-w-md mx-auto flex justify-between items-center\r\n                rounded-full bg-gray-200 px-1 py-1 mb-6",children:["fashion","everyday"].map((e=>{const t=me===e;return o.jsx("button",{onClick:()=>{fe(e),"everyday"===e&&Le(!1),oe(null),le(null)},className:["w-1/2 py-2 rounded-full text-xs  font-opensans font-semibold","transition-all duration-200",t?"bg-white text-customOrange":"text-gray-800"].join(" "),children:"fashion"===e?"Fashion / Wardrobe":"Lifestyle Items"},e)}))}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans font-medium mb-1 text-sm text-black",children:"Product Name"}),o.jsx("input",{type:"text",value:s,onChange:e=>r(e.target.value),className:"w-full h-12 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange",required:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans font-medium mb-1 text-sm text-black",children:"Product Category"}),o.jsxs("select",{value:Y,onChange:e=>{X(e.target.value)},className:"w-full h-12 px-4 pr-10 border border-gray-300 rounded-lg bg-white text-black font-opensans text-left appearance-none focus:outline-none focus:ring-2 focus:ring-customOrange",style:{backgroundImage:"url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22%23666666%22 viewBox=%220 0 20 20%22><path d=%22M5.516 7.548l4.486 4.486 4.485-4.486a.75.75 0 01 1.06 1.06l-5.015 5.015a.75.75 0 01-1.06 0l-5.015-5.015a.75.75 0 01-1.06-1.06z%22 /></svg>')",backgroundPosition:"right 1rem center",backgroundRepeat:"no-repeat",backgroundSize:"1rem"},required:!0,children:[o.jsx("option",{value:"",children:"Select Category"}),o.jsx("option",{value:"Mens",children:"Men"}),o.jsx("option",{value:"Womens",children:"Women"}),o.jsx("option",{value:"Kids",children:"Kids"}),o.jsx("option",{value:"all",children:"All"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans font-medium mb-1 text-sm text-black ",children:"Product Type"}),o.jsx(M,{options:jt,value:re,onChange:e=>{oe(e),le(null)},className:"w-full font-opensans text-sm",classNamePrefix:"custom-select",placeholder:"Select Product Type",isSearchable:!0,styles:{control:e=>({...e,height:"3rem",borderColor:"#D1D5DB",borderRadius:"0.5rem",fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"black",paddingLeft:"0.75rem"}),input:e=>({...e,fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"black"}),placeholder:e=>({...e,fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"#6B7280"})}})]}),re&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans mb-1 text-sm text-black block",children:"Sub Type"}),o.jsx(M,{options:null==re?void 0:re.subTypes.map((e=>"string"==typeof e?{label:e,value:e}:{label:e.name,value:e.name})),value:ie,onChange:le,className:"w-full font-opensans text-sm ",classNamePrefix:"custom-select",placeholder:"Select Sub Type",isSearchable:!0,styles:{control:e=>({...e,height:"3rem",borderColor:"#D1D5DB",borderRadius:"0.5rem",fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"black",paddingLeft:"0.75rem"}),input:e=>({...e,fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"black"}),placeholder:e=>({...e,fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"#6B7280"})}})]}),"fashion"===me&&o.jsxs("div",{className:"mb-4",children:[ce.map(((e,t)=>o.jsxs("div",{className:"mb-4 relative",children:[o.jsx("label",{className:"block text-black mb-1 font-opensans text-sm",children:"Color"}),o.jsx("input",{type:"text",value:e.color,placeholder:" One color per variant",onChange:e=>((e,t)=>{const n=[...ce];n[e].color=t,ue(n)})(t,e.target.value),className:"w-full h-12 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange",required:!0}),e.sizes.map(((n,s)=>{const r=e.sizes.filter(((e,t)=>t!==s)).map((e=>e.size)),i=he.filter((e=>!r.includes(e.value)));return o.jsxs("div",{className:"relative mt-2",children:[s>0&&o.jsx("button",{type:"button",onClick:()=>((e,t)=>{const n=[...ce];n[e].sizes=n[e].sizes.filter(((e,n)=>n!==t)),ue(n)})(t,s),className:"absolute top-0 right-0 text-customBrown",children:o.jsx(E,{})}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs("div",{className:"flex-1 mt-2",children:[o.jsx("label",{className:"block text-black mb-1 font-opensans text-sm",children:"Size"}),o.jsx(M,{options:i,value:{label:n.size,value:n.size},onChange:n=>{kt(t,s,"size",n.value),s===e.sizes.length-1&&""!==n.value&&(e=>{const t=[...ce];t[e].sizes.push({size:"",stock:"",isActive:!1}),ue(t)})(t)},onFocus:()=>Nt(t,s),placeholder:"Select Size",isSearchable:!0,className:"w-full",classNamePrefix:"custom-select",styles:{control:e=>({...e,height:"3rem",borderColor:"#D1D5DB",borderRadius:"0.5rem",fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"black",paddingLeft:"0.75rem"}),input:e=>({...e,fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"black"}),placeholder:e=>({...e,fontFamily:"Open Sans, sans-serif",fontSize:"1rem",color:"#6B7280"})}})]}),o.jsxs("div",{className:"flex-1 mt-2",children:[o.jsx("label",{className:"block text-black mb-1 font-opensans text-sm",children:"Stock Quantity"}),o.jsx("input",{type:"number",value:n.stock,onChange:e=>{const n=e.target.value;kt(t,s,"stock",n)},onBlur:e=>{parseInt(e.target.value,10)<=0&&(d.error("Stock quantity must be greater than 0."),kt(t,s,"stock",""))},className:"w-full h-12 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange "+(n.isActive?"":"bg-gray-200 cursor-pointer"),required:!0,onFocus:()=>Nt(t,s)})]})]})]},s)})),t>0&&o.jsx("button",{type:"button",onClick:()=>(e=>{ue(ce.filter(((t,n)=>n!==e)))})(t),className:"absolute top-2 -translate-y-2 right-2 text-customBrown",children:o.jsx(E,{})})]},t))),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsxs("button",{type:"button",onClick:()=>{ue([...ce,{color:"",sizes:[{size:"",stock:"",isActive:!0}]}])},className:"text-customOrange font-opensans text-sm flex items-center",children:[o.jsx(R,{className:"text-lg mr-1"}),"Add Another Option"]})})]}),pt?o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg my-2 bg-gray-50 border border-customRichBrown",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-opensans text-sm text-customRichBrown font-semibold",children:pt.discountType.startsWith("inApp")?"In‑App Discount":"Personal Discount"}),o.jsx("span",{className:"ml-20 font-opensans text-xs px-1 text-center py-1 rounded-md font-semibold "+(pt.discountType.startsWith("inApp")||"personal-monetary"===pt.discountType?"bg-green-600 text-white":"bg-customOrange text-white"),children:pt.discountType.startsWith("inApp")||"personal-monetary"===pt.discountType?`${pt.percentageCut}% Off`:"personal-freebies"===pt.discountType?((e,t=20)=>e.length<=t?e:e.substring(0,t)+"...")(pt.freebieText):""})]}),o.jsx("button",{onClick:()=>{mt(null),qe(!1)},title:"Remove Discount",children:o.jsx(E,{className:"text-red-600 text-lg"})})]}):o.jsx("div",{className:"mb-4",children:o.jsx(bt,{runDiscount:Ge,setRunDiscount:e=>{qe(e),e?Ye(!0):(mt(null),Ye(!1))},discountDetails:pt,onClearDiscount:()=>{qe(!1),mt(null),Ye(!1),st(!1),u("")}})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans font-medium mb-1 text-sm text-black",children:"Product Price"}),o.jsx("input",{type:"text",value:c,onChange:e=>{let t=e.target.value;const n=(t.replace(/\D/g,"")/100).toFixed(2);u(n)},disabled:nt,className:"w-full h-12 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange",required:!0}),parseFloat(c)<300&&""!==c&&o.jsx("p",{className:"text-red-500 font-ubuntu text-xs mt-1",children:"Minimum product price is 300 naira."})]}),"everyday"===me&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans text-sm text-black",children:"Stock Quantity"}),o.jsx("input",{type:"number",min:1,value:w,onChange:e=>S(e.target.value),className:"w-full h-12 p-3 border-2 rounded-lg focus:border-customOrange",required:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans mb-1 font-medium text-sm text-black",children:"Product Condition"}),o.jsxs("select",{value:j,onChange:e=>k(e.target.value),className:"w-full h-12 px-4 pr-10 border border-gray-300 rounded-lg bg-white text-black font-opensans text-left appearance-none focus:outline-none focus:ring-2 focus:ring-customOrange",style:{backgroundImage:"url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22%23666666%22 viewBox=%220 0 20 20%22><path d=%22M5.516 7.548l4.486 4.486 4.485-4.486a.75.75 0 01 1.06 1.06l-5.015 5.015a.75.75 0 01-1.06 0l-5.015-5.015a.75.75 0 01-1.06-1.06z%22 /></svg>')",backgroundPosition:"right 1rem center",backgroundRepeat:"no-repeat",backgroundSize:"1rem"},required:!0,children:[o.jsx("option",{value:"",children:"Select Condition"}),o.jsx("option",{value:"brand new",children:"Brand New"}),o.jsx("option",{value:"thrift",children:"Thrift"}),o.jsx("option",{value:"Defect:",children:"Defect"})]}),"Defect:"===j&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block font-medium text-black text-sm font-opensans",children:"Defect Description"}),o.jsx("input",{type:"text",value:G,onChange:e=>q(e.target.value),className:"w-full h-10 px-4 pr-10 border border-gray-300 rounded-lg bg-white text-black font-opensans text-left appearance-none focus:outline-none focus:ring-2 focus:ring-customOrange",required:!0})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"mb-1 text-black font-medium font-opensans text-sm",children:"Product Description"}),o.jsxs("div",{className:"relative "+(Re?"breathing-gradient thinking-border":""),children:[o.jsx("textarea",{value:i,onChange:e=>{e.target.value.length<=700&&l(e.target.value)},className:"mt-1 block w-full px-4 py-2 border-2 text-sm rounded-lg focus:outline-none focus:border-customOrange font-opensans hover:border-customOrange h-24 resize-none"}),o.jsxs("div",{className:"absolute bottom-2 right-2 font-opensans text-gray-500 text-xs",children:[i.length,"/700"]}),Re&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/60 backdrop-blur-sm rounded-lg z-20",children:o.jsxs("p",{className:"text-customOrange font-ubuntu text-sm animate-pulse text-center px-4",children:["Matilda is thinking…",o.jsx("br",{}),"getting the right words for you…"]})})]}),o.jsx("div",{className:"flex justify-end mt-2",children:o.jsx("button",{type:"button",onClick:Ot,className:"px-2 py-2 bg-customOrange text-white rounded-md shadow-sm hover:bg-orange-700 focus:ring focus:ring-orange-600 focus:outline-none flex items-center",disabled:Re,children:Re?o.jsx(B,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"24",visible:!0}):o.jsx(_,{})})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-opensans mb-1 text-sm font-medium text-black",children:"Tags"}),o.jsx("div",{className:"relative overflow-x-auto whitespace-nowrap mb-2 flex space-x-4 no-scrollbar",style:{maxWidth:"100%"},children:["Discounts","New Arrival","Cargos","Trending","Limited Edition","Jeans","Tees","Nike","Adidas","Sports"].map(((e,t)=>o.jsx("span",{onClick:()=>Ce((t=>[...t,e])),className:"bg-transparent animate-pulse border border-customOrange font-medium text-customBrown px-4 font-opensans py-1 text-xs rounded-full cursor-pointer hover:bg-orange-600 transition-all whitespace-nowrap",children:e},t)))}),o.jsxs("div",{className:"flex flex-wrap items-center border-2 border-gray-300 rounded-lg p-2",children:[Pe.map(((e,t)=>o.jsx("div",{className:"bg-gray-100 text-xs text-black font-opensans rounded-lg px-2 py-1 mr-2 mb-2",children:e},t))),o.jsx("input",{type:"text",value:Oe,onChange:e=>{const t=e.target.value;if(t.includes(",")){const e=t.replace(",","").trim();e&&!Pe.includes(e)&&Ce([...Pe,e]),Te("")}else Te(t)},onKeyDown:e=>{"Backspace"===e.key&&!Oe&&Pe.length>0&&(e.preventDefault(),Ce(Pe.slice(0,-1)))},placeholder:"Type tag and press comma",className:"flex-grow outline-none border-none font-opensans text-sm text-black"})]})]}),"fashion"===me&&o.jsx("div",{className:"mb-4",children:o.jsx(vt,{hasVariations:ze,setHasVariations:e=>{Le(e),e?_e(!0):(_e(!1),$e([]))},onInfo:()=>{pe(!0)},subProductsCount:Ve.length,onClearVariations:()=>{$e([]),Le(!1)},onAddMore:()=>_e(!0)})}),o.jsx(ae,{isOpen:Ke,onRequestClose:e=>wt(e),handleSaveDiscount:e=>{mt(e),qe(!0),(e.discountType.startsWith("inApp")||"personal-monetary"===e.discountType)&&(u(e.discountPrice.toString()),st(!0)),wt(!1)}}),Be&&L.createPortal(o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center modals",children:o.jsx("div",{className:"bg-white p-4 rounded-lg overflow-y-auto w-96 modals",children:o.jsx(ft,{availableSizes:Fe,addSubProduct:e=>{$e(e),Le(!0),Pt()},closeModal:e=>Pt(e),initialSubProducts:Ve})})}),document.body)]}),o.jsx("button",{type:"button",onClick:async()=>{if(ut&&ut.uid===t)if(s&&c&&0!==xe.length&&j&&Y&&re&&i)if("fashion"!==me||0!==ce.length){if("Defect:"===j&&!G)return d.dismiss(),void d.error("Please provide a defect description for the defective product.");if("everyday"!==me||w&&!(Number(w)<=0)){if("fashion"===me)for(const[e,t]of ce.entries()){if(!t.color)return void d.error(`Please enter a color for variant ${e+1}.`);if(0===t.sizes.length)return void d.error(`Please add at least one size for variant ${e+1}.`);for(const[n,s]of t.sizes.entries())if(!s.size||!s.stock)return void d.error(`Please enter size and stock for variant ${e+1}, size ${n+1}.`)}if("fashion"===me&&ze){if(0===Ve.length)return void d.error("Please add at least one sub-product.");for(const[e,t]of Ve.entries())if(0===t.images.length||!t.size||!t.color||!t.stock)return void d.error(`Please complete all fields for sub-product ${e+1}.`)}Ie(!0);try{const e=[];for(const n of xe){const r=n.file||n;if(!r||!r.name){d.error("One of the images is missing a filename.");continue}const o=W(gt,`${t}/products/${s}/${r.name}`);await U(o,r);const i=await H(o);e.push(i)}const o="fashion"===me,a=e[0];let p=0,y=[],x=[];if(o){if(y=ce.flatMap((e=>{const t=e.color.trim();return e.sizes.map((e=>{const n=Number(e.stock||0);return p+=n,{color:t,size:e.size,stock:n}}))})),ze)for(const n of Ve){const e=[];for(const o of n.images){const r=W(gt,`${t}/products/${s}/subProducts/${n.color}_${n.size}/${o.name}`);await U(r,o),e.push(await H(r))}const r=Number(n.stock||0);p+=r,x.push({subProductId:n.subProductId,color:n.color.trim(),size:n.size,stock:r,images:e})}}else p=Number(w);const g=N(h,"vendors",t),S=await P(g);if(!S.exists())return d.error("Vendor data not found."),void Ie(!1);const E=S.data(),I=E.coverImageUrl||"",R=o?p:Number(w),M={name:s.trim(),description:i.trim(),price:parseFloat(c),coverImageUrl:a,imageUrls:e,isFeatured:!1,vendorId:ut.uid,vendorName:E.shopName,isFashion:o,stockQuantity:R,condition:j,category:Y,productType:re.value,subType:ie.value,createdAt:new Date,tags:Pe,...o&&{variants:y},...o&&ze&&x.length&&{subProducts:x},published:!0,isDeleted:!1,editCount:0};pt&&(M.discount=pt),"Defect:"===j&&G&&(M.defectDescription=G.trim());const D=f(h,"products"),A=N(D);if(await V(A,M),await O(g,{productIds:$(A.id)}),pt){const e=f(h,"discounts"),n=N(e),s={vendorId:t,type:pt.discountType.startsWith("inApp")?"inApp":"personal",...pt.discountType.startsWith("personal")?{discountSubType:"personal-monetary"===pt.discountType?"monetary":"freebies"}:{},isActive:!0,createdAt:T(),..."personal-freebies"!==pt.discountType&&pt.initialPrice?{initialPrice:pt.initialPrice,discountPrice:pt.discountPrice,percentageCut:pt.percentageCut,subtractiveValue:pt.subtractiveValue}:{},..."personal-freebies"===pt.discountType?{freebieText:pt.freebieText}:{},...pt.selectedDiscount?{selectedDiscountId:pt.selectedDiscount.id,selectedDiscountName:pt.selectedDiscount.name}:{}};await V(n,s),await O(g,{discountIds:$(n.id)}),await O(A,{discountId:n.id})}pt&&await Ct("Added New Product 📦",`You've added ${s} to your store! You can now view and feature it in your store products section.`,"Product Update"),await Ct("Added New Product 📦",`You've added ${s} to your store! You can now view and feature it in your store products section.`,"Product Update"),await(async(e,t)=>{try{const n=N(h,"vendors",e),s=await P(n);if(!s.exists())return;const r=s.data(),o=r.coverImageUrl||"",i=f(h,"follows"),a=m(i,b("vendorId","==",e)),l=(await v(a)).docs.map((async n=>{const s=n.data().userId;await C(f(h,"notifications"),{userId:s,message:`New product added by ${r.shopName}: ${t.name}`,productLink:`/product/${t.id}`,productId:t.id,productImage:t.coverImageUrl||"",vendorName:r.shopName,vendorCoverImage:o,createdAt:new Date,seen:!1,type:"vendor"});const i=await P(N(h,"users",s)),a=i.exists()?i.data():null;if(!a||!a.email)return;const l=a.email,c=a.displayName||"there",u={id:t.id,name:t.name,image:t.coverImageUrl||"",price:t.price,link:`https://www.shopmythrift.store/product/${t.id}?shared=true`,createdAt:new Date},d=m(f(h,"pendingProductEmails"),b("userId","==",s),b("vendorId","==",e)),p=await v(d);if(p.empty)await C(f(h,"pendingProductEmails"),{userId:s,userEmail:l,userName:c,vendorId:e,vendorName:r.shopName,vendorCoverImage:o,products:[u],createdAt:T()});else{const e=p.docs[0].ref,t=p.docs[0].data(),n=t.products?[...t.products,u]:[u];await O(e,{products:n})}}));await Promise.all(l)}catch(n){}})(t,{name:s,shopName:E.shopName,id:A.id,price:parseFloat(c),vendorCoverImage:I,coverImageUrl:a}),d.success("Product added successfully"),r(""),l(""),u(""),ge([]),k(""),q(""),X(""),oe(null),le(null),ue([{color:"",sizes:[{size:"",stock:"",isActive:!0}]}]),Ce([]),Le(!1),$e([]),mt(null),qe(!1),n()}catch(e){d.error("Error adding product: "+e.message)}finally{Ie(!1)}}else d.error("Please enter a stock quantity")}else d.error("Please add at least one product variant.");else d.error("Please fill in all required fields!");else d.error("Unauthorized access or no user is signed in.")},className:"w-full h-12 font-opensans text-lg rounded-full\n          flex items-center justify-center focus:outline-none focus:ring\n          "+(Ee||parseFloat(c)<300?"bg-gray-400 text-gray-200 cursor-not-allowed":pt?"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500":"bg-customOrange text-white hover:bg-customOrange focus:ring-customOrange"),disabled:Ee||parseFloat(c)<300,children:Ee?o.jsx(B,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"24",visible:!0}):o.jsxs(o.Fragment,{children:["Publish Product",pt&&o.jsx(F,{className:"ml-2 text-lg"})]})})]})};export{yt as A,ie as M,ht as e,ot as i};
