import{c as e,a as t,q as s,w as a,g as r,r as n,ay as l,h as i,az as o,j as c,S as d,aA as u,$ as m,aB as x,aC as f,ah as h,ai as p,aj as g,ak as y,I as w,a2 as j,al as b,am as v,af as N,M as S,aD as k,b as C,l as P,_ as E,aq as A,ar as T,at as L,au as U,av as O,aE as q,d as I,y as R,ab as M,aw as D}from"./index-CvIXhaMv.js";import{C as V,R as B,F as G,a as W}from"./reactstrap.modern-BbKta6iB.js";import{T as $}from"./react-DNBAOpZC.js";import{S as z}from"./SignUpAnimation-DYiMXoTV.js";import"./index-6PUMxdSt.js";import"./index-BVVzb-MI.js";import"./index-BaqZIR9i.js";import"./Transition-DlEawdUv.js";import"./inheritsLoose-BMl3PfwL.js";const F=async n=>{const l=e(t,"vendors"),i=s(l,a("email","==",n));return!(await r(i)).empty},Z=()=>{const[Z,_]=n.useState(""),[Y,H]=n.useState(""),[J,K]=n.useState(""),[Q,X]=n.useState(""),[ee,te]=n.useState(!1),[se,ae]=n.useState(!1),[re,ne]=n.useState(!1),[le,ie]=n.useState(!1),[oe,ce]=n.useState(!1),[de,ue]=n.useState(!1),[me,xe]=n.useState(!1),{currentUser:fe}=l(),he=i(),[pe,ge]=n.useState(!1),ye=()=>{ge(!1),_(""),H(""),K(""),X(""),he("/login")};n.useEffect((()=>{const e=o(P,(e=>{e&&he("/newhome")}));return()=>e()}),[he]),n.useEffect((()=>{(async()=>{if(Z.trim().length>=2){ie(!0);const n=we(Z),l=s(e(t,"users"),a("username","==",n));(await r(l)).empty?(ce(!1),ue(!0)):(ce(!0),ue(!1)),ie(!1)}else ce(!1),ue(!1)})()}),[Z]),n.useEffect((()=>{const e=()=>{document.body.classList.add("scroll-lock")},t=()=>{document.body.classList.remove("scroll-lock")},s=document.querySelectorAll("input");return s.forEach((s=>{s.addEventListener("focus",e),s.addEventListener("blur",t)})),()=>{s.forEach((s=>{s.removeEventListener("focus",e),s.removeEventListener("blur",t)}))}}),[]),n.useEffect((()=>{const e=o(P,(e=>{e&&he("/newhome")}));return()=>e()}),[he]);const we=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return c.jsxs(c.Fragment,{children:[c.jsx(d,{title:"Signup - My Thrift",description:"Get started with an amazing shopping experience on My Thrift!",url:"https://www.shopmythrift.store/signup"}),c.jsx(V,{children:c.jsx(B,{children:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex items-center mb-4",children:c.jsxs("div",{className:"flex flex-col items-center flex-grow transform text-customOrange -translate-y-2 font-opensans",children:[c.jsx(z,{}),c.jsx($,{options:{strings:["Welcome to My Thrift","The Real Market Place!"],autoStart:!0,loop:!0}})]})}),c.jsxs("div",{className:"font-opensans",children:[c.jsxs("div",{className:"px-4",children:[c.jsx("h1",{className:"text-3xl font-extrabold font-lato text-black mb-1",children:"Create an account"}),c.jsx("p",{className:"text-gray-400 mb-1 text-sm font-lato",children:"Don't stress we have the best thrifted items for you"})]}),c.jsxs(G,{className:"mt-4 px-4 flex flex-col ",onSubmit:async e=>{if(e.preventDefault(),Z&&Y&&J&&Q)if(Z.length<2)E.error("Username must be at least 2 characters long.");else if((e=>{const t=/[A-Z]/.test(e),s=/[!@#$%^&*(),.?":{}|<>]/.test(e),a=/[0-9]/.test(e),r=e.length>=8&&e.length<=24;return t&&s&&a&&r})(J))if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y))if(J===Q)if(oe)E.error("Username is already taken. Please choose another one.");else{ne(!0);try{const e=A(T,"userSignup"),t=await e({username:we(Z),email:Y,password:J});t.data.success&&ge(!0)}catch(t){let e="Cannot sign up at the moment. Please try again.";"already-exists"===t.code?e="This email is already in use. Please use a different email.":"invalid-argument"===t.code?e="Missing required fields.":"unknown"===t.code&&(e=t.message||e),E.error(e)}finally{ne(!1)}}else E.error("Passwords do not match. Please try again.");else E.error("Invalid email format. Please enter a valid email.");else E.error("Password must be at least 8 characters, include uppercase, special char, numeric.");else E.error("All fields are required. Please fill in all fields.")},children:[c.jsxs(W,{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:c.jsx(u,{className:"text-gray-500 text-xl"})}),c.jsx("input",{required:!0,type:"text",placeholder:"Username",value:Z,className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-base focus:outline-none focus:ring-2 focus:ring-customOrange "+(oe?"border-2 border-red-500":de?"border-2 border-green-500":""),onChange:e=>_(we(e.target.value))}),le&&c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:c.jsx(m,{height:24,width:24,color:"#4fa94d",ariaLabel:"oval-loading",secondaryColor:"#4fa94d",strokeWidth:2,strokeWidthSecondary:2})}),!le&&de&&c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:c.jsx(x,{className:"text-green-500 rounded-full p-1",size:24})})]}),oe&&c.jsxs("div",{className:"text-red-500 ratings-text -translate-y-3 flex items-center",children:[c.jsx(f,{className:"mr-1"}),"Username is already taken. Please choose another one."]}),c.jsxs(W,{className:"relative mb-2",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:c.jsx(h,{className:"text-gray-500 text-xl"})}),c.jsx("input",{required:!0,type:"email",placeholder:"Enter your email",value:Y,className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-base focus:outline-none focus:ring-2 focus:ring-customOrange",onChange:e=>H(e.target.value)})]}),c.jsxs(W,{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:c.jsx(p,{className:"text-gray-500 text-xl"})}),c.jsx("input",{required:!0,type:ee?"text":"password",className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-base focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"Enter password",value:J,onFocus:()=>xe(!0),onBlur:()=>xe(!1),onChange:e=>K(e.target.value)}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>te(!ee),children:ee?c.jsx(g,{className:"text-gray-500 text-xl"}):c.jsx(y,{className:"text-gray-500 text-xl"})})]}),me&&c.jsxs("ul",{className:"text-xs text-gray-600 mt-2",children:[c.jsxs("li",{className:""+(/[A-Z]/.test(J)?"text-green-500":"text-red-500"),children:[/[A-Z]/.test(J)?"✔":"✘"," At least one uppercase letter"]}),c.jsxs("li",{className:""+(/[0-9]/.test(J)?"text-green-500":"text-red-500"),children:[/[0-9]/.test(J)?"✔":"✘"," At least one numeric character"]}),c.jsxs("li",{className:""+(/[!@#$%^&*(),.?":{}|<>]/.test(J)?"text-green-500":"text-red-500"),children:[/[!@#$%^&*(),.?":{}|<>]/.test(J)?"✔":"✘"," At least one special character"]}),c.jsxs("li",{className:""+(J.length>=8?"text-green-500":"text-red-500"),children:[J.length>=8?"✔":"✘"," Minimum length of 8 characters"]})]}),c.jsxs(W,{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:c.jsx(p,{className:"text-gray-500 text-xl"})}),c.jsx("input",{required:!0,type:se?"text":"password",className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-base focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"Re-type password",value:Q,onChange:e=>X(e.target.value)}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>ae(!se),children:se?c.jsx(g,{className:"text-gray-500 text-xl"}):c.jsx(y,{className:"text-gray-500 text-xl"})})]}),c.jsxs("div",{className:"text-gray-600  font-opensans text-xs mt-2 -mx-1 leading-relaxed",children:["By signing up you agree to our"," ",c.jsx("span",{onClick:()=>window.open("/terms-and-conditions","_blank","noopener,noreferrer"),className:"text-customOrange font-medium hover:underline cursor-pointer mr-1",children:"Terms & Conditions"}),"and",c.jsx("span",{onClick:()=>window.open("/privacy-policy","_blank","noopener,noreferrer"),className:"text-customOrange font-medium hover:underline cursor-pointer ml-1",children:"Privacy Policy"}),"."]}),c.jsx(w.button,{type:"submit",className:"glow-button w-full h-12 mt-4 bg-customOrange text-white font-medium rounded-full flex justify-center font-opensans items-center",disabled:re,children:re?c.jsx(j,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):"Sign Up"}),c.jsxs("div",{className:"flex items-center justify-center mt-2 mb-2",children:[c.jsx("div",{className:"flex-grow border-t border-gray-300"}),c.jsx("span",{className:"mx-4 text-sm text-gray-500",children:"OR"}),c.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),c.jsxs(w.button,{type:"button",className:"w-full h-12 mt-2 bg-white border-2 border-gray-300 text-black font-medium rounded-full flex justify-center items-center",onClick:async()=>{var n;const l=new L;try{ne(!0);const i=await U(P,l),o=i.user,c=O(i),d=!!(null==c?void 0:c.isNewUser),u=(o.email||"").toLowerCase().trim();if(await F(u)){try{d&&await o.delete()}catch{}try{await q(P)}catch{}return E.error("This email is already used for a Vendor account!"),void ne(!1)}const m=e(t,"users"),x=await r(s(m,a("emailLower","==",u)));if(!x.empty&&"vendor"===(null==(n=x.docs[0].data())?void 0:n.role)){try{d&&await o.delete()}catch{}try{await q(P)}catch{}return E.error("This email is already used for a Vendor account!"),void ne(!1)}const f=I(t,"users",o.uid),h=await R(f),p={uid:o.uid,username:o.displayName||"",email:o.email,emailLower:u,role:"user",referrer:localStorage.getItem("referrer")||null,walletSetup:!1,profileComplete:!1,welcomeEmailSent:!1,notificationAllowed:!1,createdAt:new Date};h.exists()||await M(f,p),E.success("Signed up with Google successfully!"),he("/newhome")}catch(i){let e="Google Sign-Up failed. Please try again.";"auth/account-exists-with-different-credential"===i.code?e="An account with the same email already exists. Please use your original sign-in method.":"auth/popup-closed-by-user"===i.code&&(e="Popup closed before completing sign-up."),E.error(e)}finally{ne(!1)}},children:[c.jsx(b,{className:"mr-2  text-2xl"}),"Sign up with Google"]}),c.jsxs(w.button,{type:"button",className:"w-full h-12 mt-2 bg-white border-2 border-gray-300 text-black font-medium rounded-full flex justify-center items-center",onClick:async()=>{var n;const l=new D;try{ne(!0);const i=await U(P,l),o=i.user,c=O(i),d=!!(null==c?void 0:c.isNewUser),u=(o.email||"").toLowerCase().trim();if(!u){try{d&&await o.delete()}catch{}try{await q(P)}catch{}return E.error("We couldn’t get your email from Twitter. Please use Google or Email."),void ne(!1)}if(await F(u)){try{d&&await o.delete()}catch{}try{await q(P)}catch{}return E.error("This email is already used for a Vendor account!"),void ne(!1)}const m=e(t,"users"),x=await r(s(m,a("emailLower","==",u)));if(!x.empty&&"vendor"===(null==(n=x.docs[0].data())?void 0:n.role)){try{d&&await o.delete()}catch{}try{await q(P)}catch{}return E.error("This email is already used for a Vendor account!"),void ne(!1)}const f=I(t,"users",o.uid),h=await R(f),p={uid:o.uid,username:o.displayName||"",email:o.email,emailLower:u,role:"user",referrer:localStorage.getItem("referrer")||null,walletSetup:!1,profileComplete:!1,welcomeEmailSent:!1,notificationAllowed:!1,createdAt:new Date};h.exists()||await M(f,p),E.success("Signed up with Twitter successfully!"),he("/newhome")}catch(i){let e="Twitter Sign-Up failed. Please try again.";"auth/account-exists-with-different-credential"===(null==i?void 0:i.code)?e="This email is already registered with a different method. Please use your original sign-in method.":"auth/popup-closed-by-user"===(null==i?void 0:i.code)&&(e="Popup closed before completing sign-up."),E.error(e)}finally{ne(!1)}},children:[c.jsx(v,{className:"mr-2 text-xl"}),"Sign up with Twitter"]}),c.jsx("div",{className:"text-center text-sm font-normal font-lato mt-2 pb-4 flex justify-center",children:c.jsxs("p",{className:"text-gray-700 text-sm",children:["Already have an account?"," ",c.jsx("span",{className:"text-customOrange text-sm",children:c.jsx(N,{to:"/login",children:"Sign In"})})]})})]})]})]})})}),c.jsx(S,{isOpen:pe,onRequestClose:ye,contentLabel:"Email Verification",style:{content:{position:"absolute",bottom:"0",left:"0",right:"0",top:"auto",borderRadius:"20px 20px 0 0",padding:"20px",backgroundColor:"#ffffff",border:"none",height:"35%",animation:"slide-up 0.3s ease-in-out"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:3e3}},children:c.jsxs("div",{className:"flex flex-col items-center py-2 font-opensans",children:[c.jsxs("div",{className:"flex items-center justify-between w-full mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-rose-100 flex justify-center items-center rounded-full",children:c.jsx(k,{className:"text-customRichBrown text-lg"})}),c.jsx("h2",{className:"font-opensans text-lg font-semibold text-customRichBrown",children:"Verify Your Email"})]}),c.jsx(C,{className:"text-black text-2xl cursor-pointer",onClick:ye})]}),c.jsxs("p",{className:"font-opensans mt-1 text-base text-black text-center font-medium leading-6",children:["Email sent successfully! Please check your inbox for the verification link.",c.jsx("br",{}),c.jsx("span",{className:"font-light text-xs font-opensans",children:"P.S. If you didn’t receive it, please check your spam or junk folder."})]})]})})]})};export{Z as default};
