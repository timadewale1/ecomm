import{b as e,u as t,c as s,r,at as o,j as n,G as i,au as c}from"./index-B6_tP4YQ.js";import{P as a}from"./ProductCard-CTMPZt-i.js";import{S as l}from"./SEO-CG8nsGhn.js";import{b as d}from"./index-Czi2OGzl.js";import{u as m}from"./useDispatch-DS0xcVHe.js";import"./index-BzTvhx-M.js";import"./userWriteHandler-DCDkCU98.js";const x=()=>{const{discountName:x}=e(),u=m(),h=t(),{products:p,loading:f,error:g}=s((e=>e.discountProducts));r.useEffect((()=>{0===p.length&&u(o())}),[u,p.length]);const j=p.filter((e=>{if(e.discount&&e.discount.selectedDiscount&&e.discount.selectedDiscount.name){return e.discount.selectedDiscount.name.replace(/\s+/g,"-").toLowerCase()===x}return!1})),[w,N]=r.useState("high-to-low"),[b,C]=r.useState("all"),[v,k]=r.useState(!1),O=r.useRef(null);r.useEffect((()=>{function e(e){O.current&&!O.current.contains(e.target)&&"filterIcon"!==e.target.id&&k(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[O]);const S=e=>{N(e)},y=e=>{C(e)};let E=[...j];return"all"!==b&&(E=E.filter((e=>e.condition&&e.condition.toLowerCase()===b))),E.sort(((e,t)=>"high-to-low"===w?t.price-e.price:e.price-t.price)),n.jsxs(n.Fragment,{children:[n.jsx(l,{title:`Shop ${x} | ShopMyThrift`,description:`Shop ${x} on ShopMyThrift`,url:`https://www.shopmythrift.store/inapp-discounts/${x}`}),n.jsxs("div",{className:"relative  py-6",children:[n.jsxs("div",{className:"sticky top-0 bg-white z-50 border-b flex items-center justify-between mb-3 py-6 px-2",children:[n.jsx(i,{className:"text-2xl cursor-pointer",onClick:()=>h(-1)}),n.jsx("h1",{className:"text-xl font-opensans font-semibold",children:x.replace(/-/g," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}),n.jsx(d,{id:"filterIcon",className:"text-xl cursor-pointer",onClick:()=>k(!v)}),v&&n.jsxs("div",{ref:O,className:"absolute right-4 bg-white shadow-[0_0_10px_rgba(0,0,0,0.1)] top-14 p-3 w-40 h-auto rounded-2xl z-50 flex flex-col gap-2 font-opensans",children:[n.jsx("p",{className:"text-customOrange text-xs",children:"Price:"}),n.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("high-to-low"===w?"text-customOrange":""),onClick:()=>S("high-to-low"),children:"High to Low"}),n.jsx("hr",{className:"text-slate-300"}),n.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("low-to-high"===w?"text-customOrange":""),onClick:()=>S("low-to-high"),children:"Low to High"}),n.jsx("p",{className:"text-customOrange text-xs",children:"Condition:"}),n.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("all"===b?"text-customOrange":""),onClick:()=>y("all"),children:"All"}),n.jsx("hr",{className:"text-slate-300"}),n.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("brand new"===b?"text-customOrange":""),onClick:()=>y("brand new"),children:"Brand New"}),n.jsx("hr",{className:"text-slate-300"}),n.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("thrift"===b?"text-customOrange":""),onClick:()=>y("thrift"),children:"Thrift"}),n.jsx("hr",{className:"text-slate-300"}),n.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("defect"===b?"text-customOrange":""),onClick:()=>y("defect"),children:"Defect"})]})]}),n.jsx("div",{className:"px-2",children:n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:f?n.jsx(c,{height:200,width:200,count:8}):g?n.jsxs("div",{children:["Error: ",g]}):E.length>0?E.map((e=>n.jsx(a,{product:e},e.id))):n.jsx("div",{className:"col-span-full text-center font-opensans text-sm",children:"No products found for the selected filter."})})})]})]})};export{x as default};
