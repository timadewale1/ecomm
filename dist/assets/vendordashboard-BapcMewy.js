import{j as e,b$ as t,r as s,c0 as a,e as l,O as r,h as i,a9 as n,c1 as c,u as o,c as d,c2 as x,c3 as m,_ as u,H as h,D as f,E as j,c4 as p,au as g,aq as v,c5 as b,c6 as y,aE as w,R as N,c7 as k}from"./index-B6_tP4YQ.js";import{M as S,A as D}from"./AddProducts--9kZiUYz.js";import{a as O}from"./index-AmrmWShL.js";import{a as I,L as C,b as A}from"./index-Czi2OGzl.js";import{S as F}from"./SEO-CG8nsGhn.js";import{M as G}from"./index-c29tLOqg.js";import{c as M}from"./index-DVu8OWaS.js";import{m as R}from"./motion-nj0T3Q6E.js";import{L as P}from"./LocationPicker-UBsCVYnj.js";import{$ as E}from"./module-rdBSHQ9l.js";import{i as L}from"./index-_8P_0wxn.js";import{u as T}from"./useDispatch-DS0xcVHe.js";import"./index-C-KPEfQB.js";import"./index-BZTi0IwX.js";import"./index-BRiOgcip.js";import"./index-Bx5UHif0.js";import"./index-BaqZIR9i.js";import"./index-DfGOTzdC.js";import"./react-select.esm-RpmWxz1_.js";import"./setPrototypeOf-CeEI3KLI.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./inheritsLoose-HiINKdoJ.js";import"./Transition-EapTcxBc.js";import"./index-DPVG87FS.js";import"./index-Bo5izuxS.js";import"./index-C-2PV_nF.js";import"./producttype-CB1j3xpa.js";import"./warning-DM8AoHwU.js";import"./index-YqizTpTw.js";const Y=()=>e.jsxs("div",{className:"relative not-approved-container mt-6",children:[e.jsx("div",{className:"absolute -top-4 -left-2 mr-3 w-10 h-10 rounded-full bg-white flex justify-center items-center",children:e.jsx(t,{className:"w-7 h-7 text-customOrange"})}),e.jsx("div",{className:" px-4 font-medium",children:e.jsxs("p",{className:"text-customRichBrown text-center text-sm leading-6",children:[e.jsx("span",{role:"img","aria-label":"hourglass",children:"⏳"})," ","Your account is being reviewed! Hang tight—verification typically takes 6-12 hours or less. Have a nice day!"]})})]});G.setAppElement("#root");const U=({vendorId:t})=>{const[c,o]=s.useState(!1),[d,x]=s.useState(1),[m,u]=s.useState(null);s.useEffect((()=>{t&&(async()=>{const e=l(r,"vendors",t),s=(await i(e)).data();s&&!s.stockpile&&o(!0)})()}),[t]);const h=async e=>{const s=l(r,"vendors",t);e?x(2):(await n(s,{stockpile:{enabled:!1}}),o(!1))};return e.jsx(G,{isOpen:c,className:"fixed inset-0 bg-white  flex flex-col justify-center items-center  px-6",overlayClassName:"fixed modal-stockpile inset-0 bg-black bg-opacity-60 z-40",children:e.jsx(R.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},className:"w-full  text-center",children:1===d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 w-full flex justify-center object-cover ",children:e.jsx(a,{className:"text-9xl text-customRichBrown"})}),e.jsx("h2",{className:"text-3xl font-bold font-ubuntu text-gray-800 mb-3",children:"Do you currently offer stockpiling?"}),e.jsx("p",{className:"text-sm mt-10 font-ubuntu text-gray-600 mb-6",children:"Stockpiling allows customers to reserve items and keep adding more to their order over a set period before it's shipped. Let us know if you offer this option!"}),e.jsx("div",{className:"border-t border-gray-100"}),e.jsx("p",{className:"text-xs mt-16 ital  font-ubuntu text-customOrange mb-6 italic",children:"For stockpiled orders, you are paid 100% of the order value upfront, and the order is ready to be shipped once the stockpile duration expires."}),e.jsxs("div",{className:"relative -bottom-8 flex flex-col  gap-4 justify-center",children:[e.jsx("button",{onClick:()=>h(!0),className:"px-6 py-3 bg-customOrange text-white rounded-full font-semibold  font-opensans shadow-lg",children:"Yes, I do"}),e.jsx("button",{onClick:()=>h(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-full font-opensans font-semibold",children:"No, not currently"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 w-full flex justify-center object-cover ",children:e.jsx(M,{className:"text-9xl text-customRichBrown"})}),e.jsx("h2",{className:"text-3xl font-ubuntu  font-bold text-gray-800 mb-4",children:"How long can customers stockpile?"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mt-10 mb-6",children:[2,4,6,8].map((t=>e.jsxs("label",{className:"cursor-pointer px-4 py-3  font-opensans rounded-xl border text-sm font-medium "+(m===t?"bg-customOrange text-white":"bg-gray-100 text-gray-700"),onClick:()=>u(t),children:[t," weeks"]},t)))}),e.jsx("button",{onClick:async()=>{if(!m)return;const e=l(r,"vendors",t);await n(e,{stockpile:{enabled:!0,durationInWeeks:m}}),o(!1)},disabled:!m,className:"w-full py-3 relative text-sm font-opensans -bottom-28 rounded-full font-medium "+(m?"bg-customOrange text-white":"bg-gray-300 text-gray-200 cursor-not-allowed"),children:"Save and continue"})]})})})},$=({onLocationUpdate:t,isLoading:a,closeModal:l})=>{const[r,i]=s.useState(null),n=!(null==r?void 0:r.lat)||!(null==r?void 0:r.lng)||!(null==r?void 0:r.Address);return e.jsx("div",{className:"fixed modal-overlay inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white px-6 py-24 rounded-lg w-[100%] h-full shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(L,{className:"text-2xl text-customRichBrown mr-2"}),e.jsx("h2",{className:"text-3xl text-center font-semibold font-ubuntu text-black",children:"Update Your Address"})]}),e.jsx("p",{className:"text-sm mb-4 font-opensans text-gray-600",children:"To serve your store better and ensure our riders can reach you without issues, please update your current delivery address."}),e.jsx(P,{onLocationSelect:e=>{i({lat:e.lat,lng:e.lng,Address:e.address})}}),e.jsx("div",{className:"flex font-opensans justify-center mt-28 ",children:e.jsx("button",{className:(n||a?"opacity-50 w-full cursor-not-allowed rounded-full":"")+" bg-customOrange text-white font-semibold w-full flex justify-center px-4 py-2 rounded-full font-opensans",onClick:async()=>{if(!n)try{await t({lat:r.lat,lng:r.lng,Address:r.Address}),l()}catch(e){}},disabled:n||a,children:a?e.jsx(E,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"24",visible:!0}):"Save"})})]})})},V=()=>{const{vendorData:t,loading:a}=s.useContext(c),[i,G]=s.useState(0),[M,R]=s.useState(!1),[P,E]=s.useState("All"),[L,V]=s.useState(!1),[B,_]=s.useState(0),[q,H]=s.useState(0),[z,W]=s.useState(0),[Q,K]=s.useState(0),[X,J]=s.useState(!1),[Z,ee]=s.useState(!1),[te,se]=s.useState(!1),ae=o(),le=T(),{activities:re,lastDoc:ie,loading:ne,hasMore:ce}=d((e=>e.activities));s.useEffect((()=>{(null==t?void 0:t.vendorId)&&(le(x()),le(m({vendorId:t.vendorId,nextPage:!1})))}),[t,le]),s.useEffect((()=>{t&&(me(t.vendorId),oe(t.vendorId),xe(t.vendorId))}),[t]),s.useEffect((()=>{!a&&t&&!1===t.profileComplete&&(u("Please complete your profile."),ae("/complete-profile"))}),[t,a,ae]),s.useEffect((()=>{var e,s;!t||(null==(e=t.location)?void 0:e.lat)&&(null==(s=t.location)?void 0:s.lng)||ee(!0)}),[t]);const oe=async e=>{const t=`vendorRevenue_${e}`,s=`vendorRevenue_time_${e}`,a=localStorage.getItem(t),l=localStorage.getItem(s);if(a&&l&&Date.now()-l<18e5)W(parseFloat(a));else try{const a="d4f6f60628bfc7bdc540b58dda56067333685de482d8ec416581bc5bbb65aaa2",l="https://mythriftpayments.site/api/v1/",r=await fetch(`${l}/vendorRevenue/${e}`,{method:"GET",headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}});if(!r.ok){await r.json();throw new Error("Failed to fetch vendor revenue")}const i=await r.json();localStorage.setItem(t,i.revenue),localStorage.setItem(s,Date.now()),W(i.revenue)}catch(r){}},de=re.filter((e=>"All"===P||e.type===P)),xe=e=>{const t=h(r,"products"),s=f(t,j("vendorId","==",e),j("isDeleted","==",!1)),a=p(s,(e=>{K(e.docs.length)}));return()=>a()},me=e=>{const t=h(r,"orders"),s=f(t,j("vendorId","==",e)),a=p(s,(e=>{let t=0,s=0,a=0;e.forEach((e=>{const l=e.data(),{progressStatus:r}=l;"Delivered"===r?t++:["In Progress","Shipped","Pending"].includes(r)&&s++,a++})),H(a),G(t),_(s)}));return()=>a()},ue=t.vendorId&&`https://mx.shopmythrift.store/${t&&("virtual"===t.marketPlaceType?"store":"marketstorepage")}/${t.vendorId}?shared=true`,[he,fe]=s.useState(!1),je=e=>{const t=new Date(e.toDate()),s=new Date;return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()},pe=(()=>{const e=(new Date).getHours();let t;return t=e>=0&&e<12?"Good Morning":e>=12&&e<18?"Good Afternoon":"Good Evening",t})(),ge=s.useRef(),ve=s.useCallback((e=>{ne||(ge.current&&ge.current.disconnect(),ge.current=new IntersectionObserver((e=>{e[0].isIntersecting&&ce&&le(m({vendorId:t.vendorId,nextPage:!0,lastDoc:ie}))})),e&&ge.current.observe(e))}),[ne,ce,t,ie,le]),be=()=>J(!1);return a?e.jsxs("div",{className:"mb-40 mx-3 my-7 flex flex-col justify-center space-y-1 font-opensans",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"overflow-hidden w-11 h-11 rounded-full flex justify-center items-center mr-1",children:e.jsx(g,{circle:!0,height:44,width:44})}),e.jsx("div",{className:"ml-1 space-y-2",children:e.jsx(g,{width:120,height:20})})]})}),e.jsx("div",{className:"flex flex-col justify-center items-center mt-4",children:e.jsxs("div",{className:"relative bg-customDeepOrange w-full h-36 rounded-2xl flex flex-col justify-between px-4 py-2",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center space-y-4",children:[e.jsx(g,{width:120,height:20}),e.jsx(g,{width:100,height:30})]}),e.jsx("div",{children:e.jsx(g,{width:"80%",height:20})})]})}),e.jsxs("div",{className:"flex flex-col justify-center mt-4",children:[e.jsx("p",{className:"text-black text-lg text-start font-semibold mb-3",children:e.jsx(g,{width:80,height:20})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 justify-center",children:[...Array(4)].map(((t,s)=>e.jsxs("div",{className:"flex flex-col justify-between w-custVCard h-20 rounded-xl bg-customSoftGray p-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(g,{width:30,height:30}),e.jsx(g,{width:100,height:15})]}),e.jsx(g,{width:40,height:20})]},s)))})]}),e.jsxs("div",{className:"flex flex-col justify-center mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx(g,{width:100,height:20}),e.jsx(g,{width:30,height:20})]}),e.jsx("div",{className:"flex flex-col space-y-2 text-black",children:[...Array(4)].map(((t,s)=>e.jsxs("div",{className:"mb-2 bg-customSoftGray rounded-2xl px-4 py-2",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx(g,{width:100,height:15}),e.jsx(g,{width:50,height:15})]}),e.jsx(g,{width:"90%",height:15})]},s)))})]})]}):t?e.jsxs(e.Fragment,{children:[t&&!t.stockpile&&e.jsx(U,{vendorId:t.vendorId}),Z&&e.jsx($,{onLocationUpdate:async({lat:e,lng:s,Address:a})=>{se(!0);try{await n(l(r,"vendors",t.vendorId),{Address:a,location:{lat:e,lng:s}}),u.success("Address updated successfully!"),ee(!1)}catch(i){u.error("Error updating address.")}finally{se(!1)}},isLoading:te,closeModal:()=>ee(!1)}),e.jsx(F,{title:"Vendor Dashboard - My Thrift",description:"Manage your store on My Thrift",url:"https://www.shopmythrift.store/vendordashboard"}),e.jsxs("div",{className:"mb-40 mx-3 my-7 flex flex-col justify-center space-y-1 font-opensans ",children:[e.jsx(v,{}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"overflow-hidden w-11 h-11 rounded-full flex justify-center items-center mr-1 cursor-pointer",onClick:()=>ae("/vendor-profile"),children:e.jsx("img",{src:t.coverImageUrl||"https://images.saatchiart.com/saatchi/1750204/art/9767271/8830343-WUMLQQKS-7.jpg",alt:"Vendor profile",className:"rounded-full object-cover h-11 w-11"})}),e.jsx("div",{className:"ml-1 space-y-2",children:e.jsxs("p",{className:"font-bold text-lg text-black",children:[pe,", ",t.firstName]})})]})}),!t.isApproved&&e.jsx("div",{className:"flex flex-col justify-center items-center",children:e.jsx(Y,{})}),e.jsx("div",{className:"flex flex-col justify-center items-center mt-4",children:e.jsxs("div",{className:"relative bg-customDeepOrange w-full h-36 rounded-2xl flex flex-col justify-between px-4 py-2",children:[e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx("img",{src:"./Vector.png",alt:"",className:"w-16 h-24"})}),e.jsx("div",{className:"absolute bottom-0 left-0",children:e.jsx("img",{src:"./Vector2.png",alt:"",className:"w-16 h-16"})}),e.jsxs("div",{className:"flex flex-col justify-center items-center space-y-4",children:[e.jsxs("p",{className:"text-white text-lg flex justify-between items-center",children:[e.jsx("p",{className:"text-white mr-2",children:"Total Revenue "}),e.jsx("p",{children:M?e.jsx(y,{onClick:()=>R(!M),className:"text-white"}):e.jsx(b,{onClick:()=>R(!M),className:"text-white"})})]}),e.jsx("p",{className:"text-white text-3xl font-bold",children:M?"**.**":`₦${ye=z,ye.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{className:"text-white text-xs truncate w-60 font-thin",children:ue}),e.jsx("button",{className:"text-white opacity-50 cursor-not-allowed",onClick:async()=>{if(!he)try{await navigator.clipboard.writeText(ue),fe(!0),setTimeout((()=>fe(!1)),3e3)}catch(e){u.error("Failed to copy!")}},children:he?e.jsx(C,{className:"text-[#28a745]"}):e.jsx(I,{className:"text-white"})})]})})]})}),e.jsx("div",{className:"flex flex-col justify-center mt-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-black text-lg text-start font-semibold mb-3",children:"Overview"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 justify-center",children:[e.jsxs("div",{className:"flex flex-col justify-between w-custVCard h-20 rounded-xl bg-customSoftGray p-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"rounded-md bg-white w-7 h-7 flex justify-center items-center",children:e.jsx(w,{className:"text-sm text-customOrange"})}),e.jsx("div",{children:e.jsx("p",{className:"text-xs text-customRichBrown font-medium",children:"Total Orders"})})]}),e.jsx("div",{className:"text-lg font-semibold text-end",children:q})]}),e.jsxs("div",{className:"flex flex-col justify-between w-custVCard h-20 rounded-xl bg-customSoftGray p-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"rounded-md bg-white w-7 h-7 flex justify-center items-center",children:e.jsx(w,{className:"text-sm text-customOrange"})}),e.jsx("div",{children:e.jsx("p",{className:"text-xs text-customRichBrown font-medium",children:"Total Products"})})]}),e.jsx("div",{className:"text-lg font-semibold text-end",children:Q})]}),e.jsxs("div",{className:"flex flex-col justify-between w-custVCard h-20 rounded-xl bg-customSoftGray p-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"rounded-md bg-white w-7 h-7 flex justify-center items-center",children:e.jsx(w,{className:"text-sm text-customOrange"})}),e.jsx("div",{children:e.jsx("p",{className:"text-xs text-customRichBrown font-medium",children:"Unfulfilled Orders"})})]}),e.jsx("div",{className:"text-lg font-semibold text-end",children:B})]}),e.jsxs("div",{className:"flex flex-col justify-between w-custVCard h-20 rounded-xl bg-customSoftGray p-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"rounded-md bg-white w-7 h-7 flex justify-center items-center",children:e.jsx(w,{className:"text-sm text-customOrange"})}),e.jsx("div",{children:e.jsx("p",{className:"text-xs text-customRichBrown font-medium",children:"Fulfilled Orders"})})]}),e.jsx("div",{className:"text-lg font-semibold text-end",children:i})]})]})})]})}),e.jsxs("div",{className:"flex flex-col justify-center mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx("p",{className:"text-black text-lg font-semibold",children:"Recent activity"}),e.jsxs("div",{className:"relative",children:[L&&e.jsxs("div",{className:"z-50 absolute bg-white w-44 h-40 rounded-2.5xl shadow-[0_0_10px_rgba(0,0,0,0.1)] -left-44 top-2 p-3 flex flex-col justify-between",children:[e.jsx("span",{className:("All"===P?"text-customOrange":"text-black")+" text-xs ml-2 cursor-pointer",onClick:()=>{E("All"),V(!L)},children:"All"}),e.jsx("hr",{className:"text-slate-300"}),e.jsx("span",{className:("transactions"===P?"text-customOrange":"text-black")+" text-xs ml-2 cursor-pointer",onClick:()=>{E("transactions"),V(!L)},children:"Recent Transactions"}),e.jsx("hr",{className:"text-slate-300"}),e.jsx("span",{className:("order"===P?"text-customOrange":"text-black")+" text-xs ml-2 cursor-pointer",onClick:()=>{E("order"),V(!L)},children:"Orders"}),e.jsx("hr",{className:"text-slate-300"}),e.jsx("span",{className:("Product Update"===P?"text-customOrange":"text-black")+" text-xs ml-2 cursor-pointer",onClick:()=>{E("Product Update"),V(!L)},children:"Product Update"})]}),e.jsx(A,{className:"text-customOrange cursor-pointer",onClick:()=>V(!L)})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 text-black",children:[re&&de.length>0&&!a?e.jsx(e.Fragment,{children:Object.entries(de.reduce(((e,t)=>{const s=new Date(1e3*t.timestamp.seconds+t.timestamp.nanoseconds/1e6),a=new Date;let l;const r=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate();return l=r(s,a)?"Today":r(s,new Date(a.getFullYear(),a.getMonth(),a.getDate()-1))?"Yesterday":s>=new Date(a.getFullYear(),a.getMonth(),a.getDate()-7)?"Last 7 Days":"Older",e[l]||(e[l]=[]),e[l].push(t),e}),{})).map((([t,s])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-black font-bold text-sm mb-2",children:t}),s.map((t=>e.jsxs("div",{className:"mb-2 bg-customSoftGray rounded-2xl px-4 py-2",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{className:"text-black font-semibold text-xs",children:t.title}),e.jsx("p",{className:"text-black font-semibold text-xs",children:je(t.timestamp)})]}),e.jsx("p",{className:"text-black text-xs",children:t.note})]},t.id)))]},t)))}):a?e.jsxs(e.Fragment,{children:[e.jsx(g,{square:!0,height:84,className:"w-full mb-2"}),e.jsx(g,{square:!0,height:84,className:"w-full mb-2"}),e.jsx(g,{square:!0,height:84,className:"w-full mb-2"}),e.jsx(g,{square:!0,height:84,className:"w-full mb-2"})]}):de.length<1&&!a?"All"===P?e.jsx("div",{className:"text-center my-4 px-2 py-4 rounded-2xl bg-customSoftGray text-xs",children:"🕘 No actions taken yet. Your recent activities will appear here once you start managing your store..."}):"transactions"===P?e.jsx("div",{className:"text-center my-4 px-2 py-4 rounded-2xl bg-customSoftGray text-xs",children:"📲 You have no recent transactions yet..."}):"order"===P?e.jsx("div",{className:"text-center my-4 px-2 py-4 rounded-2xl bg-customSoftGray text-xs",children:"🛒 You have no order updates yet..."}):"Product Update"===P?e.jsx("div",{className:"text-center my-4 px-2 py-4 rounded-2xl bg-customSoftGray text-xs",children:"📦 You have no product updates yet..."}):e.jsx("div",{children:e.jsx("img",{src:"./Note.png",alt:""})}):e.jsx("div",{className:"text-center my-4 px-2 py-4 rounded-2xl bg-customSoftGray text-xs",children:"Nothing to show here..."}),ne&&e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(N,{className:"w-10 h-10",animationData:k,loop:!0,autoplay:!0})}),e.jsx("div",{ref:ve})]})]})]}),e.jsx("button",{onClick:()=>J(!0),className:`fixed bottom-24 right-5 flex justify-center items-center ${(null==t?void 0:t.isApproved)?"bg-customOrange":"bg-customOrange opacity-35 cursor-not-allowed"} text-white rounded-full w-11 h-11 shadow-lg focus:outline-none`,disabled:!(null==t?void 0:t.isApproved),children:e.jsx("span",{className:"text-3xl",children:e.jsx(O,{})})}),e.jsx(S,{isOpen:X,onClose:be,children:e.jsx(D,{vendorId:null==t?void 0:t.vendorId,closeModal:be})})]}):e.jsx("p",{className:"",children:"Unable to load vendor data. Please try again later."});var ye};export{V as default};
