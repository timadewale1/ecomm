import{j as e,r as t,d3 as a,q as s,c as n,a as o,w as r,g as l,a2 as i,aB as c,aC as d,bm as u,d4 as m,d5 as p,d6 as h,d7 as x,d8 as g,am as f,c0 as b,c1 as v,I as j,d9 as k,_ as y,bk as N,da as w,h as C,B as S,S as I,F as B,Q as D,bh as P,ab as O,d as M,bB as L,bD as U,bE as A,bF as T,ac as H}from"./index-CvIXhaMv.js";import{a as F,R as W,F as E}from"./reactstrap.modern-BbKta6iB.js";import{T as z}from"./index-DZJSELV0.js";import{c as $}from"./index-CGdwSzPY.js";import{c as V}from"./index-DV9LhBdq.js";import"./index-6PUMxdSt.js";import"./index-BVVzb-MI.js";import"./index-BaqZIR9i.js";import"./Transition-DlEawdUv.js";import"./inheritsLoose-BMl3PfwL.js";const R=({step:t})=>e.jsx("div",{className:"flex flex-col items-start space-y-4  w-full",children:e.jsx("div",{className:"flex justify-between space-x-2 w-full",children:Array.from({length:5}).map(((a,s)=>e.jsx("div",{className:"h-1 flex-grow  rounded-full "+(s<t?"bg-customOrange":"bg-gray-100")},s)))})}),G=[{code:"044",name:"Access Bank Nigeria Plc"},{code:"050",name:"Ecobank Nigeria"},{code:"070",name:"Fidelity Bank Plc"},{code:"011",name:"First Bank of Nigeria Plc"},{code:"50515",name:"Moniepoint MFB"},{code:"214",name:"First City Monument Bank"},{code:"058",name:"Guaranty Trust Bank Plc"},{code:"301",name:"Jaiz Bank"},{code:"082",name:"Keystone Bank Ltd"},{code:"076",name:"Skye Bank Plc"},{code:"039",name:"Stanbic IBTC Plc"},{code:"232",name:"Sterling Bank Plc"},{code:"032",name:"Union Bank Nigeria Plc"},{code:"033",name:"United Bank for Africa Plc"},{code:"215",name:"Unity Bank Plc"},{code:"035",name:"WEMA Bank Plc"},{code:"057",name:"Zenith Bank International"},{code:"101",name:"Providus Bank"},{code:"104",name:"Parallex Bank Limited"},{code:"303",name:"Lotus Bank Limited"},{code:"105",name:"Premium Trust Bank Ltd"},{code:"106",name:"Signature Bank Ltd"},{code:"103",name:"Globus Bank"},{code:"102",name:"Titan Trust Bank"},{code:"067",name:"Polaris Bank"},{code:"107",name:"Optimus Bank Ltd"},{code:"068",name:"Standard Chartered Bank"},{code:"100",name:"Suntrust Bank"},{code:"999992",name:"Opay"},{code:"50211",name:"Kuda Bank"}],J=({vendorData:C,setVendorData:S,step:I,getProgress:B,handleInputChange:D,handleNextStep:P,setShowDropdown:O,showDropdown:M,categories:L,bankDetails:U,handleBankDetailsChange:A,deliveryMode:T,handleDeliveryModeChange:H,idVerification:W,handleIdVerificationChange:E,idImage:J,handleIdImageUpload:K,handleProfileCompletion:Y,handleImageUpload:_,handleSocialMediaChange:q,stockpile:Q,stockpileStep:X,setStockpileStep:Z,handleStockpileChoice:ee,duration:te,setDuration:ae,setBankDetails:se,showBankDropdown:ne,setShowBankDropdown:oe,selectedBank:re,setSelectedBank:le,setIdImage:ie,isCoverImageUploading:ce,isIdImageUploading:de,isLoading:ue})=>{var me,pe;const he=e=>{try{return!e||e.startsWith("http://")||e.startsWith("https://")||(e=`https://${e}`),new URL(e),!0}catch(t){return!1}},xe=()=>{if(2===I){if(!C.shopName)return y.error("Please fill in the shop name"),!1;if(!C.Address)return y.error("Please fill in Address"),!1;if(0===C.categories.length)return y.error("Please select at least one category"),!1;if(!C.coverImageUrl)return y.error("Please upload a cover image"),!1;const{instagram:e,facebook:t,twitter:a,tiktok:s}=C.socialMediaHandle;if(!e&&!t&&!a&&!s||e&&!he(e)||t&&!he(t)||s&&!he(s)||a&&!he(a))return y.error("Please provide valid social media links. Include https://"),!1}if(3===I){if(!U.bankName)return y.error("Please select a bank"),!1;if(!U.accountNumber||10!==U.accountNumber.length)return y.error("Account number must be 10 digits"),!1;if(!U.accountName)return y.error("Please fill in the account name"),!1}return 4!==I||"Delivery & Pickup"!==T||C.pickupLat&&C.pickupLng&&C.pickupAddress?5!==I||!0!==(null==Q?void 0:Q.enabled)||te?(P(),!0):(y.error("Please select a stockpile duration before continuing."),!1):(y.error("Please choose a pickup location before continuing."),!1)},[ge,fe]=t.useState(!1),[be,ve]=t.useState(!1),[je,ke]=t.useState(!1),[ye,Ne]=t.useState(!1),[we,Ce]=t.useState(!1),[Se,Ie]=t.useState(""),[Be,De]=t.useState(""),[Pe,Oe]=t.useState(""),[Me,Le]=t.useState(!1),[Ue,Ae]=t.useState("");G.filter((e=>e.name.toLowerCase().includes(Ue.toLowerCase()))),t.useEffect((()=>{if(5!==I)return;const e=Q??(null==C?void 0:C.stockpile);!0===(null==e?void 0:e.enabled)?(Z(2),(null==e?void 0:e.durationInWeeks)&&ae(e.durationInWeeks)):!1===(null==e?void 0:e.enabled)&&(Z(1),ae(null))}),[I,Q,null==C?void 0:C.stockpile,Z,ae]);t.useEffect((()=>{(async()=>{const e=C.shopName.trim().toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");if(e.length>=2){ve(!0),ke(!1),Ne(!1);try{const t=s(n(o,"vendors"),r("shopName","==",e));(await l(t)).empty?Ne(!0):ke(!0)}catch(t){}finally{ve(!1)}}else ke(!1),Ne(!1)})()}),[C.shopName]);const Te=()=>{var e;if(2===I)return C.shopName&&!je&&C.Address&&C.categories.length>0&&C.coverImageUrl&&(C.socialMediaHandle.instagram||C.socialMediaHandle.facebook||C.socialMediaHandle.tiktok||C.socialMediaHandle.twitter);if(3===I)return U.bankName&&10===U.accountNumber.length&&U.accountName;if(4===I)return T&&("Delivery & Pickup"!==T||C.pickupLat&&C.pickupLng&&C.pickupAddress);if(5===I){return!((null==Q?void 0:Q.enabled)??(null==(e=null==C?void 0:C.stockpile)?void 0:e.enabled))||Boolean(te)}return 6===I&&(W&&J)},He=L.filter((e=>e.toLowerCase().includes(Be.toLowerCase())));return t.useEffect((()=>{const e=e=>{e.target.closest(".dropdown-container")||oe(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),t.useEffect((()=>{const e=e=>{e.target.closest(".category-dropdown")||fe(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),e.jsx("div",{children:"virtual"===C.marketPlaceType&&e.jsxs(e.Fragment,{children:[2===I&&e.jsxs("div",{className:"p-2 mt",children:[e.jsx("h2",{className:"text-xl font-opensans font-semibold text-customBrown",children:"Create Shop"}),e.jsx("p",{className:"text-black font-light mt-2 font-opensans mb-3",children:"Set up your brand to get customers and sell products."}),e.jsx("p",{className:"text-xs text-customOrange font-opensans mb-2",children:"Step 1: Business Information"}),e.jsx(R,{step:1}),e.jsxs("h3",{className:"text-md mt-4 font-semibold mb-4 font-opensans flex items-center ",children:[e.jsx(a,{className:"w-5 h-5 mr-2 text-header"}),"Brand Info"]}),e.jsxs(F,{className:"relative mb-4",children:[e.jsx("input",{type:"text",name:"shopName",placeholder:"Brand Name",value:C.shopName,onChange:async e=>{const t=e.target.value.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");if(S({...C,shopName:t}),t.length>=2)try{ve(!0);const e=s(n(o,"vendors"),r("shopName","==",t));(await l(e)).empty?(ke(!1),Ne(!0)):(ke(!0),Ne(!1))}catch(a){}finally{ve(!1)}else ke(!1),Ne(!1)},className:"w-full h-12 p-3 border-2 font-opensans text-neutral-800 rounded-lg hover:border-customOrange focus:outline-none focus:border-customOrange "+(je?"border-red-500":ye?"border-green-500":"")}),be&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(i,{strokeColor:"orange",strokeWidth:"5",animationDuration:"0.75",width:"24",visible:!0})}),!be&&ye&&!je&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(c,{className:"text-green-500 rounded-full p-1",size:24})}),je&&e.jsxs("div",{className:"text-red-500 text-xs flex items-center",children:[e.jsx(d,{className:"mr-1"}),"Shop name is already taken. Please choose another one."]})]}),e.jsx("div",{className:"mb-2",children:e.jsx(u,{initialAddress:C.Address,onLocationSelect:({address:e,lat:t,lng:a})=>{S({...C,Address:e,location:{lat:t,lng:a}})}})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>{Ce(!we),fe(!1)},className:"w-full h-12 mb-3 p-3 border-2 rounded-lg bg-white font-opensans text-left flex items-center justify-between",children:[Pe?e.jsx("span",{className:"text-neutral-800",children:Pe}):e.jsx("span",{className:"text-neutral-400",children:"Choose a State"}),e.jsx("svg",{className:"fill-current h-4 w-4 text-neutral-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.516 7.548l4.486 4.486 4.485-4.486a.75.75 0 1 1 1.06 1.06l-5.015 5.015a.75.75 0 0 1-1.06 0l-5.015-5.015a.75.75 0 1 1 1.06-1.06z"})})]}),we&&e.jsxs("div",{className:"absolute w-full text-neutral-400 bg-white border rounded-lg z-10",children:[e.jsx("div",{className:"p-2",children:e.jsx("input",{type:"text",value:Se,onChange:e=>Ie(e.target.value),placeholder:"Search states...",className:"w-full p-2 border rounded-lg focus:outline-none focus:border-customOrange"})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:m.filter((e=>e.toLowerCase().includes(Se.toLowerCase()))).map(((t,a)=>e.jsx("div",{className:"p-2 h-12 cursor-pointer hover:bg-gray-100",onClick:()=>(e=>{Oe(e),S({...C,state:e}),Ce(!1)})(t),children:e.jsx("span",{className:"text-neutral-800",children:t})},a)))})]})]}),e.jsxs("div",{className:"relative category-dropdown",children:[e.jsxs("button",{type:"button",onClick:()=>{fe(!ge),Ce(!1)},className:"w-full p-3 border-2 mb-3  rounded-lg bg-white font-opensans text-left flex items-center justify-between",style:{minHeight:"3rem",flexWrap:"wrap",alignItems:"flex-start"},children:[C.categories.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:C.categories.map(((t,a)=>e.jsx("span",{className:"bg-customOrange text-white text-xs rounded-full px-2 py-1",children:t},a)))}):e.jsx("span",{className:"text-neutral-400",children:"Select Brand Category"}),e.jsx("svg",{className:"fill-current h-4 w-4 text-neutral-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.516 7.548l4.486 4.486 4.485-4.486a.75.75 0 1 1 1.06 1.06l-5.015 5.015a.75.75 0 0 1-1.06 0l-5.015-5.015a.75.75 0 1 1 1.06-1.06z"})})]}),ge&&e.jsxs("div",{className:"absolute w-full text-neutral-400 bg-white border rounded-lg category-dropdown z-10",children:[e.jsx("div",{className:"p-2",children:e.jsx("input",{type:"text",value:Be,onChange:e=>De(e.target.value),placeholder:"Search categories...",className:"w-full p-2 border rounded-lg focus:outline-none focus:border-customOrange"})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:He.length>0?He.map(((t,a)=>e.jsx("div",{className:"p-2 h-12",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:t,checked:C.categories.includes(t),onChange:e=>{const a=[...C.categories];if(e.target.checked)a.push(t);else{const e=a.indexOf(t);e>-1&&a.splice(e,1)}S({...C,categories:a})},className:"mr-2 appearance-none h-4 w-4 border border-gray-300 checked:bg-customOrange checked:border-customOrange focus:outline-none focus:ring-2 focus:ring-customOrange focus:ring-opacity-50 rounded-lg"}),e.jsx("span",{className:"text-neutral-800",children:t})]})},a))):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No categories found"})})]})]}),e.jsx("input",{type:"text",name:"description",placeholder:"Brand Description",value:C.description,onFocus:()=>fe(!1),onChange:D,className:"w-full h-12 mb-4 p-3 border-2 font-opensans text-black rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange"}),e.jsxs("h3",{className:"text-md font-semibold mb-1 font-opensans flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2 text-header"}),"Social Media"]}),e.jsx("h4",{className:"font-opensans text-gray-700 mb-3 text-xs",children:"Your social media handles are collected for security reasons best known to us(minimum of one link must be attached)."}),e.jsxs("div",{className:"relative w-full mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx(h,{className:"text-gray-500 text-xl"})}),e.jsx("input",{type:"text",name:"instagram",placeholder:"Instagram Link",value:C.socialMediaHandle.instagram,onChange:q,className:"w-full h-12 pl-12 pr-3 border-2 rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange "+(C.socialMediaHandle.instagram&&!he(C.socialMediaHandle.instagram)?"border-red-500":"")})]}),e.jsxs("div",{className:"relative w-full mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx(x,{className:"text-gray-500 text-xl"})}),e.jsx("input",{type:"text",name:"facebook",placeholder:"Facebook Link",value:C.socialMediaHandle.facebook,onChange:q,className:"w-full h-12 pl-12 pr-3 border-2 rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange "+(C.socialMediaHandle.facebook&&!he(C.socialMediaHandle.facebook)?"border-red-500":"")})]}),e.jsxs("div",{className:"relative w-full mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx(g,{className:"text-gray-500 text-xl"})}),e.jsx("input",{type:"text",name:"tiktok",placeholder:"Tiktok Link",value:C.socialMediaHandle.tiktok,onChange:q,className:"w-full h-12 pl-12 pr-3 border-2 rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange "+(C.socialMediaHandle.tiktok&&!he(C.socialMediaHandle.tiktok)?"border-red-500":"")})]}),e.jsxs("div",{className:"relative w-full mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx(f,{className:"text-gray-500 text-xl"})}),e.jsx("input",{type:"text",name:"twitter",placeholder:"Twitter(X) Link",value:C.socialMediaHandle.twitter,onChange:q,className:"w-full h-12 pl-12 pr-3 border-2 rounded-lg focus:outline-none focus:border-customOrange hover:border-customOrange "+(C.socialMediaHandle.twitter&&!he(C.socialMediaHandle.twitter)?"border-red-500":"")})]}),e.jsxs("h3",{className:"text-md font-semibold mb-4 font-opensans flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-xl text-header"}),"Upload Image"]}),e.jsxs("div",{className:"border-2 border-dashed border-customBrown rounded-lg h-48 w-full text-center mb-6",children:[e.jsxs("div",{className:"w-full h-full flex items-center justify-center cursor-pointer relative",onClick:()=>document.getElementById("shopImageUpload").click(),children:[C.coverImageUrl?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:C.coverImageUrl,alt:"Uploaded Shop",className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-customBrown text-white rounded-full p-1",onClick:e=>{e.stopPropagation(),S((e=>({...e,coverImageUrl:null})))},children:e.jsx(b,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"p-12 flex flex-col justify-center items-center text-center",children:[e.jsx(v,{size:60,className:"mb-4 text-customOrange opacity-40"}),e.jsx("label",{htmlFor:"shopImageUpload",className:"text-orange-500 font-light font-opensans text-xs cursor-pointer",children:"Upload shop image here. Image must be clear and not more than 3MB."})]}),ce&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 rounded-lg",children:e.jsx(i,{strokeColor:"orange",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0})})]}),e.jsx("input",{type:"file",id:"shopImageUpload",className:"hidden",onChange:e=>_(e)})]}),e.jsx(j.button,{type:"button",className:"w-full h-12 text-white rounded-full "+(Te()?"bg-customOrange":"bg-customOrange opacity-50"),onClick:xe,disabled:!Te(),children:"Next"})]}),3===I&&"virtual"===C.marketPlaceType&&e.jsxs("div",{className:"p-2 mt-3",children:[e.jsx("h2",{className:"text-xs text-customOrange font-light font-opensans mb-3",children:"Step 2: Bank Details"}),e.jsx(R,{step:2}),e.jsxs("h3",{className:"text-md font-semibold font-opensans text-black mt-3 mb-3 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-3 font-opensans text-header"}),"Bank Details"]}),e.jsxs("div",{className:"relative w-full mb-4",children:[e.jsx("label",{htmlFor:"bank-select",className:"block text-sm font-opensans font-medium text-gray-700",children:"Select Bank"}),e.jsxs("select",{id:"bank-select",name:"bankName",value:U.bankCode||"",onChange:e=>{const t=e.target.value,a=G.find((e=>e.code===t));a&&(se({...U,bankName:a.name,bankCode:a.code}),le(a))},className:"w-full h-12 px-3 border-2 rounded-lg font-opensans text-gray-800 hover:border-customOrange focus:outline-none focus:border-customOrange",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Bank"}),G.map((t=>e.jsx("option",{value:t.code,children:t.name},t.code)))]})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",name:"accountNumber",value:U.accountNumber||"",onChange:async e=>{var t,a;const s=e.target.value;if(/^\d*$/.test(s)&&s.length<=10&&(se((e=>({...e,accountNumber:s,...s.length<10?{accountName:"",error:""}:{}}))),10===s.length&&re)){const e="9cac075ea03553597625b06532dc88a6",o="https://prod.mythriftpayments.site/api/v1",r=s;try{Le(!0);const s=`${o}/resolve-account?accountNumber=${r}&bankCode=${re.code}`,n=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}}),l=await n.json();if(n.ok&&!0===l.status&&(null==(a=null==(t=l.data)?void 0:t.data)?void 0:a.account_name)){const e=l.data.data.account_name;se((t=>({...t,accountName:e,error:""}))),y.success("Account resolved successfully")}else se((e=>({...e,accountName:"",error:data.message||"Invalid account number."}))),y.error(data.message||"Failed to resolve account number")}catch(n){y.error("Error resolving account number. Please try again."),se((e=>({...e,accountName:"",error:"Error resolving account number."})))}finally{Le(!1)}}},placeholder:"Enter Account Number (10 digits)",disabled:Me,className:"w-full h-12 px-3 pr-10 border-2 font-opensans text-neutral-800 rounded-lg hover:border-customOrange focus:outline-none focus:border-customOrange mb-1"}),Me&&e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center",children:e.jsx(i,{strokeColor:"orange",strokeWidth:"5",animationDuration:"0.75",width:"24",visible:!0})})]}),U.error&&e.jsxs("p",{className:"text-lg text-red-500 text-center mt-8 font-ubuntu",children:["❌",U.error]}),!U.error&&U.accountName&&e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"font-opensans text-sm text-neutral-800 font-bold block mb-1",children:"Account Name"}),e.jsx("input",{type:"text",value:U.accountName,disabled:!0,className:"w-full h-12 px-3 border-2 font-opensans text-neutral-800 rounded-lg bg-gray-100"})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(j.button,{type:"button",className:"w-11/12 h-12 fixed bottom-6 left-0 right-0 mx-auto flex justify-center items-center text-white rounded-full "+(U.accountName&&re&&!Me?"bg-customOrange":"bg-customOrange opacity-50 cursor-not-allowed"),disabled:!(U.accountName&&re)||Me,onClick:xe,children:"Next"})})]}),4===I&&"virtual"===C.marketPlaceType&&e.jsxs("div",{className:"p-2 mt-3 ",children:[e.jsx("h2",{className:"text-xs text-customOrange font-light font-opensans mb-3",children:"Step 3: Delivery Mode"}),e.jsx(R,{step:3}),e.jsxs("h3",{className:"text-md font-semibold font-opensans text-header mt-3 mb-3 flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2 text-black font-opensans"}),"Delivery Mode"]}),e.jsx("p",{className:"text-black font-light text-sm mb-4 font-opensans",children:"Choose a delivery mode for your brand"}),e.jsxs("div",{className:"",children:[e.jsxs("div",{onClick:()=>H("Delivery"),className:"border-0 p-2 mb-4 rounded-lg cursor-pointer flex justify-between items-center "+("Delivery"===T?"border-customOrange":"border-gray-200"),children:[e.jsx("span",{className:"font-opensans",children:"Delivery"}),e.jsx("div",{className:"w-6 h-6 rounded-full border-2 flex justify-center items-center "+("Delivery"===T?"border-customOrange":"border-gray-200"),children:"Delivery"===T&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})})]}),e.jsxs("div",{onClick:()=>H("Delivery & Pickup"),className:`p-2  rounded-lg cursor-pointer flex justify-between items-center  ${"Delivery & Pickup"===T}`,children:[e.jsx("span",{className:"font-opensans text-black",children:"Delivery & Pickup"}),e.jsx("div",{className:"w-6 h-6 rounded-full border-2 flex flex-col justify-center items-center "+("Delivery & Pickup"===T?"border-customOrange":"border-gray-300"),children:"Delivery & Pickup"===T&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-customOrange"})})]}),"Delivery & Pickup"===T&&e.jsxs("div",{className:"mt-2 px-2",children:[e.jsxs("p",{className:"font-opensans text-xs text-gray-700 mb-2",children:["This pickup location is where you'll meet buyers who choose to collect their order directly from you. It can be somewhere outside your house like your gate, curb, or a nearby public place just somewhere you’re comfortable meeting people.",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("strong",{className:"text-black",children:["Note: This is ",e.jsx("u",{children:"not"})," the same as your main delivery address."]})," ","We’ll still use the address you provided earlier to arrange delivery with our logistics partners.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"text-customOrange animate-pulse font-semibold",children:"We strongly advise against using your exact home address as your pickup location to prevent doxxing or privacy issues."})]}),e.jsx(u,{initialAddress:C.pickupAddress,onLocationSelect:({address:e,lat:t,lng:a})=>S({...C,pickupAddress:e,pickupLat:t,pickupLng:a})})]})]}),e.jsx(j.button,{type:"button",className:"w-11/12 h-12 fixed bottom-6 left-0 right-0 mx-auto flex justify-center items-center text-white font-opensans rounded-full "+(T&&("Delivery & Pickup"!==T||C.pickupAddress&&C.pickupLat&&C.pickupLng)?"bg-customOrange":"bg-customOrange opacity-20"),onClick:xe,disabled:!(T&&("Delivery & Pickup"!==T||C.pickupAddress&&C.pickupLat&&C.pickupLng)),children:"Next"})]}),5===I&&"virtual"===C.marketPlaceType&&e.jsxs("div",{className:"p-2 mt-3 ",children:[e.jsx("h2",{className:"text-xs text-customOrange font-light font-opensans mb-3",children:"Step 4: Set up Stockpiling"}),e.jsx(R,{step:4}),1===X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 mt-4 w-full flex justify-center object-cover ",children:e.jsx(N,{className:"text-9xl text-customRichBrown"})}),e.jsx("h2",{className:"text-3xl font-bold font-ubuntu text-gray-800 mb-3",children:"Do you currently offer stockpiling?"}),e.jsx("p",{className:"text-sm mt-10 font-ubuntu text-gray-600 mb-6",children:"Stockpiling allows customers to reserve items and keep adding more to their order over a set period before it's shipped. Let us know if you offer this option!"}),e.jsx("div",{className:"border-t border-gray-100"}),e.jsx("p",{className:"text-xs mt-4 ital  font-ubuntu text-customOrange mb-6 italic",children:"For stockpiled orders, you are paid 100% of the order value upfront, and the order is ready to be shipped once the stockpile duration expires."}),e.jsxs("div",{className:"flex gap-3  flex-col justify-center mb-4",children:[e.jsx("button",{type:"button",onClick:()=>ee(!0),className:"px-4 py-2 font-opensans font-medium rounded-full border "+((null==Q?void 0:Q.enabled)??(null==(me=null==C?void 0:C.stockpile)?void 0:me.enabled)?"bg-customOrange text-white border-customOrange":"bg-gray-100 text-gray-700 border-gray-200"),children:"Yes, I do"}),e.jsx("button",{type:"button",onClick:()=>{ee(!1),ae(null)},className:"px-4 py-2 font-opensans font-medium rounded-full border "+((null==Q?void 0:Q.enabled)??(null==(pe=null==C?void 0:C.stockpile)?void 0:pe.enabled)?"bg-gray-100 text-gray-700 border-gray-200":"bg-customOrange text-white border-customOrange"),children:"No, not currently"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 mt-2 w-full flex justify-center object-cover ",children:e.jsx(V,{className:"text-9xl text-customRichBrown"})}),e.jsx("h2",{className:"text-3xl font-ubuntu  font-bold text-gray-800 mb-4",children:"How long can customers stockpile?"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mt-10 mb-6",children:[2,4,6,8].map((t=>e.jsxs("label",{className:"cursor-pointer px-4 py-3  font-opensans rounded-xl border text-sm font-medium "+(te===t?"bg-customOrange text-white":"bg-gray-100 text-gray-700"),onClick:()=>ae(t),children:[t," weeks"]},t)))}),e.jsx("button",{onClick:()=>{te&&(ee(!0,te),xe())},disabled:!te,className:"w-full py-3 relative text-sm font-opensans -bottom-28 rounded-full font-medium "+(te?"bg-customOrange text-white":"bg-gray-300 text-gray-200 cursor-not-allowed"),children:"Save and continue"})]})]}),6===I&&"virtual"===C.marketPlaceType&&e.jsxs("div",{className:"p-2 mt-3 ",children:[e.jsx("h2",{className:"text-xs text-customOrange font-light font-opensans mb-3",children:"Step 5: ID verification"}),e.jsx(R,{step:5}),e.jsxs("h3",{className:"text-md mt-3 font-semibold font-opensans flex items-center mb-3",children:[e.jsx(w,{className:"w-5 h-5 mr-2 text-gray-600"}),"ID Verification"]}),e.jsx("div",{className:"relative mb-2 font-opensans",children:e.jsxs("select",{name:"idVerification",value:W,onChange:E,className:"w-full h-10 px-4 pr-10 border border-gray-300 rounded-lg bg-white text-gray-700 text-left appearance-none focus:outline-none focus:ring-2 focus:ring-customOrange",style:{backgroundImage:"url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22%23666666%22 viewBox=%220 0 20 20%22><path d=%22M5.516 7.548l4.486 4.486 4.485-4.486a.75.75 0 01 1.06 1.06l-5.015 5.015a.75.75 0 01-1.06 0l-5.015-5.015a.75.75 0 01-1.06-1.06z%22 /></svg>')",backgroundPosition:"right 1rem center",backgroundRepeat:"no-repeat",backgroundSize:"1rem"},children:[e.jsx("option",{value:"",children:"Select Verification Document"}),e.jsx("option",{value:"NIN",children:"NIN"}),e.jsx("option",{value:"International Passport",children:"International Passport"}),e.jsx("option",{value:"CAC",children:"CAC"}),e.jsx("option",{value:"School ID",children:"School ID"}),e.jsx("option",{value:"Work ID",children:"Work ID"})]})}),e.jsxs("h3",{className:"text-md mt-3 font-semibold font-opensans mb-3 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-black"}),"Upload ID"]}),e.jsx("div",{className:"border-2 border-customBrown border-dashed rounded-lg h-48 w-full text-center mb-6",children:J?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:"string"==typeof J?J:URL.createObjectURL(J),alt:"Uploaded ID",className:"w-full h-full object-cover rounded-lg"}),de&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 rounded-lg",children:e.jsx(i,{strokeColor:"orange",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0})}),!de&&e.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-customBrown text-white rounded-full p-1",onClick:()=>{ie(null),S({...C,idImage:null})},children:e.jsx(b,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"border-dashed rounded-lg h-48 w-full text-center border-opacity-20 mb-6 flex flex-col justify-center items-center",children:de?e.jsx(i,{strokeColor:"orange",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}):e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"idImageUpload",className:"cursor-pointer",children:e.jsx(v,{size:54,className:"text-customOrange opacity-40"})}),e.jsx("input",{type:"file",className:"hidden",onChange:K,id:"idImageUpload",disabled:de}),e.jsx("label",{htmlFor:"idImageUpload",className:"text-customOrange opacity-40 font-opensans cursor-pointer text-sm",children:"Upload ID image"})]})})}),e.jsx(j.button,{type:"submit",className:"w-11/12 h-12 fixed bottom-6 left-0 right-0 mx-auto flex justify-center font-opensans items-center text-white rounded-full "+(W&&J?"bg-customOrange":"bg-customOrange opacity-20"),onClick:Y,disabled:!W||!J||ue,children:ue?e.jsx(i,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):"Complete Profile"})]})]})})};const K=()=>{const[a,i]=t.useState(!1),[c,d]=t.useState(2),[u,m]=t.useState(!1),[p,h]=t.useState({shopName:"",categories:[],description:"",marketPlaceType:"virtual",coverImage:null,coverImageUrl:"",socialMediaHandle:{instagram:"",twitter:"",tiktok:"",facebook:""},location:{lat:null,lng:null},Address:"",marketPlace:"",complexNumber:"",daysAvailability:[],openTime:"",closeTime:"",pickupAddress:"",pickupLat:null,pickupLng:null,idVerification:"",idImage:null,idImageUrl:"",deliveryPreference:"self",needsDeliveryPreference:!0,bankDetails:{bankName:"",accountNumber:"",accountName:""},stockpile:null}),[x,g]=t.useState({bankName:"",accountNumber:"",accountName:""}),[f,b]=t.useState(""),[v,j]=t.useState(""),[k,N]=t.useState(null),[w,F]=t.useState(1),[z,$]=t.useState(null),[V,R]=t.useState(!1),[G,K]=t.useState(!1),[Y,_]=t.useState(!1),[q,Q]=t.useState(null),[X,Z]=t.useState(null),[ee,te]=t.useState(!1),ae=C(),{openChat:se}=S(),ne=()=>{d(c+1)},oe=async e=>{var t;e.preventDefault(),i(!0);const a=[];if(p.marketPlaceType||a.push("Marketplace Type"),"virtual"===p.marketPlaceType&&(p.shopName||a.push("Shop Name"),p.categories.length||a.push("Categories"),p.description||a.push("Description"),p.socialMediaHandle.instagram||p.socialMediaHandle.facebook||p.socialMediaHandle.tiktok||p.socialMediaHandle.twitter||a.push("Social Media Handles"),p.coverImageUrl||a.push("Cover Image"),p.deliveryMode||a.push("Delivery Mode"),p.stockpile||a.push("Stockpile Setup"),p.idVerification||a.push("ID Verification"),p.idImage||a.push("ID Image")),a.length)return y.error(`Please complete the following fields: ${a.join(", ")}`,{className:"custom-toast"}),void i(!1);try{const e=P().currentUser;if(!e)throw new Error("User is not authenticated");const a=p.shopName.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),d=p.shopName.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),u=s(n(o,"vendors"),r("shopName","==",a));if(!(await l(u)).empty)return y.error("Shop name is already taken. Please choose another one.",{className:"custom-toast"}),void i(!1);const m={vendorId:e.uid,name:a,accountNumber:x.accountNumber,bankCode:x.bankCode};let h=null;const g="9cac075ea03553597625b06532dc88a6",f="https://prod.mythriftpayments.site/api/v1";try{const e=await fetch(`${f}/transfer-recipient`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(m)}),a=await e.json(),s=null==(t=a.data)?void 0:t.recipientCode;if(!e.ok||!s)throw new Error(a.message||"Failed to create transfer recipient");h=s}catch(c){return y.error(c.message,{className:"custom-toast"}),void i(!1)}const b={...p,shopName:a,profileComplete:!0,isDeactivated:!1,slug:d,bankDetails:{...x},recipientCode:h,walletSetup:!1,badge:"Newbie"};await O(M(o,"vendors",e.uid),b,{merge:!0}),y.success("Profile completed successfully!",{className:"custom-toast"}),ae("/vendordashboard")}catch(c){y.error("Error completing profile: "+c.message,{className:"custom-toast"})}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Complete Your Profile - My Thrift",description:"Complete your vendor profile on My Thrift",url:"https://www.shopmythrift.store/complete-profile"}),e.jsxs("section",{className:"",children:[e.jsx("div",{children:e.jsx("div",{className:"flex items-center justify-end space-x-2",onClick:()=>{se()},children:e.jsxs("h2",{className:"text-xs  font-normal  underline font-opensans text-customOrange capitalize",children:["Having issues?"," ",e.jsx("span",{className:"no-underline",children:"Contact support"})]})})}),e.jsx(W,{children:ee?e.jsx(B,{}):e.jsxs(E,{className:"",onSubmit:oe,children:[c>2&&e.jsx("button",{type:"button",onClick:()=>{5!==c||"virtual"!==p.marketPlaceType||2!==w?d((e=>Math.max(2,e-1))):F(1)},className:" text-gray-800 mt-4",children:e.jsx(D,{size:25})}),"virtual"===p.marketPlaceType&&e.jsx(J,{vendorData:p,setVendorData:h,step:c,setStep:d,handleInputChange:e=>{const{name:t,value:a}=e.target;h({...p,[t]:a})},handleNextStep:ne,setShowDropdown:m,showDropdown:u,categories:["Thrifts","Mens","Womens","Books","Dairies","Underwears","Y2K","Jewelry","Kids","Trads","Dresses","Gowns","Shoes","Accessories","Bags","Sportswear","Formal","Casual","Vintage","Brands","Perfumes","Watches","Denim","Hoodies","Sweaters","Scarves","Sneakers","Caps","Athletic Wear","Belts","Earrings","Bracelets","Handcrafted Jewelry","Coats","Trench Coats","Loungewear","Leather Goods","Sunglasses","Necklaces","Statement Pieces","Oversized Clothing","Graphic Tees","Patchwork Denim","Handbags","Brogues","Sandals","Fragrances","Essential Oils","Luxury Jewelry","Heels","Crossbody Bags","Rings"],bankDetails:x,handleBankDetailsChange:e=>{const{name:t,value:a}=e.target;g({...x,[t]:a})},deliveryMode:f,handleDeliveryModeChange:e=>{b(e),h({...p,deliveryMode:e})},stockpile:z,stockpileStep:w,setStockpileStep:F,handleStockpileChoice:(e,t=null)=>{if(!e)return $({enabled:!1}),h((e=>({...e,stockpile:{enabled:!1,durationInWeeks:null}}))),void ne();$((e=>({...e,enabled:!0,durationInWeeks:t??(null==e?void 0:e.durationInWeeks)??null}))),h((e=>{var a;return{...e,stockpile:{enabled:!0,durationInWeeks:t??(null==(a=null==e?void 0:e.stockpile)?void 0:a.durationInWeeks)??null}}})),null==t&&F(2)},duration:X,setDuration:Z,idVerification:v,handleIdVerificationChange:e=>{const t=e.target.value;j(t),h({...p,idVerification:t})},idImage:k,setIdImage:N,isIdImageUploading:V,isCoverImageUploading:G,handleIdImageUpload:async e=>{const t=e.target.files[0];if(t&&t.size>3145728)y.error("File size exceeds 3MB. Please upload a smaller image.");else try{R(!0);const e=P().currentUser;if(!e)throw new Error("User is not authenticated");const a=L(),s=U(a,`vendorImages/${e.uid}/idImage`);await A(s,t);const n=await T(s);N(n),h({...p,idImage:n})}catch(a){y.error("Error uploading ID image: "+a.message)}finally{R(!1)}},handleImageUpload:async e=>{const t=e.target.files[0];if(t)if(t.size>3145728)y.error("File size exceeds 3MB. Please upload a smaller image.");else try{K(!0);const e=P().currentUser;if(!e)throw new Error("User is not authenticated");const a=e.uid,s=L(),n=U(s,`vendorImages/${a}/coverImage`);await A(n,t);const r=await T(n);h((e=>({...e,coverImageUrl:r})));const l=M(o,"vendors",a);await H(l,{coverImageUrl:r}),y.success("Image uploaded successfully!")}catch(a){y.error(`Error uploading image: ${a.message}`)}finally{K(!1)}else y.error("No file selected. Please choose an image.")},handleSocialMediaChange:e=>{const{name:t,value:a}=e.target;let s=a;!a||a.startsWith("http://")||a.startsWith("https://")||(s="https://"+a),h({...p,socialMediaHandle:{...p.socialMediaHandle,[t]:s}})},isLoading:a,handleProfileCompletion:oe,setBankDetails:g,showBankDropdown:Y,setShowBankDropdown:_,selectedBank:q,setSelectedBank:Q})]})})]})]})};export{K as default};
