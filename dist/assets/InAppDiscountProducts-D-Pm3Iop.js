import{u as e,f as t,h as s,i as o,r,eG as n,j as c,S as a,Q as i,bs as l,aM as d,bu as x}from"./index-CvIXhaMv.js";const h=()=>{const{discountName:h}=e(),m=t(),u=s(),{products:p,loading:f,error:g}=o((e=>e.discountProducts));r.useEffect((()=>{0===p.length&&m(n())}),[m,p.length]);const j=p.filter((e=>{if(e.discount&&e.discount.selectedDiscount&&e.discount.selectedDiscount.name){return e.discount.selectedDiscount.name.replace(/\s+/g,"-").toLowerCase()===h}return!1})),[w,N]=r.useState("high-to-low"),[b,C]=r.useState("all"),[v,k]=r.useState(!1),O=r.useRef(null);r.useEffect((()=>{function e(e){O.current&&!O.current.contains(e.target)&&"filterIcon"!==e.target.id&&k(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[O]);const S=e=>{N(e)},y=e=>{C(e)};let L=[...j];return"all"!==b&&(L=L.filter((e=>e.condition&&e.condition.toLowerCase()===b))),L.sort(((e,t)=>"high-to-low"===w?t.price-e.price:e.price-t.price)),c.jsxs(c.Fragment,{children:[c.jsx(a,{title:`Shop ${h} | ShopMyThrift`,description:`Shop ${h} on ShopMyThrift`,url:`https://www.shopmythrift.store/inapp-discounts/${h}`}),c.jsxs("div",{className:"relative  py-6",children:[c.jsxs("div",{className:"sticky top-0 bg-white z-50 border-b flex items-center justify-between mb-3 py-6 px-2",children:[c.jsx(i,{className:"text-2xl cursor-pointer",onClick:()=>u(-1)}),c.jsx("h1",{className:"text-xl font-opensans font-semibold",children:h.replace(/-/g," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}),c.jsx(l,{id:"filterIcon",className:"text-xl cursor-pointer",onClick:()=>k(!v)}),v&&c.jsxs("div",{ref:O,className:"absolute right-4 bg-white shadow-[0_0_10px_rgba(0,0,0,0.1)] top-14 p-3 w-40 h-auto rounded-2xl z-50 flex flex-col gap-2 font-opensans",children:[c.jsx("p",{className:"text-customOrange text-xs",children:"Price:"}),c.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("high-to-low"===w?"text-customOrange":""),onClick:()=>S("high-to-low"),children:"High to Low"}),c.jsx("hr",{className:"text-slate-300"}),c.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("low-to-high"===w?"text-customOrange":""),onClick:()=>S("low-to-high"),children:"Low to High"}),c.jsx("p",{className:"text-customOrange text-xs",children:"Condition:"}),c.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("all"===b?"text-customOrange":""),onClick:()=>y("all"),children:"All"}),c.jsx("hr",{className:"text-slate-300"}),c.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("brand new"===b?"text-customOrange":""),onClick:()=>y("brand new"),children:"Brand New"}),c.jsx("hr",{className:"text-slate-300"}),c.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("thrift"===b?"text-customOrange":""),onClick:()=>y("thrift"),children:"Thrift"}),c.jsx("hr",{className:"text-slate-300"}),c.jsx("span",{className:"text-sm ml-2 cursor-pointer "+("defect"===b?"text-customOrange":""),onClick:()=>y("defect"),children:"Defect"})]})]}),c.jsx("div",{className:"px-2",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:f?c.jsx(d,{height:200,width:200,count:8}):g?c.jsxs("div",{children:["Error: ",g]}):L.length>0?L.map((e=>c.jsx(x,{product:e},e.id))):c.jsx("div",{className:"col-span-full text-center font-opensans text-sm",children:"No products found for the selected filter."})})})]})]})};export{h as default};
