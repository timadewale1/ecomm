import{r as e,bh as s,bB as t,h as a,j as r,S as l,Q as c,a2 as i,_ as n,s as o,ab as d,d as u,a as m,bD as h,bE as x,bF as b}from"./index-CvIXhaMv.js";const f=()=>{const[f,g]=e.useState(""),[p,j]=e.useState(""),[y,v]=e.useState([]),[w,N]=e.useState(""),[k,S]=e.useState(!1),[O,C]=e.useState(!1),F=s(),E=t();e.useEffect((()=>{const e=F.currentUser;e&&(N(e.email),C(!0))}),[F]);const P=a();return r.jsxs(r.Fragment,{children:[r.jsx(l,{title:"Submit Feedback - My Thrift",description:"Submit your feedback to the My Thrift team!",url:"https://www.shopmythrift.store/send-us-feedback"}),r.jsxs("div",{className:"flex flex-col items-center bg-gray-50  pb-4 font-opensans text-gray-800",children:[r.jsx("div",{className:"sticky top-0 bg-white z-10 flex items-center justify-between w-full px-3 py-4 border-b shadow-sm",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(c,{className:"text-2xl text-black cursor-pointer",onClick:()=>P(-1)}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Send Us Feedback"})]})}),r.jsxs("div",{className:"w-full max-w-3xl bg-white  px-2",children:[r.jsxs("div",{className:"bg-customOrange flex flex-col relative text-center p-10  rounded-md justify-center items-center h-32 mb-3",children:[r.jsx("div",{className:"absolute top-0 right-0",children:r.jsx("img",{src:"./Vector.png",alt:"",className:"w-16 h-24"})}),r.jsx("div",{className:"absolute bottom-0 left-0",children:r.jsx("img",{src:"./Vector2.png",alt:"",className:"w-16 h-16"})}),r.jsx("h1",{className:"text-3xl text-white font-bold mb-2",children:"Submit Your Feedback"})]}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("label",{className:"text-sm font-medium font-opensans text-gray-700",children:["Whats the issue?",r.jsxs("select",{value:f,onChange:e=>g(e.target.value),className:"w-full p-2 border focus:outline-customOrange border-gray-300 rounded mt-1",children:[r.jsx("option",{value:"",children:"Select a type"}),r.jsx("option",{value:"Complaint",children:"Complaint"}),r.jsx("option",{value:"Suggestion",children:"Suggestion"}),r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Bug",children:"Noticed a Bug"}),r.jsx("option",{value:"Payment",children:"Payment Issues"})]})]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Explain better:",r.jsx("textarea",{value:p,onChange:e=>j(e.target.value),className:"w-full p-2 border focus:outline-customOrange border-gray-300 rounded mt-1 resize-none",rows:"5",placeholder:"Describe your feedback here..."})]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Email Address:",r.jsx("input",{type:"email",value:w,onChange:e=>N(e.target.value),className:"w-full p-2 border focus:outline-customOrange border-gray-300 rounded mt-1 "+(O?"bg-gray-200":""),readOnly:O,placeholder:"Enter your email address"})]}),r.jsx("div",{className:"text-sm",children:"Attach up to 3 pictures or screenshots to help us better understand you (Optional):"}),r.jsx("div",{className:"overflow-x-auto ",children:r.jsxs("div",{className:"flex space-x-4",children:[y.map(((e,s)=>r.jsxs("div",{className:"relative w-36 h-36",children:[r.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover rounded-lg border-2 border-dashed border-customOrange"}),r.jsx("button",{onClick:()=>(e=>{v((s=>s.filter(((s,t)=>t!==e))))})(s),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 text-xs w-7 h-7",children:"‚àí"})]},s))),y.length<3&&r.jsxs("label",{className:"w-36 h-36 rounded-lg border-2 border-dashed border-customOrange flex items-center justify-center cursor-pointer",children:[r.jsx("span",{className:"text-customOrange",children:"+"}),r.jsx("input",{type:"file",onChange:e=>{const s=e.target.files[0];s&&y.length<3&&v((e=>[...e,s]))},className:"hidden"})]})]})})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:async()=>{if(f&&p&&(O||w.trim()))if(O||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim())){S(!0);try{const e=F.currentUser,s=`${(null==e?void 0:e.uid)||"guest"}-${Date.now()}`;let t=[];y.length>0&&(t=await(async(e,s)=>{const t=[];for(const r of e)try{const e=h(E,`feedbacks/${s}-${r.name}`);await x(e,r);const a=await b(e);t.push(a)}catch(a){throw new Error("Failed to upload attachment.")}return t})(y,s));const a={userId:(null==e?void 0:e.uid)||"guest",email:w,feedbackType:f,feedbackText:p,attachmentUrls:t,submittedAt:o()};await d(u(m,"feedbacks",s),a),n.success("Feedback submitted successfully!"),g(""),j(""),v([]),O||N("")}catch(e){n.error("Failed to submit feedback. Please try again later.")}finally{S(!1)}}else n.error("Please provide a valid email address.");else n.error("Please fill in all required fields.")},disabled:k,className:"w-full h-12 rounded-full bg-customOrange text-white font-medium text-sm hover:bg-customDeepOrange flex items-center justify-center",children:k?r.jsx(i,{width:"25",height:"25",strokeColor:"white",strokeWidth:"4"}):"Submit Feedback"})}),r.jsx("div",{className:"my-3 text-center text-xs text-customOrange",children:"‚ìò Your feedback helps us improve our service. Thank you for taking the time to share your thoughts with us.üòÅüß°"})]})]})]})};export{f as default};
