import{r as e,j as s,M as o,eY as t,bm as r,ay as n,d as a,a as l,o as i,ac as c}from"./index-CvIXhaMv.js";o.setAppElement("#root");const d=({isOpen:n,onClose:a,onAnswer:l})=>{const[i,c]=e.useState("ask"),[d,u]=e.useState(null);return s.jsx(o,{isOpen:n,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,onRequestClose:()=>{},contentLabel:"Pickup Prompt",style:{content:{position:"absolute",bottom:0,left:0,right:0,top:"auto",borderRadius:"20px 20px 0 0",padding:"16px",backgroundColor:"#ffffff",border:"none",height:"ask"===i?"50%":"80%",animation:"slide-up 0.3s ease-in-out",overflow:"hidden"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:3e3}},children:s.jsxs("div",{className:"flex flex-col h-full",children:["ask"===i&&s.jsxs("div",{className:"flex-1  flex flex-col justify-center items-center px-4",children:[s.jsx(t,{className:"text-9xl -translate-y-12 text-customRichBrown"}),s.jsx("h2",{className:"font-opensans text-lg font-semibold mb-4 text-center",children:"Do you offer pickup for your store?"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:async()=>{u(!1),await l(!1),a()},className:"px-6 py-2 border border-customRichBrown text-customRichBrown rounded-full font-opensans",children:"No"}),s.jsx("button",{onClick:()=>{u(!0),c("picker")},className:"px-6 py-2 bg-customOrange text-white rounded-full font-opensans",children:"Yes"})]})]}),"picker"===i&&!0===d&&s.jsxs("div",{className:"flex-1 flex flex-col px-4 pt-2",children:[s.jsx("h2",{className:"font-opensans text-lg font-semibold mb-1",children:"Where will buyers pick up?"}),s.jsx("p",{className:"text-xs mt-3 font-opensans text-gray-600 mb-3",children:"This pickup location is where you'll meet buyers who choose to collect their order directly from you. It can be somewhere outside your house like your gate, curb, or a nearby public place somewhere you’re comfortable meeting people."}),s.jsx("hr",{className:"border-gray-300 mb-4"}),s.jsxs("p",{className:"text-xs font-opensans text-gray-600 mb-3",children:[s.jsx("strong",{children:"Note:"})," This is ",s.jsx("u",{children:"not"})," the same as your main delivery address. We’ll still use the address you provided earlier to arrange delivery with our logistics partners."]}),s.jsx("p",{className:"text-xs font-satoshi text-customOrange font-semibold mb-4",children:"We strongly advise against using your exact home address as your pickup location to prevent doxxing or privacy issues."}),s.jsx("div",{className:"flex-1",children:s.jsx(r,{initialAddress:"",onLocationSelect:async({address:e,lat:s,lng:o})=>{await l(!0,{address:e,lat:s,lng:o}),a()}})})]})]})})},u=({children:o})=>{const{currentUser:t}=n(),[r,u]=e.useState(!1);e.useEffect((()=>{if(!t)return;const e=a(l,"vendors",t.uid),s=i(e,(e=>{const s=e.data()||{},o=!0===s.isApproved&&"Delivery"===s.deliveryMode&&!0!==s.offerPickupPrompt;u(o)}));return()=>s()}),[t]);const p=async(e,s)=>{if(!t)return;const o=a(l,"vendors",t.uid),r={offerPickupPrompt:!0};e&&s&&(r.deliveryMode="Delivery & Pickup",r.pickupAddress=s.address,r.pickupLat=s.lat,r.pickupLng=s.lng);try{await c(o,r)}catch(n){}finally{u(!1)}};return s.jsxs(s.Fragment,{children:[o,t&&s.jsx(d,{isOpen:r,onClose:()=>{p(!1)},onAnswer:p})]})};export{u as default};
