import{k as e,h as t,f as s,i as r,r as a,eU as o,eV as l,j as i,S as d,eW as n,Q as c,aM as h,bu as x,a2 as m}from"./index-CvIXhaMv.js";const u=()=>{var u;const p=e(),g=t(),f=s(),{products:j}=p.state||{},y=(null==(u=null==j?void 0:j[0])?void 0:u.productType)||"Products",w=y,b=r((e=>e.categoryProducts.data[w]))||{products:[],lastVisible:null,noMoreProducts:!1},{products:v,lastVisible:N,noMoreProducts:M}=b,_=r((e=>e.categoryProducts.loading)),P=r((e=>e.categoryProducts.error)),k=r((e=>e.categoryMetadata.data[w])),C=r((e=>e.categoryMetadata.loading)),E=r((e=>e.categoryMetadata.error)),[S,T]=a.useState(0),[$,L]=a.useState(!0);a.useEffect((()=>{0===v.length&&f(o({category:w,loadMore:!1})),k||f(l())}),[w,v,k,f]);a.useEffect((()=>{const e=((e,t)=>{let s;return(...r)=>{clearTimeout(s),s=setTimeout((()=>e(...r)),t)}})((()=>{const e=window.scrollY;L(e<=0||e<S),T(e),window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-100&&(_||M||f(o({category:w,loadMore:!0})))}),50);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[f,_,M,S,w]);const V=v.filter((e=>e.name.toLowerCase().includes(""))).sort(((e,t)=>0)),z="https://res.cloudinary.com/dtaqusjav/image/upload/v1750544620/ChatGPT_Image_Jun_18_2025_10_20_31_PM_ckhzix.png",F=`Explore our collection of ${w.toLowerCase()}`;return i.jsxs(i.Fragment,{children:[i.jsx(d,{title:`Shop ${y} | ShopMyThrift`,description:`Shop ${y} on ShopMyThrift`,url:`https://www.shopmythrift.store/producttype/${y}`}),i.jsx(n,{baseColor:"#e5e7eb",highlightColor:"#f3f4f6",children:i.jsxs("div",{className:" h-full",children:[i.jsxs("div",{className:"bg-blue-50 py-4",children:[i.jsx("div",{className:"fixed top-4 left-4 z-50 bg-white/50 backdrop-blur-md p-2 rounded-full shadow-md border border-gray-200 transition-opacity duration-300 "+($?"opacity-100":"opacity-0 pointer-events-none"),children:i.jsx(c,{className:"text-2xl cursor-pointer text-gray-800",onClick:()=>g(-1)})}),i.jsx("div",{className:"pb-12",children:C?i.jsxs("div",{className:"text-center flex justify-center items-center flex-col mt-4 pb-5",children:[i.jsx(h,{width:240,height:240,className:"translate-y-5 rounded-xl shadow-xl mb-4"}),i.jsx(h,{width:120,height:24,className:"mt-10 mb-2"}),i.jsx(h,{width:200,height:16})]}):E?i.jsx("p",{className:"text-red-600 text-center",children:"Failed to load category details."}):i.jsxs("div",{className:"text-center flex justify-center items-center flex-col mt-4 pb-5",children:[i.jsx("h1",{className:"text-xl font-opensans mt-10 font-semibold",children:w}),i.jsx("img",{src:(null==k?void 0:k.headerImageUrl)||z,alt:`${w} header`,className:"w-60 h-60 object-cover translate-y-5 rounded-xl shadow-xl mb-4",onError:e=>e.target.src=z}),i.jsx("div",{className:"text-center px-20 font-opensans mt-6",children:i.jsx("p",{className:"text-gray-600 font-opensans text-xs",children:(null==k?void 0:k.subtitle)||F})})]})})]}),i.jsx("div",{className:"grid grid-cols-2 px-4 bg-white rounded-t-3xl -translate-y-7 py-5 sm:grid-cols-3 md:grid-cols-4 gap-4",children:_&&0===V.length?Array.from({length:4}).map(((e,t)=>i.jsxs("div",{className:"flex flex-col",children:[i.jsx(h,{height:200,className:"rounded-md"}),i.jsx(h,{height:20,width:"80%",className:"mt-2"}),i.jsx(h,{height:16,width:"60%"})]},t))):V.map((e=>i.jsx(x,{product:e},e.id)))}),_&&V.length>0&&i.jsx("div",{className:"flex justify-center items-center my-4",children:i.jsx(m,{strokeColor:"#f9531e",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})}),P&&i.jsx("p",{className:"text-red-600 font-opensans font-semibold mt-4 text-center",children:"we are working to fix this"})]})})]})};export{u as default};
