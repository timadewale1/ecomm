import{h as a,f as e,i as s,R as t,eH as i,j as r,d as o,a as n,ac as x,L as l,r as d,l as c,q as m,e7 as u,w as k,c as p,o as h,S as y,cQ as f}from"./index-CvIXhaMv.js";import{g}from"./index-DV9LhBdq.js";function b({inquiry:l}){const d=a(),c=e(),m=s((a=>a.vendorChats.profiles[l.customerId]));t.useEffect((()=>{m||c(i(l.customerId))}),[c,l.customerId,m]);const u=l.createdAt?l.createdAt.toDate().toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return r.jsxs("div",{className:"flex items-center p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{if(d(`/vchats/${l.id}`),!l.hasRead){const a=o(n,"inquiries",l.id);x(a,{hasRead:!0}).catch((a=>{}))}},children:[(null==m?void 0:m.photoURL)?r.jsx("img",{src:m.photoURL,alt:"avatar",className:"w-12 h-12 rounded-full object-cover mr-4"}):r.jsx(g,{className:"w-12 h-12 text-gray-400 mr-4"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold font-opensans text-gray-800 truncate",children:(null==m?void 0:m.displayName)||"Loading…"}),r.jsx("div",{className:"text-sm font-opensans text-gray-600 truncate mt-1",children:l.question})]}),r.jsxs("div",{className:"flex items-center ml-4",children:[r.jsx("div",{className:"text-xs text-gray-400 font-opensans whitespace-nowrap",children:u}),!l.hasRead&&r.jsx("span",{className:"w-3 h-3 bg-customOrange rounded-full ml-2"})]})]})}const v=({status:a})=>{const e={pending:"bg-yellow-100 text-yellow-800",countered:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-700";return r.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-opensans font-semibold ${e}`,children:a})};function j({offer:l}){const d=a(),c=e(),m=s((a=>a.vendorChats.profiles[l.buyerId]));t.useEffect((()=>{m||c(i(l.buyerId))}),[m,l.buyerId,c]);const u=l.createdAt?l.createdAt.toDate().toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",k=`I want to get this item for ${p=l.amount,Number(p||0).toLocaleString("en-NG",{style:"currency",currency:"NGN",maximumFractionDigits:0})}`;var p;return r.jsxs("div",{className:"flex items-center p-3 border-b cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{d(`/vchats/${l.id}?type=offer`),l.vendorRead||x(o(n,"offers",l.id),{vendorRead:!0}).catch((a=>{}))},children:[(null==m?void 0:m.photoURL)?r.jsx("img",{src:m.photoURL,alt:"avatar",className:"w-12 h-12 rounded-full object-cover mr-4"}):r.jsx(g,{className:"w-12 h-12 text-gray-400 mr-4"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"font-semibold font-opensans text-gray-800 truncate",children:(null==m?void 0:m.displayName)||"Loading…"}),r.jsx(v,{status:l.status})]}),r.jsxs("div",{className:"text-sm font-opensans text-gray-600 truncate mt-0.5",children:[l.productName||"Product"," • ",k]})]}),r.jsxs("div",{className:"flex items-center ml-4",children:[r.jsx("div",{className:"text-xs text-gray-400 font-opensans whitespace-nowrap",children:u}),!l.vendorRead&&r.jsx("span",{className:"w-3 h-3 bg-customOrange rounded-full ml-2"})]})]})}const N={nm:"Chat",ddd:0,h:500,w:500,meta:{g:"LottieFiles AE 0.1.20"},layers:[{ty:0,nm:"Pre-comp 3",sr:1,st:0,op:300.00001221925,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[86,402,0],ix:1},s:{a:1,k:[{o:{x:.07,y:0},i:{x:0,y:1},s:[0,0,100],t:0},{o:{x:.167,y:0},i:{x:0,y:1},s:[110,110,100],t:4},{s:[90,90,100],t:6.00000024438501}],ix:6},sk:{a:0,k:0},p:{a:0,k:[86,402,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],w:500,h:500,refId:"comp_0",ind:1}],v:"5.5.7",fr:29.9700012207031,op:90.0000036657751,ip:0,assets:JSON.parse('[{"nm":"","id":"comp_0","layers":[{"ty":4,"nm":"Layer 4 Outlines","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[18.287,18.249,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[320.682,238.508,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[0],"t":22},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":30},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":38},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":46},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":54},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":62},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":70},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":78},{"s":[0],"t":86.0000035028518}],"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":4,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[-10.1,0],[0,-10.079],[10.101,0],[0,10.079]],"o":[[10.101,0],[0,10.079],[-10.1,0],[0,-10.079]],"v":[[-0.001,-18.249],[18.287,0],[-0.001,18.249],[-18.288,0]]},"ix":2}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[18.287,18.249],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":1},{"ty":4,"nm":"Layer 5 Outlines","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[18.287,18.249,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[242.156,238.508,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0,"y":1},"s":[0],"t":14},{"o":{"x":0.167,"y":0},"i":{"x":0,"y":1},"s":[100],"t":22},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":30},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":38},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":46},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":54},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":62},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":70},{"s":[0],"t":78.0000031770051}],"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":4,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[-10.1,0],[0,-10.079],[10.1,0],[0,10.079]],"o":[[10.1,0],[0,10.079],[-10.1,0],[0,-10.079]],"v":[[0,-18.249],[18.288,0],[0,18.249],[-18.287,0]]},"ix":2}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[18.288,18.249],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":2},{"ty":4,"nm":"Layer 6 Outlines","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[18.287,18.249,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[153.902,238.508,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.179,"y":0},"i":{"x":0,"y":1},"s":[0],"t":6},{"o":{"x":0.167,"y":0},"i":{"x":0,"y":1},"s":[100],"t":14},{"o":{"x":0.167,"y":0},"i":{"x":0,"y":1},"s":[0],"t":22},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":30},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":38},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":46},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[0],"t":54},{"o":{"x":0.018,"y":0},"i":{"x":0,"y":1},"s":[100],"t":62},{"s":[0],"t":70.0000028511585}],"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":4,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[-10.1,0],[0,-10.079],[10.1,0],[0,10.079]],"o":[[10.1,0],[0,10.079],[-10.1,0],[0,-10.079]],"v":[[0,-18.249],[18.288,0],[0,18.249],[-18.288,0]]},"ix":2}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[18.287,18.249],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":3},{"ty":4,"nm":"Layer 3 Outlines","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[233.803,234.255,0],"ix":1},"s":{"a":0,"k":[90,90,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[249.232,250.251,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":2,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[29.279,0.243],[0.557,-101.31],[-13.847,-26.514],[0,0],[1.872,-6.113],[3.495,-14.465],[-7.888,0.182],[-13.388,4.828],[-5.558,-2.272],[-0.368,0],[-47.222,89.633],[89.634,47.221]],"o":[[-101.31,-0.557],[-0.164,29.913],[0,0],[3.046,5.621],[-5.241,13.929],[0,7.338],[13.893,-3.089],[5.788,-1.595],[5.081,2.439],[89.634,47.222],[47.221,-89.635],[-25.904,-13.647]],"v":[[-11.692,-196.198],[-196.139,-13.768],[-175.303,72.158],[-171.634,79.313],[-169.8,97.656],[-182.916,140.288],[-172.937,151.644],[-131.974,139.756],[-114.474,140.802],[-98.716,149.533],[149.082,72.739],[72.286,-175.06]]},"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":2,"lj":2,"ml":1,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":20,"ix":5},"c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":3}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[233.803,234.255],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"tm","bm":0,"hd":false,"mn":"ADBE Vector Filter - Trim","nm":"Trim Paths 1","ix":2,"e":{"a":0,"k":0,"ix":2},"o":{"a":0,"k":184,"ix":3},"s":{"a":1,"k":[{"o":{"x":0.13,"y":0},"i":{"x":0,"y":1},"s":[0],"t":4},{"o":{"x":0.333,"y":0},"i":{"x":0.833,"y":1},"s":[100],"t":30},{"o":{"x":0.041,"y":0},"i":{"x":0,"y":1},"s":[100],"t":60},{"s":[0],"t":87.0000035435826}],"ix":1},"m":1}],"ind":4},{"ty":0,"nm":"Pre-comp 2","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[250,250,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[238,240,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":20,"ix":11}},"ef":[],"w":500,"h":500,"refId":"comp_1","ind":5}]},{"nm":"","id":"comp_1","layers":[{"ty":4,"nm":"Layer 6 Outlines 2","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[18.287,18.249,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[164.902,249.508,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":4,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[-10.1,0],[0,-10.079],[10.1,0],[0,10.079]],"o":[[10.1,0],[0,10.079],[-10.1,0],[0,-10.079]],"v":[[0,-18.249],[18.288,0],[0,18.249],[-18.288,0]]},"ix":2}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[18.287,18.249],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":1},{"ty":4,"nm":"Layer 4 Outlines 2","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[18.287,18.249,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[331.682,249.508,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":4,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[-10.1,0],[0,-10.079],[10.101,0],[0,10.079]],"o":[[10.101,0],[0,10.079],[-10.1,0],[0,-10.079]],"v":[[-0.001,-18.249],[18.287,0],[-0.001,18.249],[-18.288,0]]},"ix":2}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[18.287,18.249],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":2},{"ty":4,"nm":"Layer 5 Outlines 2","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[18.287,18.249,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[251.156,249.508,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":4,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[-10.1,0],[0,-10.079],[10.1,0],[0,10.079]],"o":[[10.1,0],[0,10.079],[-10.1,0],[0,-10.079]],"v":[[0,-18.249],[18.288,0],[0,18.249],[-18.287,0]]},"ix":2}},{"ty":"fl","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[18.288,18.249],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":3},{"ty":4,"nm":"Layer 3 Outlines 2","sr":1,"st":0,"op":300.00001221925,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[233.803,234.255,0],"ix":1},"s":{"a":0,"k":[90,90,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":0,"k":[261.232,262.251,0],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"hd":false,"mn":"ADBE Vector Group","nm":"Group 1","ix":1,"cix":2,"np":2,"it":[{"ty":"sh","bm":0,"hd":false,"mn":"ADBE Vector Shape - Group","nm":"Path 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[29.279,0.243],[0.557,-101.31],[-13.847,-26.514],[0,0],[1.872,-6.113],[3.495,-14.465],[-7.888,0.182],[-13.388,4.828],[-5.558,-2.272],[-0.368,0],[-47.222,89.633],[89.634,47.221]],"o":[[-101.31,-0.557],[-0.164,29.913],[0,0],[3.046,5.621],[-5.241,13.929],[0,7.338],[13.893,-3.089],[5.788,-1.595],[5.081,2.439],[89.634,47.222],[47.221,-89.635],[-25.904,-13.647]],"v":[[-11.692,-196.198],[-196.139,-13.768],[-175.303,72.158],[-171.634,79.313],[-169.8,97.656],[-182.916,140.288],[-172.937,151.644],[-131.974,139.756],[-114.474,140.802],[-98.716,149.533],[149.082,72.739],[72.286,-175.06]]},"ix":2}},{"ty":"st","bm":0,"hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"Stroke 1","lc":2,"lj":2,"ml":1,"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":20,"ix":5},"c":{"a":0,"k":[0.9765,0.3255,0.1176],"ix":3}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[233.803,234.255],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":4}]}]')},w=()=>r.jsx("div",{className:"flex justify-center items-center w-screen",children:r.jsx(l,{className:"w-24 h-24",animationData:N,loop:!0,autoplay:!0})});function A(){const[e,s]=d.useState([]),[i,o]=d.useState([]),[x,l]=d.useState(""),[g,v]=d.useState("offers"),N=a();d.useEffect((()=>{if(!c.currentUser)return void N("/login");const a=c.currentUser.uid,e=m(p(n,"inquiries"),k("vendorId","==",a),u("createdAt","desc")),t=h(e,(a=>{s(a.docs.map((a=>({id:a.id,...a.data()}))))})),i=m(p(n,"offers"),k("vendorId","==",a),u("createdAt","desc")),r=h(i,(a=>{o(a.docs.map((a=>({id:a.id,...a.data()}))))}));return()=>{t(),r()}}),[N]);const A=e.filter((a=>a.status===g||"offers"===g)).filter((a=>(a.question||"").toLowerCase().includes(x.toLowerCase()))),G=t.useMemo((()=>{var a,e,s,t,r;const o=new Map;for(const n of i){const i=`${n.buyerId}__${n.productId}`,x=o.get(i);if(x){const i=(null==(s=null==(e=null==(a=x.latest)?void 0:a.updatedAt)?void 0:e.toMillis)?void 0:s.call(e))??0;((null==(r=null==(t=null==n?void 0:n.updatedAt)?void 0:t.toMillis)?void 0:r.call(t))??0)>i&&(x.latest=n),n.vendorRead||(x.unread+=1)}else o.set(i,{threadKey:i,buyerId:n.buyerId,productId:n.productId,vendorId:n.vendorId,productName:n.productName,productCover:n.productCover,unread:n.vendorRead?0:1,latest:n})}return Array.from(o.values()).filter((a=>{var e;return`${a.productName||""} ${(null==(e=a.latest)?void 0:e.amount)?`i want to get this item for ₦${a.latest.amount}`:""}`.toLowerCase().includes(x.toLowerCase())})).sort(((a,e)=>{var s,t,i,r,o,n;return((null==(i=null==(t=null==(s=e.latest)?void 0:s.updatedAt)?void 0:t.toMillis)?void 0:i.call(t))??0)-((null==(n=null==(o=null==(r=a.latest)?void 0:r.updatedAt)?void 0:o.toMillis)?void 0:n.call(o))??0)}))}),[i,x]);return r.jsxs(r.Fragment,{children:[r.jsx(y,{title:"Messages - My Thrift",description:"Manage and view your chats and offers.",url:"https://www.shopmythrift.store/vchats"}),r.jsxs("div",{className:"max-w-xl mx-auto h-full flex flex-col",children:[r.jsxs("header",{className:"sticky top-0 bg-white z-10 p-4 relative",children:[r.jsx("h1",{className:"text-2xl font-medium font-ubuntu text-gray-800",children:"Message Box"}),r.jsx("span",{className:"absolute top-3 right-48 bg-customOrange text-[10px] text-white px-1 rounded-md font-bold",children:"Beta"})]}),r.jsx("div",{className:"px-4 py-2 bg-white border-gray-100 border-b",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"offers"===g?"Search offers...":"Search messages...",className:"w-full border border-gray-200 rounded-full px-4 py-2 pr-10 text-base font-opensans focus:outline-none focus:ring-2 focus:ring-customOrange",value:x,onChange:a=>l(a.target.value)}),r.jsx(f,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"})]})}),r.jsx("div",{className:"px-4 py-2 bg-white ",children:r.jsxs("div",{className:"inline-flex space-x-2",children:[r.jsx("button",{onClick:()=>v("offers"),className:"px-4 py-1 rounded-full text-sm font-medium font-opensans transition "+("offers"===g?"bg-customOrange text-white":"border border-gray-300 text-gray-600 hover:bg-gray-100"),children:"Offers"}),r.jsx("button",{onClick:()=>v("open"),className:"px-4 py-1 rounded-full text-sm font-medium font-opensans transition "+("open"===g?"bg-customOrange text-white":"border border-gray-300 text-gray-600 hover:bg-gray-100"),children:"Open"}),r.jsx("button",{onClick:()=>v("closed"),className:"px-4 py-1 rounded-full text-sm font-opensans transition "+("closed"===g?"bg-customOrange text-white":"border border-gray-300 font-medium text-gray-600 hover:bg-gray-100"),children:"Closed"})]})}),r.jsx("div",{className:"flex-1 overflow-auto ",children:"offers"===g?0===G.length?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-gray-500",children:[r.jsx(w,{}),r.jsx("p",{className:"font-opensans text-xs text-center text-gray-600",children:"You don’t have any offers yet. When a customer submits or responds to an offer, you’ll see it here."})]}):G.map((a=>r.jsx(j,{offer:a.latest,unreadCount:a.unread,onClick:()=>N(`/vchats/thread?type=offerThread&buyerId=${a.buyerId}&productId=${a.productId}`)},a.threadKey))):0===A.length?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-gray-500",children:[r.jsx(w,{}),"open"===g?r.jsx("p",{className:"font-opensans text-xs text-center text-gray-600",children:"You don’t have any open chats right now. When a customer wants to know more about one of your products, you’ll see it here. Please check your email spams as notifications may be there"}):r.jsx("p",{className:"font-opensans text-xs text-center text-gray-600",children:"You don’t have any closed chats yet. Once you reply to a question, it will appear here."})]}):A.map((a=>r.jsx(b,{inquiry:a},a.id)))})]})]})}export{A as default};
