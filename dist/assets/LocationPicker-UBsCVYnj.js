import{r as e,j as t,bY as o}from"./index-B6_tP4YQ.js";import{c as n}from"./index-YqizTpTw.js";function s({onLocationSelect:s}){const[r,a]=e.useState(""),[l,i]=e.useState([]),[c,d]=e.useState(!1),u=e.useRef(),g=e.useRef(),p=e.useRef();e.useEffect((()=>{window.google&&window.google.maps.places&&(g.current=new window.google.maps.places.AutocompleteService,p.current=new window.google.maps.Geocoder)}),[]),e.useEffect((()=>{const e=g.current;!e||r.length<3?i([]):e.getPlacePredictions({input:r,componentRestrictions:{country:"ng"}},((e,t)=>{t===window.google.maps.places.PlacesServiceStatus.OK?i(e):i([])}))}),[r]),e.useEffect((()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&i([])};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[]);return t.jsxs("div",{ref:u,style:{position:"relative",width:"100%"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx(n,{style:{position:"absolute",top:"50%",left:10,transform:"translateY(-50%)",color:"#999",fontSize:"20px"}}),t.jsx("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Enter your address",className:"w-full h-12 pl-10 pr-4 border border-gray-300 font-opensans rounded-md focus:outline-none focus:ring-2 focus:ring-customOrange"})]}),l.length>0&&t.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:200,overflowY:"auto",background:"#fff",border:"1px solid #ccc",borderTop:"none",margin:0,padding:0,listStyle:"none",zIndex:1e3,fontFamily:"Open Sans, sans-serif"},children:l.map((e=>t.jsxs("li",{onClick:()=>{return t=e,void new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:t.place_id,fields:["formatted_address","geometry"]},((e,t)=>{if(t===window.google.maps.places.PlacesServiceStatus.OK){const t=e.geometry.location.lat(),o=e.geometry.location.lng(),n=e.formatted_address;a(n),i([]),s({lat:t,lng:o,address:n})}}));var t},style:{padding:"10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:e=>e.target.style.background="#f97316",onMouseLeave:e=>e.target.style.background="#fff",className:"flex items-center font-opensans text-sm gap-2",children:[t.jsx(o,{className:"text-customOrange"})," ",e.description]},e.place_id)))}),t.jsx("div",{className:"border-b border-gray-200 mt-4"}),t.jsxs("button",{type:"button",onClick:()=>{navigator.geolocation?(d(!0),navigator.geolocation.getCurrentPosition((e=>{const t=e.coords.latitude,o=e.coords.longitude;p.current.geocode({location:{lat:t,lng:o}},((e,n)=>{if(d(!1),"OK"===n&&e[0]){const n=e[0].formatted_address;a(n),s({lat:t,lng:o,address:n})}else alert("Could not reverse geocode your location")}))}),(e=>{d(!1),alert("Failed to get your location")}))):alert("Geolocation not supported")},className:"flex items-center gap-2 text-sm text-customOrange font-opensans font-semibold py-2",children:[c?t.jsx("div",{className:"w-4 h-4 border-2 border-customOrange border-t-transparent rounded-full animate-spin"}):t.jsx(o,{style:{fontSize:"18px"}}),"Use current location"]})]})}export{s as L};
