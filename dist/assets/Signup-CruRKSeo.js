import{r as e,a as s,u as t,s as a,j as r,t as n,v as l,w as i,x as o,y as c,z as m,C as d,D as x,E as u,H as f,I as p,_ as h,J as g,K as j,M as y,N as b,e as N,O as v,h as w,Q as k}from"./index-B6_tP4YQ.js";import{C as S,R as C,F as E,a as P}from"./reactstrap.modern-1TI7C-B6.js";import{F as O}from"./index-DaXkjU9A.js";import{T as A}from"./react-BL-HRo_U.js";import{S as L}from"./SignUpAnimation-B6jg12st.js";import{a as M,b as R,c as U,M as q}from"./index-BZTi0IwX.js";import{a as T,$ as I}from"./module-rdBSHQ9l.js";import{M as D}from"./index-c29tLOqg.js";import{S as F}from"./SEO-CG8nsGhn.js";import{m as $}from"./motion-nj0T3Q6E.js";import"./index-KjFfD-Q4.js";import"./index-Bx5UHif0.js";import"./index-CfSqzuTe.js";import"./index-BaqZIR9i.js";import"./warning-DM8AoHwU.js";import"./Transition-EapTcxBc.js";import"./setPrototypeOf-CeEI3KLI.js";import"./inheritsLoose-HiINKdoJ.js";import"./emotion-unitless.esm-sScrWPmR.js";const z=()=>{const[z,B]=e.useState(""),[G,W]=e.useState(""),[V,Z]=e.useState(""),[_,Q]=e.useState(""),[H,J]=e.useState(!1),[K,X]=e.useState(!1),[Y,ee]=e.useState(!1),[se,te]=e.useState(!1),[ae,re]=e.useState(!1),[ne,le]=e.useState(!1),[ie,oe]=e.useState(!1),{currentUser:ce}=s(),me=t(),[de,xe]=e.useState(!1),ue=()=>{xe(!1),B(""),W(""),Z(""),Q(""),me("/login")};e.useEffect((()=>{const e=a(d,(e=>{e&&me("/newhome")}));return()=>e()}),[me]),e.useEffect((()=>{(async()=>{if(z.trim().length>=2){te(!0);const e=fe(z),s=x(f(v,"users"),u("username","==",e));(await p(s)).empty?(re(!1),le(!0)):(re(!0),le(!1)),te(!1)}else re(!1),le(!1)})()}),[z]),e.useEffect((()=>{const e=()=>{document.body.classList.add("scroll-lock")},s=()=>{document.body.classList.remove("scroll-lock")},t=document.querySelectorAll("input");return t.forEach((t=>{t.addEventListener("focus",e),t.addEventListener("blur",s)})),()=>{t.forEach((t=>{t.removeEventListener("focus",e),t.removeEventListener("blur",s)}))}}),[]),e.useEffect((()=>{const e=a(d,(e=>{e&&me("/newhome")}));return()=>e()}),[me]);const fe=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return r.jsxs(r.Fragment,{children:[r.jsx(F,{title:"Signup - My Thrift",description:"Get started with an amazing shopping experience on My Thrift!",url:"https://www.shopmythrift.store/signup"}),r.jsx(S,{children:r.jsx(C,{children:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsxs("div",{className:"flex flex-col items-center flex-grow transform text-customOrange -translate-y-2",children:[r.jsx(L,{}),r.jsx(A,{options:{strings:["Welcome to My Thrift","The Real Market Place!"],autoStart:!0,loop:!0}})]})}),r.jsxs("div",{className:"",children:[r.jsxs("div",{className:"px-4",children:[r.jsx("h1",{className:"text-3xl font-extrabold font-lato text-black mb-1",children:"Create an account"}),r.jsx("p",{className:"text-gray-400 mb-1 text-sm font-lato",children:"Don't stress we have the best thrifted items for you"})]}),r.jsxs(E,{className:"mt-4 px-4 flex flex-col ",onSubmit:async e=>{if(e.preventDefault(),z&&G&&V&&_)if(z.length<2)h.error("Username must be at least 2 characters long.");else if((e=>{const s=/[A-Z]/.test(e),t=/[!@#$%^&*(),.?":{}|<>]/.test(e),a=/[0-9]/.test(e),r=e.length>=8&&e.length<=24;return s&&t&&a&&r})(V))if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G))if(V===_)if(ae)h.error("Username is already taken. Please choose another one.");else{ee(!0);try{const e=g(j,"userSignup"),s=await e({username:fe(z),email:G,password:V});s.data.success&&xe(!0)}catch(s){let e="Cannot sign up at the moment. Please try again.";"already-exists"===s.code?e="This email is already in use. Please use a different email.":"invalid-argument"===s.code?e="Missing required fields.":"unknown"===s.code&&(e=s.message||e),h.error(e)}finally{ee(!1)}}else h.error("Passwords do not match. Please try again.");else h.error("Invalid email format. Please enter a valid email.");else h.error("Password must be at least 8 characters, include uppercase, special char, numeric.");else h.error("All fields are required. Please fill in all fields.")},children:[r.jsxs(P,{className:"relative mb-2",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:r.jsx(n,{className:"text-gray-500 text-xl"})}),r.jsx("input",{required:!0,type:"text",placeholder:"Username",value:z,className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-customOrange "+(ae?"border-2 border-red-500":ne?"border-2 border-green-500":""),onChange:e=>B(fe(e.target.value))}),se&&r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx(T,{height:24,width:24,color:"#4fa94d",ariaLabel:"oval-loading",secondaryColor:"#4fa94d",strokeWidth:2,strokeWidthSecondary:2})}),!se&&ne&&r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx(l,{className:"text-green-500 rounded-full p-1",size:24})})]}),ae&&r.jsxs("div",{className:"text-red-500 ratings-text -translate-y-3 flex items-center",children:[r.jsx(i,{className:"mr-1"}),"Username is already taken. Please choose another one."]}),r.jsxs(P,{className:"relative mb-2",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:r.jsx(M,{className:"text-gray-500 text-xl"})}),r.jsx("input",{required:!0,type:"email",placeholder:"Enter your email",value:G,className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-customOrange",onChange:e=>W(e.target.value)})]}),r.jsxs(P,{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:r.jsx(R,{className:"text-gray-500 text-xl"})}),r.jsx("input",{required:!0,type:H?"text":"password",className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"Enter password",value:V,onFocus:()=>oe(!0),onBlur:()=>oe(!1),onChange:e=>Z(e.target.value)}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>J(!H),children:H?r.jsx(o,{className:"text-gray-500 text-xl"}):r.jsx(c,{className:"text-gray-500 text-xl"})})]}),ie&&r.jsxs("ul",{className:"text-xs text-gray-600 mt-2",children:[r.jsxs("li",{className:""+(/[A-Z]/.test(V)?"text-green-500":"text-red-500"),children:[/[A-Z]/.test(V)?"✔":"✘"," At least one uppercase letter"]}),r.jsxs("li",{className:""+(/[0-9]/.test(V)?"text-green-500":"text-red-500"),children:[/[0-9]/.test(V)?"✔":"✘"," At least one numeric character"]}),r.jsxs("li",{className:""+(/[!@#$%^&*(),.?":{}|<>]/.test(V)?"text-green-500":"text-red-500"),children:[/[!@#$%^&*(),.?":{}|<>]/.test(V)?"✔":"✘"," At least one special character"]}),r.jsxs("li",{className:""+(V.length>=8?"text-green-500":"text-red-500"),children:[V.length>=8?"✔":"✘"," Minimum length of 8 characters"]})]}),r.jsxs(P,{className:"relative mt-4",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-6 pointer-events-none",children:r.jsx(R,{className:"text-gray-500 text-xl"})}),r.jsx("input",{required:!0,type:K?"text":"password",className:"w-full h-12 bg-gray-100 pl-14 text-black font-opensans rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-customOrange",placeholder:"Re-type password",value:_,onChange:e=>Q(e.target.value)}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:()=>X(!K),children:K?r.jsx(o,{className:"text-gray-500 text-xl"}):r.jsx(c,{className:"text-gray-500 text-xl"})})]}),r.jsxs("div",{className:"text-gray-600 font-opensans text-xs mt-2 -mx-1 leading-relaxed",children:["By signing up, you agree to our",r.jsx("span",{onClick:()=>window.open("/terms-and-conditions","_blank","noopener,noreferrer"),className:"text-customOrange font-medium hover:underline cursor-pointer mr-1",children:"Terms & Conditions"}),"and",r.jsx("span",{onClick:()=>window.open("/privacy-policy","_blank","noopener,noreferrer"),className:"text-customOrange font-medium hover:underline cursor-pointer ml-1",children:"Privacy Policy"}),"."]}),r.jsx($.button,{type:"submit",className:"glow-button w-full h-12 mt-4 bg-customOrange text-white font-medium rounded-full flex justify-center font-opensans items-center",disabled:Y,children:Y?r.jsx(I,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):"Sign Up"}),r.jsxs("div",{className:"flex items-center justify-center mt-2 mb-2",children:[r.jsx("div",{className:"flex-grow border-t border-gray-300"}),r.jsx("span",{className:"mx-4 text-sm text-gray-500",children:"OR"}),r.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),r.jsxs($.button,{type:"button",className:"w-full h-12 mt-2 bg-white border-2 border-gray-300 text-black font-medium rounded-full flex justify-center items-center",onClick:async()=>{const e=new y;try{ee(!0);const s=(await b(d,e)).user,t=N(v,"users",s.uid);(await w(t)).exists()||await k(t,{uid:s.uid,username:s.displayName,email:s.email,role:"user",createdAt:new Date,profileComplete:!1,welcomeEmailSent:!1}),h.success("Signed up with Google successfully!"),me("/newhome")}catch(s){let e="Google Sign-Up failed. Please try again.";"auth/account-exists-with-different-credential"===s.code?e="An account with the same email already exists.":"auth/popup-closed-by-user"===s.code&&(e="Popup closed before completing sign-up."),h.error(e)}finally{ee(!1)}},children:[r.jsx(O,{className:"mr-2  text-2xl"}),"Sign up with Google"]}),r.jsx("div",{className:"text-center text-sm font-normal font-lato mt-2 pb-4 flex justify-center",children:r.jsxs("p",{className:"text-gray-700 text-sm",children:["Already have an account?"," ",r.jsx("span",{className:"text-customOrange text-sm",children:r.jsx(m,{to:"/login",children:"Sign In"})})]})})]})]})]})})}),r.jsx(D,{isOpen:de,onRequestClose:ue,contentLabel:"Email Verification",style:{content:{position:"absolute",bottom:"0",left:"0",right:"0",top:"auto",borderRadius:"20px 20px 0 0",padding:"20px",backgroundColor:"#ffffff",border:"none",height:"35%",animation:"slide-up 0.3s ease-in-out"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:3e3}},children:r.jsxs("div",{className:"flex flex-col items-center py-2",children:[r.jsxs("div",{className:"flex items-center justify-between w-full mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-rose-100 flex justify-center items-center rounded-full",children:r.jsx(U,{className:"text-customRichBrown text-lg"})}),r.jsx("h2",{className:"font-opensans text-lg font-semibold text-customRichBrown",children:"Verify Your Email"})]}),r.jsx(q,{className:"text-black text-2xl cursor-pointer",onClick:ue})]}),r.jsxs("p",{className:"font-opensans mt-1 text-base text-black text-center font-medium leading-6",children:["Email sent successfully! Please check your inbox for the verification link.",r.jsx("br",{}),r.jsx("span",{className:"font-light text-xs font-opensans",children:"P.S. If you didn’t receive it, please check your spam or junk folder."})]})]})})]})};export{z as default};
