import{h as e,ay as s,i as t,r as i,j as l,S as a,Q as r,aM as h,X as d,c,a as x,g as n}from"./index-CvIXhaMv.js";import{P as m}from"./ProgressBar-BRYQFJFA.js";import"./index-BVVzb-MI.js";import"./index-BaqZIR9i.js";const j=()=>{const j=e(),{currentUser:o}=s(),{data:u}=t((e=>e.vendorProfile)),[f,w]=i.useState(!1),[g,N]=i.useState("All"),[v,p]=i.useState([]),[b,q]=i.useState([]),[y,k]=i.useState({5:0,4:0,3:0,2:0,1:0}),{ratingCount:S,rating:A}=u||{},R=Object.values(y).reduce(((e,s)=>e+s),0),C=e=>e/R*100;i.useEffect((()=>{(async()=>{if(o.uid){w(!0);try{const e=c(x,"vendors",o.uid,"reviews"),s=(await n(e)).docs.map((e=>({id:e.id,...e.data()}))),t="All"===g?s:s.filter((e=>e.rating===g));q(t),p(s);const i=t.filter((e=>e.reviewText));p(i);const l={5:s.filter((e=>5===e.rating)).length,4:s.filter((e=>4===e.rating)).length,3:s.filter((e=>3===e.rating)).length,2:s.filter((e=>2===e.rating)).length,1:s.filter((e=>1===e.rating)).length};k(l)}catch(e){}finally{w(!1)}}})()}),[o,g]);const M=S>0?A/S:0;return l.jsxs(l.Fragment,{children:[l.jsx(a,{title:"Reviews - My Thrift",description:"Reviews on your My Thrift store",url:"https://www.shopmythrift.store/store-reviews"}),l.jsxs("div",{className:"px-2 py-4",children:[l.jsxs("div",{className:"sticky py-3 top-0 bg-white z-10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2",children:[l.jsx(r,{className:"text-3xl cursor-pointer",onClick:()=>j(-1)}),l.jsx("h1",{className:"text-xl font-opensans font-semibold",children:"Reviews"}),l.jsx("div",{})]}),l.jsx("div",{className:"flex justify-between mb-3 w-full overflow-x-auto space-x-2 scrollbar-hide",children:["All",5,4,3,2,1].map((e=>l.jsx("button",{onClick:()=>N(e),className:"flex-shrink-0 h-12 px-3 py-2 text-xs font-bold font-opensans text-black border border-gray-200 rounded-full "+(g===e?"bg-customOrange text-white":"bg-transparent"),children:"All"===e?e:`${e} stars`},e)))}),l.jsx("div",{className:"border-b border-gray-300 w-screen translate-y-3 relative left-1/2 transform -translate-x-1/2"})]}),l.jsxs("div",{className:"flex space-x-6",children:[l.jsx("div",{className:"flex items-center justify-start my-4",children:l.jsx("div",{className:" rounded-full flex flex-col ",children:f?l.jsxs("div",{className:"flex flex-col",children:[l.jsx(h,{square:!0,height:80,width:80}),l.jsx(h,{square:!0,height:15,width:80}),l.jsx(h,{square:!0,height:15,width:20})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-5xl font-opensans font-semibold",children:M.toFixed(1)}),l.jsx("div",{className:"flex text-xs mt-2",children:Array.from({length:5}).map(((e,s)=>l.jsx(d,{className:s<Math.floor(M)?"text-yellow-500":"text-gray-300"},s)))}),l.jsx("span",{className:"text-xs mt-1 font-poppins  text-gray-600",children:S})]})})}),l.jsx("div",{className:"my-4  w-full",children:f?l.jsxs("div",{children:[l.jsx(h,{square:!0,height:20,width:300,className:"my-1 ml-3"}),l.jsx(h,{square:!0,height:20,width:300,className:"my-1 ml-3"}),l.jsx(h,{square:!0,height:20,width:300,className:"my-1 ml-3"}),l.jsx(h,{square:!0,height:20,width:300,className:"my-1 ml-3"}),l.jsx(h,{square:!0,height:20,width:300,className:"my-1 ml-3"})]}):[5,4,3,2,1].map((e=>l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("span",{className:"w-6 text-xs  font-opensans font-light",children:e}),l.jsx(m,{now:C(y[e]),className:"flex-1 mx-2",style:{height:"14px",backgroundColor:"#f5f3f2",borderRadius:"10px",overflow:"hidden"},children:l.jsx("div",{style:{backgroundColor:"#f9531e",height:"100%",width:`${C(y[e])}%`,borderRadius:"10px"}})})]},e)))})]}),l.jsx("div",{className:"p-2",children:b.length>0&&!f?b.map((e=>l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[l.jsx("img",{src:e.userPhotoURL||"https://images.saatchiart.com/saatchi/1750204/art/9767271/8830343-WUMLQQKS-7.jpg",alt:e.userName,className:"w-11 h-11 rounded-full mr-3"}),l.jsx("div",{children:l.jsx("h2",{className:"font-semibold text-xs",children:e.userName})})]}),l.jsxs("div",{className:"flex space-x-3 items-center",children:[l.jsx("div",{className:"flex space-x-1",children:Array.from({length:e.rating}).map(((e,s)=>l.jsx(d,{className:"text-yellow-500"},s)))}),l.jsx("span",{className:"ratings-text font-medium font-opensans text-gray-500",children:new Date(1e3*e.createdAt.seconds).toLocaleDateString()})]}),l.jsx("p",{className:"mt-2 text-black font-opensans text-sm",children:e.reviewText})]},e.id))):f?l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsxs("div",{className:"w-full mb-4",children:[l.jsxs("div",{className:"w-full flex items-center mb-1",children:[l.jsx(h,{circle:!0,width:44,height:44,className:" rounded-full mr-3"}),l.jsx("div",{children:l.jsx(h,{square:!0,width:50,height:20})})]}),l.jsxs("div",{className:"w-full flex space-x-3 items-center",children:[l.jsx(h,{square:!0,width:70,height:30}),l.jsx(h,{square:!0,width:50,height:20})]}),l.jsx(h,{square:!0,width:330,height:20})]}),l.jsxs("div",{className:"w-full mb-4",children:[l.jsxs("div",{className:"w-full flex items-center mb-1",children:[l.jsx(h,{circle:!0,width:44,height:44,className:" rounded-full mr-3"}),l.jsx("div",{children:l.jsx(h,{square:!0,width:50,height:20})})]}),l.jsxs("div",{className:"w-full flex space-x-3 items-center",children:[l.jsx(h,{square:!0,width:90,height:30}),l.jsx(h,{square:!0,width:50,height:20})]}),l.jsx(h,{square:!0,width:330,height:20}),l.jsx(h,{square:!0,width:110,height:20})]}),l.jsxs("div",{className:"w-full mb-4",children:[l.jsxs("div",{className:"w-full flex items-center mb-1",children:[l.jsx(h,{circle:!0,width:44,height:44,className:" rounded-full mr-3"}),l.jsx("div",{children:l.jsx(h,{square:!0,width:50,height:20})})]}),l.jsxs("div",{className:"w-full flex space-x-3 items-center",children:[l.jsx(h,{square:!0,width:60,height:30}),l.jsx(h,{square:!0,width:50,height:20})]}),l.jsx(h,{square:!0,width:330,height:20}),l.jsx(h,{square:!0,width:330,height:20}),l.jsx(h,{square:!0,width:90,height:20})]}),l.jsxs("div",{className:"w-full mb-4",children:[l.jsxs("div",{className:"w-full flex items-center mb-1",children:[l.jsx(h,{circle:!0,width:44,height:44,className:" rounded-full mr-3"}),l.jsx("div",{children:l.jsx(h,{square:!0,width:65,height:20})})]}),l.jsxs("div",{className:"w-full flex space-x-3 items-center",children:[l.jsx(h,{square:!0,width:65,height:30}),l.jsx(h,{square:!0,width:50,height:20})]}),l.jsx(h,{square:!0,width:230,height:20})]}),l.jsxs("div",{className:"w-full mb-4",children:[l.jsxs("div",{className:"w-full flex items-center mb-1",children:[l.jsx(h,{circle:!0,width:44,height:44,className:" rounded-full mr-3"}),l.jsx("div",{children:l.jsx(h,{square:!0,width:90,height:20})})]}),l.jsxs("div",{className:"w-full flex space-x-3 items-center",children:[l.jsx(h,{square:!0,width:70,height:30}),l.jsx(h,{square:!0,width:50,height:20})]}),l.jsx(h,{square:!0,width:330,height:20}),l.jsx(h,{square:!0,width:200,height:20})]}),l.jsxs("div",{className:"w-full mb-4",children:[l.jsxs("div",{className:"w-full flex items-center mb-1",children:[l.jsx(h,{circle:!0,width:44,height:44,className:" rounded-full mr-3"}),l.jsx("div",{children:l.jsx(h,{square:!0,width:40,height:20})})]}),l.jsxs("div",{className:"w-full flex space-x-3 items-center",children:[l.jsx(h,{square:!0,width:70,height:30}),l.jsx(h,{square:!0,width:50,height:20})]}),l.jsx(h,{square:!0,width:330,height:20})]})]})}):l.jsx("div",{className:"text-xs font-opensans text-gray-800 text-center mt-8",children:"No reviews here yet. Reviews will appear here when customers post them ðŸŒŸ..."})})]})]})};export{j as default};
