import{r as e,j as s,e as t,O as r,h as a,bk as n,b_ as o,H as l,ck as i,_ as d,J as c,K as x,u as m,G as u,cl as p,c8 as h,au as f,aE as b,cm as v,bd as j,cn as g,co as N,D as y,E as k,I as w,a9 as I,as as S,a as D,c as C,aq as O}from"./index-B6_tP4YQ.js";import{M as P}from"./index-c29tLOqg.js";import{a as A}from"./index-DfGOTzdC.js";import{m as R,n as M,o as E}from"./index-_8P_0wxn.js";import{$}from"./module-rdBSHQ9l.js";import{M as Y,i as U,w as B}from"./index-BZTi0IwX.js";import{j as T,e as F,k as W,l as _}from"./index-BRiOgcip.js";import{b as V}from"./index-CkQT2Z8i.js";import{a as q}from"./index-CGC7HsBi.js";import{I as z}from"./index-Cn-auMI7.js";import{a as L}from"./index-CE16t7rV.js";import{f as H,g as J,h as K}from"./index-DVu8OWaS.js";import{d as G}from"./index-Bo5izuxS.js";import{b as Q,c as X}from"./index-DPVG87FS.js";import{S as Z}from"./SEO-CG8nsGhn.js";import"./index-Bx5UHif0.js";import"./warning-DM8AoHwU.js";import"./emotion-unitless.esm-sScrWPmR.js";const ee=({orders:o,openModal:l})=>{const[i,d]=e.useState({}),[c,x]=e.useState({});e.useEffect((()=>{(async()=>{var e;const s={};for(const n of o){s[n.id]||(s[n.id]=[]);for(const o of n.cartItems){const l=t(r,"products",o.productId),i=await a(l);if(i.exists()){const t=i.data();let r=[],a=[];if(o.subProductId){const s=null==(e=t.subProducts)?void 0:e.find((e=>e.subProductId===o.subProductId));(null==s?void 0:s.images)&&(r=r.concat(s.images))}if(o.variantAttributes){const e=o.variantAttributes,s=(t.variants||[]).find((s=>s.color===e.color&&s.size===e.size));(null==s?void 0:s.images)&&(a=a.concat(s.images))}r=r.concat(a.filter((e=>!r.includes(e)))),0===r.length&&t.imageUrls&&(r=r.concat(t.imageUrls));const l=r.filter((e=>!s[n.id].includes(e)));s[n.id]=s[n.id].concat(l)}}}d(s)})()}),[o]),e.useEffect((()=>{const e=setInterval((()=>{x((e=>{const s={...e};return o.forEach((t=>{var r;const a=(null==(r=i[t.id])?void 0:r.length)||0;a>0&&(s[t.id]=((e[t.id]||0)+1)%a)})),s}))}),4e3);return()=>clearInterval(e)}),[o,i]);const{today:m,yesterday:u,thisWeek:p,older:h}=(e=>{const s=[],t=[],r=[],a=[];return e.forEach((e=>{const o=n(1e3*e.createdAt.seconds),l=n();o.isSame(l,"day")?s.push(e):o.isSame(l.clone().subtract(1,"day"),"day")?t.push(e):o.isSame(l,"week")?r.push(e):a.push(e)})),{today:s,yesterday:t,thisWeek:r,older:a}})(o),f=(e,t)=>0===t.length?null:s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-right flex text-sm text-black font-opensans mt-3 mb-3",children:e}),s.jsx("ul",{className:"space-y-4",children:t.map((e=>{const t=e.isStockpile,r=t&&!!e.stockpileDuration;t&&e.stockpileDuration;let a="Pending Order ðŸ•œ";t&&(a=r?"New Stockpile ðŸ§¡ ":"Incoming Pile ðŸ§º");const o=e.cartItems.reduce(((e,s)=>e+s.quantity),0);let d;return d=t?r?`${e.userInfo.displayName} wants to create a stockpile for ${e.stockpileDuration} weeks. They added ${o} item(s).`:`${e.userInfo.displayName} wants to add more items to their existing pile. They added ${o} item(s).`:`You have an order from ${e.userInfo.displayName} (Order ID: ${e.id}) for ${o} items. Please review and process the order.`,s.jsxs("li",{className:"p-2.5 bg-gray-100 rounded-lg flex cursor-pointer",onClick:()=>l(e),children:[i[e.id]&&i[e.id].length>0?s.jsx("img",{src:i[e.id][c[e.id]||0],alt:"Product",className:"w-12 h-12 p-0.5 border-dashed border-customBrown border-[1px] border-opacity-80 object-cover rounded mr-3 flex-shrink-0"}):s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded mr-3 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-black font-opensans text-xs",children:a}),s.jsx("span",{className:"text-xs font-semibold text-black font-opensans",children:n(1e3*e.createdAt.seconds).format("hh:mm A")})]}),s.jsx("p",{className:"text-xs text-left text-gray-700 font-opensans mt-2 whitespace-pre-line",children:d})]})]},e.id)}))})]},e);return s.jsxs("div",{children:[f("Today",m),f("Yesterday",u),f("This Week",p),f("Older",h)]})},se=async(e,s,n,i,d,c,x=null,m=null)=>{try{if(!e)throw new Error("User ID is undefined or null. Cannot send notification.");if(!s)throw new Error("Order ID is undefined or null. Cannot send notification.");const u=t(r,"orders",s);if(!(await a(u)).exists())throw new Error("Order document does not exist.");if(!["Pending","In Progress","Shipped","Declined","Delivered"].includes(n))throw new Error("Invalid order status. Cannot send notification.");"Declined"!==n&&(x=null),"Shipped"!==n&&(m=null);const p={userId:e,vendorName:i||"Unknown Vendor",vendorCoverImage:d||"",productImage:c||"",message:`Your order with ${i||"Unknown Vendor"} has been updated to: ${n}`,orderId:s,declineReason:x,riderInfo:m,createdAt:new Date,seen:!1,type:"order"};await o(l(r,"notifications"),p),await A.post("https://us-central1-ecommerce-ba520.cloudfunctions.net/sendNotification",{userId:e,orderId:s,newStatus:n,vendorName:i,vendorCoverImage:d,productImage:c,declineReason:x,riderInfo:m})}catch(u){}},te=async(e,s,t,a="order")=>{try{const n=l(r,"vendors",e,"activityNotes");await o(n,{title:s,note:t,type:a,timestamp:new Date})}catch(n){}},re=({orders:o,openModal:l,moveToShipped:m})=>{const[u,p]=e.useState({}),[h,f]=e.useState({}),[b,v]=e.useState(null),[j,g]=e.useState(!1),[N,y]=e.useState(""),[k,w]=e.useState(""),[I,S]=e.useState(""),[D,C]=e.useState(!1),[O,A]=e.useState(null),[M,E]=e.useState(!1);e.useEffect((()=>(document.body.style.overflow=j?"hidden":"",()=>{document.body.style.overflow=""})),[j]),e.useEffect((()=>{(async()=>{var e;const s={};for(const n of o){s[n.id]||(s[n.id]=[]);for(const o of n.cartItems){const l=t(r,"products",o.productId),i=await a(l);if(i.exists()){const t=i.data();let r=[],a=[],l=null,d=null;if(o.subProductId&&(l=null==(e=t.subProducts)?void 0:e.find((e=>e.subProductId===o.subProductId)),l&&l.images&&(r=r.concat(l.images))),o.variantAttributes){const e=o.variantAttributes,s=l?l.variants:t.variants;s&&(d=s.find((s=>!!s.attributes&&Object.keys(e).every((t=>e[t]===s.attributes[t])))),d&&d.images&&(a=a.concat(d.images)))}r=r.concat(a.filter((e=>!r.includes(e)))),0===r.length&&t.imageUrls&&(r=r.concat(t.imageUrls));const c=r.filter((e=>!s[n.id].includes(e)));s[n.id]=s[n.id].concat(c)}}}p(s)})()}),[o]),e.useEffect((()=>{const e=setInterval((()=>{f((e=>{const s={...e};return o.forEach((t=>{var r;const a=(null==(r=u[t.id])?void 0:r.length)||0;a>0&&(s[t.id]=((e[t.id]||0)+1)%a)})),s}))}),4e3);return()=>clearInterval(e)}),[o,u]);const U=()=>{g(!1),y(""),w(""),S("")},B=async()=>{var e,s,n,l,i;if(!N||!k)return void d.error("Please fill in both Rider's Name and Rider's Number.");const m=o.find((e=>e.id===O));if(m){E(!0);try{const o=c(x,"shipVendorOrder"),{data:u}=await o({orderId:m.id,riderName:N,riderNumber:k,note:I});if(u.alreadyShipped)return d.success("Order is already marked as shipped âœ…"),void onClose();let p=m.vendorName,h=null;if(!p&&m.vendorId){const e=t(r,"vendors",m.vendorId),s=await a(e);if(s.exists()){const e=s.data();p=e.shopName||"Unknown Vendor",h=e.coverImageUrl||null}}let f=null;if(null==(e=m.cartItems)?void 0:e.length){const e=m.cartItems[0],o=await a(t(r,"products",e.productId));if(o.exists()){const t=o.data();f=e.subProductId?(null==(l=null==(n=null==(s=t.subProducts)?void 0:s.find((s=>s.subProductId===e.subProductId)))?void 0:n.images)?void 0:l[0])||null:(null==(i=t.imageUrls)?void 0:i[0])||null}}await se(m.userId,m.id,"Shipped",p,h,f,null,{riderName:N,riderNumber:k,note:I}),await te(m.vendorId,"Order Shipped ðŸšš",`Order has been shipped. Rider's name is ${N}, and they are reachable at ${k}.`,"order"),d.success("Order marked as shipped!"),g(!1),U()}catch(u){d.error("Failed to move order to shipping. Please try again.")}finally{E(!1)}}else d.error("Order not found â€“ please refresh the page.")},{today:T,yesterday:F,thisWeek:W,older:_}=(e=>{const s=[],t=[],r=[],a=[];return e.forEach((e=>{const o=n(1e3*e.createdAt.seconds),l=n();o.isSame(l,"day")?s.push(e):o.isSame(l.clone().subtract(1,"day"),"day")?t.push(e):o.isSame(l,"week")?r.push(e):a.push(e)})),{today:s,yesterday:t,thisWeek:r,older:a}})(o),V=(e,t)=>t.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-right flex text-sm text-black font-opensans mt-3 mb-3",children:e}),s.jsx("ul",{className:"space-y-4",children:t.map((e=>{var t,r,a,d;return s.jsx("li",{className:"p-2 bg-gray-100 rounded-lg flex items-start cursor-pointer",onClick:()=>l(e),children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-black font-opensans text-xs",children:"In Progress Order"}),s.jsx("span",{className:"text-xs font-semibold text-black font-opensans",children:n(1e3*e.createdAt.seconds).format("hh:mm A")})]}),s.jsxs("div",{className:"flex items-center mt-2 justify-center",children:[u[e.id]&&u[e.id].length>0?s.jsx("img",{src:u[e.id][h[e.id]||0],alt:"Product",className:"w-12 h-12 p-0.5 border-dashed border-customBrown border border-opacity-80 object-cover rounded mr-3"}):s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded mr-3"}),s.jsxs("p",{className:"text-xs text-left text-gray-700 font-opensans mt-2",children:["Order from ",e.userInfo.displayName," for"," ",e.cartItems.reduce(((e,s)=>e+s.quantity),0)," ",'item(s). Once youâ€™ve completed packaging and shipped this order, please update the status to "Shipped" to keep the customer informed.',(null==(d=null==(a=null==(r=null==(t=e.kwikJob)?void 0:t.data)?void 0:r.pickups)?void 0:a[0])?void 0:d.result_tracking_link)&&s.jsx("span",{className:"ml-1 font-bold ",children:s.jsxs("a",{href:e.kwikJob.data.pickups[0].result_tracking_link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-black  font-opensans",onClick:e=>e.stopPropagation(),children:["This order will be picked up by our rider"," ",s.jsx("span",{className:"text-xs text-customOrange underline font-opensans",children:"Track Rider"})]})})]})]}),s.jsxs("div",{className:"relative flex justify-end mt-2",children:[s.jsxs("button",{onClick:s=>{s.stopPropagation(),v(b===e.id?null:e.id)},className:"bg-transparent border-blue-300 border text-blue-300 font-medium font-opensans text-xs rounded-md px-2.5 py-2 flex items-center",children:["In progress ",s.jsx(i,{className:"ml-1"})]}),b===e.id&&s.jsxs("div",{className:"absolute z-50 bg-white w-36 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 mt-6 right-0 p-3",onClick:e=>e.stopPropagation(),children:[s.jsx("span",{className:"text-xs text-customRichBrown block text-left font-opensans font-semibold text ml-2",children:"Move to"}),s.jsx("hr",{className:"my-2  text-slate-300"}),s.jsx("button",{onClick:()=>{v(null),(e=>{var s,t;const r=o.find((s=>s.id===e));A(e),(null==(t=null==(s=r.kwikJob)?void 0:s.data)?void 0:t.contactUs)?(y("Kwik Delivery"),w(r.kwikJob.data.contactUs.phone_no),C(!0)):(y(""),w(""),C(!1)),g(!0)})(e.id)},className:"block w-full text-left text-sm text-black font-opensans px-2 py-1",children:"Shipped"})]})]})]})},e.id)}))}),s.jsxs(P,{isOpen:j,onRequestClose:U,className:"modal-content-rider h-auto",overlayClassName:"modal-overlay backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(R,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Delivery Details"})]}),s.jsx(Y,{className:"text-xl relative -top-2",onClick:U})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsx("h1",{className:"text-xs font-opensans text-black font-medium",children:"Rider's Name"}),s.jsx("input",{type:"text",placeholder:"Rider's Name",value:N,disabled:D,onChange:e=>y(e.target.value),className:"w-full p-2 border text-xs rounded h-10 focus:outline-none"}),s.jsx("h1",{className:"text-xs font-opensans  text-black font-medium",children:"Rider's Number"}),s.jsx("input",{type:"number",placeholder:"Enter Rider's Phone Number",value:k,onChange:e=>w(e.target.value.slice(0,11)),className:"w-full p-2 border text-xs h-10 rounded focus:outline-none"}),s.jsx("textarea",{placeholder:"Add a short note here (optional)",value:I,onChange:e=>S(e.target.value),className:"w-full p-2 border text-xs h-20  rounded focus:outline-none"})]}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx("button",{onClick:B,className:"bg-customOrange text-white font-opensans py-2 px-12 rounded-full flex items-center",disabled:M,children:M?s.jsx($,{strokeColor:"white",width:"20"}):"Send"})})]})]},e);return s.jsxs("div",{children:[V("Today",T),V("Yesterday",F),V("This Week",W),V("Older",_)]})},ae=({orders:o,openModal:l})=>{const[i,d]=e.useState({}),[c,x]=e.useState({});e.useEffect((()=>{(async()=>{var e;const s={};for(const n of o){s[n.id]||(s[n.id]=[]);for(const o of n.cartItems){const l=t(r,"products",o.productId),i=await a(l);if(i.exists()){const t=i.data();let r=[],a=[],l=null,d=null;if(o.subProductId&&(l=null==(e=t.subProducts)?void 0:e.find((e=>e.subProductId===o.subProductId)),l&&l.images&&(r=r.concat(l.images))),o.variantAttributes){const e=o.variantAttributes,s=l?l.variants:t.variants;s&&(d=s.find((s=>!!s.attributes&&Object.keys(e).every((t=>e[t]===s.attributes[t])))),d&&d.images&&(a=a.concat(d.images)))}r=r.concat(a.filter((e=>!r.includes(e)))),0===r.length&&t.imageUrls&&(r=r.concat(t.imageUrls));const c=r.filter((e=>!s[n.id].includes(e)));s[n.id]=s[n.id].concat(c)}}}d(s)})()}),[o]),e.useEffect((()=>{const e=setInterval((()=>{x((e=>{const s={...e};return o.forEach((t=>{var r;const a=(null==(r=i[t.id])?void 0:r.length)||0;a>0&&(s[t.id]=((e[t.id]||0)+1)%a)})),s}))}),4e3);return()=>clearInterval(e)}),[o,i]);const{today:m,yesterday:u,thisWeek:p,older:h}=(e=>{const s=[],t=[],r=[],a=[];return e.forEach((e=>{const o=n(1e3*e.createdAt.seconds),l=n();o.isSame(l,"day")?s.push(e):o.isSame(l.clone().subtract(1,"day"),"day")?t.push(e):o.isSame(l,"week")?r.push(e):a.push(e)})),{today:s,yesterday:t,thisWeek:r,older:a}})(o),f=(e,t)=>t.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-right flex text-sm text-black font-opensans mt-3 mb-3",children:e}),s.jsx("ul",{className:"space-y-4",children:t.map((e=>{var t;return s.jsx("li",{className:"p-2 bg-gray-100 rounded-lg flex items-start cursor-pointer",onClick:()=>l(e),children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:`font-semibold text-xs font-opensans ${"Delivered"===e.progressStatus?"bg-green-700  text-white px-2 py-1 rounded-md":""} text-black`,children:"Delivered"===e.progressStatus?"Fulfilled Order":"Shipped Order"}),s.jsx("span",{className:"text-xs font-semibold text-black font-opensans",children:n(1e3*e.createdAt.seconds).format("hh:mm A")})]}),s.jsxs("div",{className:"flex items-center mt-2 justify-center",children:[i[e.id]&&i[e.id].length>0?s.jsx("img",{src:i[e.id][c[e.id]||0],alt:"Product",className:"w-12 h-12 p-0.5 border-dashed border-customBrown border border-opacity-80 object-cover rounded mr-3"}):s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded mr-3"}),s.jsxs("p",{className:"text-xs text-left text-gray-700 font-opensans mt-2",children:["Order from ",e.userInfo.displayName," (Order ID:"," ",e.id,") for"," ",e.cartItems.reduce(((e,s)=>e+s.quantity),0)," ","item(s)."," ","Delivered"===e.progressStatus?"This order has been delivered to the customer.":"This order has been shipped to the customer.","Shipped"===e.progressStatus&&(null==(t=e.kwikJob)?void 0:t.data)&&s.jsx("span",{className:"text-xs text-customOrange font-bold font-opensans mt-1",children:"You can mark the order as delivered once youâ€™ve handed the package to the rider. Thank you!"})]})]})]})},e.id)}))})]},e);return s.jsxs("div",{children:[f("Today",m),f("Yesterday",u),f("This Week",p),f("Older",h)]})},ne=({orders:e,openModal:t})=>{const{today:r,yesterday:a,thisWeek:o,older:l}=(e=>{const s=[],t=[],r=[],a=[];return e.forEach((e=>{const o=n(1e3*e.createdAt.seconds),l=n();o.isSame(l,"day")?s.push(e):o.isSame(l.clone().subtract(1,"day"),"day")?t.push(e):o.isSame(l,"week")?r.push(e):a.push(e)})),{today:s,yesterday:t,thisWeek:r,older:a}})(e),i=(e,r)=>r.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-right flex text-sm text-black font-opensans mt-3 mb-3",children:e}),s.jsx("ul",{className:"space-y-4",children:r.map((e=>s.jsx("li",{className:"p-2.5 bg-gray-100 rounded-lg flex items-start cursor-pointer",onClick:()=>t(e),children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-black font-opensans text-xs",children:"Declined Order"}),s.jsx("span",{className:"text-xs font-semibold text-black font-opensans",children:n(1e3*e.createdAt.seconds).format("hh:mm A")})]}),s.jsxs("div",{className:"flex items-center mt-2 justify-center",children:[s.jsx("div",{className:"w-28 h-12 flex items-center justify-center bg-red-100 rounded-md mr-3",children:s.jsx(U,{className:"text-red-500 text-3xl"})}),s.jsxs("p",{className:"text-xs flex text-left text-gray-700 font-opensans mt-2",children:["Order from ",e.userInfo.displayName," (Order ID:"," ",e.id,") for"," ",e.cartItems.reduce(((e,s)=>e+s.quantity),0)," ","items was declined by you. click to see reason why."]})]})]})},e.id)))})]});return s.jsxs("div",{children:[i("Today",r),i("Yesterday",a),i("This Week",o),i("Older",l)]})},oe=({orders:o,openModal:l})=>{const[i,d]=e.useState([]),[c,x]=e.useState({}),[m,u]=e.useState([]),[p,h]=e.useState({}),[f,b]=e.useState({});return e.useEffect((()=>{if(!o)return;const e=o.filter((e=>!0===e.isStockpile&&e.stockpileDocId)).reduce(((e,s)=>{const t=`${s.vendorId}-${s.stockpileDocId}`;return e[t]||(e[t]=[]),e[t].push(s),e}),{}),s=Object.keys(e).map((s=>{const t=e[s];t.sort(((e,s)=>e.createdAt.seconds-s.createdAt.seconds));const r=t[0],a=t.length-1,n=t.reduce(((e,s)=>e+parseFloat(s.total||0)),0),o=t.reduce(((e,s)=>e+parseFloat(s.subtotal||0)),0);return{...r,repileCount:a,combinedTotal:n,combinedSubtotal:o,stockpileDocId:r.stockpileDocId,chosenWeeks:r.chosenWeeks||null,endDate:r.endDate||null,startDate:r.startDate||null,cartItems:t.flatMap((e=>e.cartItems.map((s=>({...s,_orderId:e.id,_orderCreatedAt:e.createdAt})))))}}));s.sort(((e,s)=>s.createdAt.seconds-e.createdAt.seconds));(async()=>{const e=await Promise.all(s.map((async e=>{if(e.stockpileDocId)try{const s=t(r,"stockpiles",e.stockpileDocId),n=await a(s);if(n.exists()){const s=n.data();return{...e,startDate:s.startDate||e.startDate,endDate:s.endDate||e.endDate,chosenWeeks:s.chosenWeeks||e.chosenWeeks,isActive:s.isActive}}}catch(s){}return e})));d(e)})()}),[o]),e.useEffect((()=>{const e={};i.forEach((s=>{const t=s.chosenWeeks;null!=t&&(e[t]||(e[t]=[]),e[t].push(s))}));const s=Object.keys(e).map((e=>Number(e))).sort(((e,s)=>e-s));x(e),u(s)}),[i]),e.useEffect((()=>{(async()=>{var e;const s={};for(const n of i)if(n.cartItems&&n.cartItems.length>0){const o=n.cartItems[0],l=t(r,"products",o.productId),i=await a(l);if(i.exists()){const t=i.data();let r=[],a=[];if(o.subProductId){const s=null==(e=t.subProducts)?void 0:e.find((e=>e.subProductId===o.subProductId));(null==s?void 0:s.images)&&(r=r.concat(s.images))}if(o.variantAttributes){const e=o.variantAttributes,s=(t.variants||[]).find((s=>s.color===e.color&&s.size===e.size));(null==s?void 0:s.images)&&(a=a.concat(s.images))}r=r.concat(a.filter((e=>!r.includes(e)))),0===r.length&&t.imageUrls&&(r=r.concat(t.imageUrls)),s[n.id]=r}}h(s)})()}),[i]),e.useEffect((()=>{const e=setInterval((()=>{b((e=>{const s={...e};return i.forEach((t=>{var r;const a=(null==(r=p[t.id])?void 0:r.length)||0;a>0&&(s[t.id]=((e[t.id]||0)+1)%a)})),s}))}),4e3);return()=>clearInterval(e)}),[i,p]),s.jsx("div",{children:m.map((e=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("h2",{className:"text-sm text-left font-semibold font-opensans text-gray-800 mt-3 mb-3",children:[e," Weeks Stockpile"]}),c[e].map((e=>{var t,r,a,o,i;const d="Delivered"===e.progressStatus,c="Shipped"===e.progressStatus,x=e.deliveredAt?n(e.deliveredAt.toDate?e.deliveredAt.toDate():e.deliveredAt).format("DD/MM/YYYY"):null,m=s.jsxs("span",{children:[s.jsx("span",{className:"font-semibold text-customOrange",children:null==(t=e.userInfo)?void 0:t.displayName})," ","is currently stockpiling."]}),u=s.jsxs("span",{children:["You have shipped"," ",s.jsx("span",{className:"font-semibold text-customOrange",children:null==(r=e.userInfo)?void 0:r.displayName})," ","'s stockpile."]}),h=s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsxs("span",{children:[s.jsx("span",{className:"font-semibold text-customOrange",children:null==(a=e.userInfo)?void 0:a.displayName})," ","'s stockpile has been ",s.jsx("strong",{children:"marked delivered by you"}),x&&s.jsxs(s.Fragment,{children:[" ","on ",s.jsx("strong",{children:x}),"."]})]}),s.jsx(T,{className:"text-green-600 relative -top-6 text-4xl"})]});return s.jsxs("div",{className:"p-2 bg-gray-100 rounded-lg flex items-center cursor-pointer mb-3",onClick:()=>l(e),children:[s.jsx("div",{className:"w-16 h-16 flex-shrink-0 mr-3",children:p[e.id]&&p[e.id].length>0?s.jsx("img",{src:p[e.id][f[e.id]||0],alt:"Product",className:"w-full h-full object-cover rounded"}):s.jsx("div",{className:"w-full h-full bg-gray-200 rounded"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"text-xs text-gray-900 font-opensans",children:d?h:c?u:m}),!d&&!c&&e.endDate&&s.jsxs("p",{className:"text-xs font-opensans mt-1",children:["Valid until:"," ",n((null==(o=e.endDate)?void 0:o.toDate)?e.endDate.toDate():e.endDate).format("DD/MM/YYYY")]}),c&&e.shippedAt&&s.jsxs("p",{className:"text-xs font-opensans mt-1",children:["Mark as Shipped on:"," ",n((null==(i=e.shippedAt)?void 0:i.toDate)?e.shippedAt.toDate():e.shippedAt).format("DD/MM/YYYY")]}),!d&&e.repileCount>0&&s.jsx("p",{className:"text-xs bg-customOrange px-2 py-1 rounded-xl w-20 text-center text-white font-opensans mt-1",children:`+${e.repileCount} repile${e.repileCount>1?"s":""}`})]})]},e.stockpileDocId)}))]},e)))})},le=({isOpen:o,onClose:i,order:D,fetchVendorRevenue:C,setTotalRevenue:O})=>{const[A,T]=e.useState({}),[Z,ee]=e.useState({}),[re,ae]=e.useState(""),[ne,oe]=e.useState(!0),[le,ie]=e.useState(!1),[de,ce]=e.useState(""),[xe,me]=e.useState(!1),[ue,pe]=e.useState(null),[he,fe]=e.useState(!1),[be,ve]=e.useState(!1),[je,ge]=e.useState(!1),[Ne,ye]=e.useState(!1),[ke,we]=e.useState(!1),[Ie,Se]=e.useState(!1),[De,Ce]=e.useState(!1),[Oe,Pe]=e.useState(!1),[Ae,Re]=e.useState(""),[Me,Ee]=e.useState(""),[$e,Ye]=e.useState(""),[Ue,Be]=e.useState(!1),[Te,Fe]=e.useState(""),[We,_e]=e.useState(!1);null==D||D.userId;const Ve=m(),[qe,ze]=e.useState([]),[Le,He]=e.useState((null==D?void 0:D.vendorName)||"Your Vendor Name"),[Je,Ke]=e.useState(null),[Ge,Qe]=e.useState(!1);e.useEffect((()=>{o&&D&&(async()=>{if(!D.vendorName&&D.vendorId){const e=t(r,"vendors",D.vendorId),s=await a(e);if(s.exists()){const e=s.data().shopName||"Unknown Vendor";He(e)}}else D.vendorName&&He(D.vendorName)})()}),[o,D]),e.useEffect((()=>{o&&D&&(async()=>{var e;const s={},n={};for(const o of D.cartItems){const l=t(r,"products",o.productId),i=await a(l);if(i.exists()){const t=i.data();if(o.subProductId){const r=null==(e=t.subProducts)?void 0:e.find((e=>e.subProductId===o.subProductId));r&&(s[o.subProductId]=r.images[0],n[o.subProductId]={name:t.name,price:t.price,color:r.color,size:r.size})}else o.variantAttributes?(s[o.productId]=t.imageUrls[0],n[o.productId]={name:t.name,price:t.price,color:o.variantAttributes.color,size:o.variantAttributes.size}):(s[o.productId]=t.imageUrls[0],n[o.productId]={name:t.name,price:t.price})}}if(T(s),ee(n),D.vendorId){const e=t(r,"vendors",D.vendorId),s=await a(e);s.exists()&&ae(s.data().deliveryMode||"Not specified")}oe(!1)})()}),[o,D]),e.useEffect((()=>{if(D&&D.endDate){const e=setInterval((()=>{const e=D.endDate.toDate?D.endDate.toDate():D.endDate,s=n(),t=n(e).diff(s);pe(t>0?t:0)}),1e3);return()=>clearInterval(e)}}),[D]),e.useEffect((()=>{o&&D&&D.isStockpile&&(async()=>{if(D.isStockpile&&D.stockpileDocId){const e=l(r,"orders"),s=D.vendorId&&D.stockpileDocId?y(e,k("vendorId","==",D.vendorId),k("stockpileDocId","==",D.stockpileDocId)):null;if(s){const e=(await w(s)).docs.map((e=>({id:e.id,...e.data()})));e.sort(((e,s)=>e.createdAt.seconds-s.createdAt.seconds)),ze(e)}}})()}),[o,D]);const Xe=()=>{Pe(!1)},Ze=qe.reduce(((e,s)=>{if("accepted"!==s.vendorStatus)return e;const t=parseFloat(s.subtotal);return e+(isNaN(t)?0:t)}),0);e.useEffect((()=>{o&&D&&(async()=>{if(D&&D.id)try{const e=t(r,"orders",D.id),s=await a(e);if(s.exists()){const e=s.data().orderReference;if(e){const s="d4f6f60628bfc7bdc540b58dda56067333685de482d8ec416581bc5bbb65aaa2",t="https://mythriftpayments.site/api/v1/",r=await fetch(`${t}/calculateVendorPay/${e}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(r.ok){const e=await r.json();e&&e.amount&&Ke(e.amount)}}}}catch(e){}})()}),[o,D]);const es=!!(null==D?void 0:D.endDate)&&0===ue;if(!D)return null;const ss=D.isStockpile&&"Pending"===D.progressStatus,{userInfo:ts,cartItems:rs,progressStatus:as,note:ns,createdAt:os,subtotal:ls,riderInfo:is={}}=D;return s.jsx(P,{isOpen:o,onRequestClose:i,contentLabel:"Order Details",ariaHideApp:!1,className:"modal-content-order",overlayClassName:"modal-overlay",children:s.jsxs("div",{className:"relative h-full pb-12 px-3 overflow-y-auto space-y-4",children:[s.jsxs("div",{className:"sticky -top-1 bg-white z-10 py-4  flex justify-between items-center ",children:[s.jsx(u,{className:"text-2xl cursor-pointer",onClick:i}),s.jsx("h1",{className:"font-opensans text-black font-semibold text-base",children:D.isStockpile?"Stockpile Details":"Order Details"}),"Declined"===as?s.jsx(H,{className:"text-xl text-customRichBrown cursor-pointer",onClick:()=>{_e(!0)}}):s.jsx(p,{className:"text-xl cursor-pointer "+("Delivered"===as?"opacity-50 cursor-not-allowed":""),onClick:()=>{"Pending"===as||"Shipped"===as||"In Progress"===as?Qe(!0):"Delivered"===as&&d.error("Cannot call, order is already delivered")}})]}),s.jsxs(P,{isOpen:Ge,onRequestClose:()=>Qe(!1),contentLabel:"Call Confirmation",ariaHideApp:!1,className:"modal-content-reason",overlayClassName:"modal-overlay",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(h,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Call Confirmation"})]}),s.jsx(Y,{className:"text-black text-xl cursor-pointer",onClick:()=>Qe(!1)})]}),s.jsx("p",{className:"text-xs text-gray-700 font-opensans mb-6",children:"As you prepare to speak with a potential customer, remember to be friendly and approachable. You can call them to:"}),s.jsxs("div",{className:"text-xs text-gray-700 font-opensans mb-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold font-opensans text-sm text-black",children:"1. Confirm their Order:"}),s.jsx("p",{className:"font-opensans text-xs",children:"Ensure they are aware of the details of their order and that everything is correct."})]}),s.jsx("hr",{className:"my-2 border-gray-200"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold font-opensans text-sm text-black",children:"2. Notify them about Order Status:"}),s.jsx("p",{className:"font-opensans text-xs",children:"Provide updates on their order status to keep them informed and engaged."})]})]}),s.jsx("p",{className:"text-xs text-gray-700 font-opensans mb-6",children:"Always maintain a polite tone throughout the conversation, as this reflects our commitment to excellent customer service. Please adhere to our communication guidelines to create a positive experience for our customers."}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>{Qe(!1),window.open(`tel:${ts.phoneNumber}`,"_self")},className:"bg-customOrange text-white font-opensans py-2 px-8 rounded-full",children:"Proceed"})})]}),s.jsxs("div",{className:"border border-black rounded-lg py-4 px-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(M,{className:"text-customRichBrown"})}),s.jsx("p",{className:"text-sm font-opensans font-medium text-customRichBrown",children:"Declined"===as?"Decline Reason":"Customer Details"})]}),s.jsx("div",{className:"space-y-4",children:"Declined"===as?s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(V,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:D.declineReason||"No reason provided"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(E,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Name:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:ne?s.jsx(f,{width:100}):(null==ts?void 0:ts.displayName)||"Unknown User"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(B,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Email:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow "+("Delivered"===as?"blur-sm":""),children:ne?s.jsx(f,{width:150}):ts.email||"Not Available"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(p,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Phone:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow "+("Delivered"===as?"blur-sm":""),children:ne?s.jsx(f,{width:120}):ts.phoneNumber||"Not Available"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(F,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Location:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow "+("Delivered"===as?"blur-sm":""),children:ne?s.jsx(f,{width:200}):ts.address||"Not Available"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(b,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:D.isStockpile?"Stockpile ID:":"Order ID:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:D.isStockpile?D.stockpileDocId:D.id})]}),D.isStockpile&&D.stockpileDuration&&"Pending"!==D.progressStatus&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(Q,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Duration:"}),s.jsxs("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:[D.stockpileDuration||"Not Available"," weeks"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(v,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Start Date:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:D.startDate?n(D.startDate.toDate()).format("DD/MM/YYYY"):"Not Available"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(v,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"End Date:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:D.endDate?n(D.endDate.toDate()).format("DD/MM/YYYY"):"Not Available"})]})]}),ns&&s.jsxs("div",{className:"flex items-start space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(V,{className:"text-gray-500 text-xl mt-1"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Note:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:ns})]})]})})]}),("Shipped"===D.progressStatus||"Delivered"===D.progressStatus)&&s.jsxs("div",{className:"border border-black rounded-lg py-4 px-3 mt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(R,{className:"text-customRichBrown"})}),s.jsx("p",{className:"text-sm font-opensans font-medium text-customRichBrown",children:"Rider Details"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(E,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Rider Name:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:(null==is?void 0:is.riderName)||"Not Available"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(p,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Rider Phone:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:(null==is?void 0:is.riderNumber)||"Not Available"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-100",children:[s.jsx(V,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"text-gray-500 text-sm font-opensans",children:"Note:"}),s.jsx("p",{className:"ml-6 font-opensans text-black text-sm flex-grow",children:(null==is?void 0:is.note)||"None"})]})]})]}),s.jsx("div",{className:"bg-white rounded-lg space-y-6",children:rs.map(((e,t)=>{var r,a,o,l,i,d;return s.jsxs("div",{className:"text-sm text-gray-700 mb-4",children:[ne?s.jsx(f,{height:240}):A[e.subProductId||e.productId]&&s.jsx("img",{src:A[e.subProductId||e.productId],alt:"Product Image",className:"w-full h-60 p-1 border-opacity-45 border-dashed border-customBrown border-2 object-cover rounded mb-4"}),s.jsxs("div",{className:"border border-black rounded-lg py-4 px-3",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(j,{className:"text-customRichBrown text-xl"})}),s.jsxs("p",{className:"ml-2 text-base font-opensans font-medium text-customRichBrown",children:["Product ",t+1]})]}),s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(j,{className:"text-orange-700 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Product Name:"}),s.jsx("p",{className:"ml-10 font-opensans text-black text-sm flex-grow",children:ne?s.jsx(f,{width:100}):(null==(r=Z[e.subProductId||e.productId])?void 0:r.name)||"Unknown Product"})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(W,{className:"text-green-500 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Price:"}),s.jsx("p",{className:"ml-10 font-opensans bg-green-100 px-2 h-6 text-black text-sm flex justify-center items-center rounded-md",children:ne?s.jsx(f,{width:60}):`â‚¦${(null==(a=Z[e.subProductId||e.productId])?void 0:a.price.toLocaleString())||"N/A"}`})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(g,{className:"text-blue-800 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Quantity:"}),s.jsx("p",{className:"ml-10 font-opensans bg-blue-100 px-2 h-6 rounded-md text-black text-sm flex justify-center items-center",children:ne?s.jsx(f,{width:20}):e.quantity})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(_,{className:"text-orange-700 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Color:"}),s.jsx("p",{className:"ml-10 font-opensans text-black text-sm flex-grow",children:ne?s.jsx(f,{width:80}):(null==(o=Z[e.subProductId])?void 0:o.color)||(null==(l=e.variantAttributes)?void 0:l.color)||"N/A"})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(J,{className:"text-blue-800 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Size:"}),s.jsx("p",{className:"ml-10 font-opensans text-black text-sm flex-grow",children:ne?s.jsx(f,{width:50}):(null==(i=Z[e.subProductId])?void 0:i.size)||(null==(d=e.variantAttributes)?void 0:d.size)||"N/A"})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(v,{className:"text-indigo-700 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Status:"}),s.jsx("p",{className:"ml-10 font-opensans text-black text-sm",children:s.jsx("span",{className:""+("Pending"===D.progressStatus?"text-black px-2 bg-yellow-100 h-6 rounded-md flex justify-center items-center":"In Progress"===D.progressStatus?"text-black px-2 bg-blue-100 h-6 rounded-md flex justify-center items-center":"Shipped"===D.progressStatus?"text-black px-2 bg-green-100 h-6 rounded-md flex justify-center items-center":"Delivered"===D.progressStatus?"text-white px-2 bg-green-600 h-6 rounded-md flex justify-center items-center":"text-black px-2 bg-red-100 h-6 rounded-md flex justify-center items-center"),children:ne?s.jsx(f,{width:50}):s.jsxs(s.Fragment,{children:["Delivered"===D.progressStatus&&s.jsx(X,{className:"mr-1 text-yellow-300"}),D.progressStatus]})})})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(R,{className:"text-orange-700 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Delivery Mode:"}),s.jsx("p",{className:"ml-4 font-opensans text-black text-sm flex-grow",children:ne?s.jsx(f,{width:100}):D.isStockpile?D.isActive?"Delivery when stockpile has ended":"Delivery":D.deliveryInfo?`${re} with Kwik Logistics`:re||"Not Specified"})]}),D.isStockpile&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(b,{className:"text-gray-500 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Order ID:"}),s.jsx("p",{className:"ml-10 font-opensans text-black text-sm flex-grow",children:e._orderId||D.id})]}),s.jsxs("div",{className:"flex items-center pb-3 border-b border-gray-100",children:[s.jsx(v,{className:"text-indigo-700 text-xl"}),s.jsx("p",{className:"ml-3 text-gray-500 text-sm font-opensans",children:"Created At:"}),s.jsx("p",{className:"ml-10 font-opensans text-black text-sm flex-grow",children:e._orderCreatedAt?n(e._orderCreatedAt.toDate()).format("MMMM DD [at] hh:mm A"):n(1e3*D.createdAt.seconds).format("MMMM DD [at] hh:mm A")})]})]})]})]})]},t)}))}),!(D.isStockpile||D.stockpileDuration)&&s.jsxs("div",{className:"border border-black rounded-lg py-4 px-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(N,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base text-customRichBrown font-semibold",children:"Balance"})]}),s.jsxs("div",{className:"space-y-2 mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{className:"text-green-300 text-lg"}),s.jsx("p",{className:"font-opensans text-xs text-gray-700",children:"Subtotal:"})]}),s.jsxs("p",{className:"font-opensans text-xs font-semibold text-gray-700",children:["â‚¦",(null==ls?void 0:ls.toLocaleString())||"0.00"]})]}),Je&&s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(G,{className:"text-green-500"}),s.jsx("p",{className:"font-opensans text-xs text-gray-700",children:"Amount to Receive Now (60%):"})]}),s.jsxs("p",{className:"font-opensans text-xs font-semibold text-gray-700",children:["â‚¦",Je.vendor60Pay.toLocaleString()||"0.00"]})]}),Je&&s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(G,{className:"text-blue-500"}),s.jsx("p",{className:"font-opensans text-xs text-gray-700",children:"Balance to Receive on Delivery (40%):"})]}),s.jsxs("p",{className:"font-opensans text-xs font-semibold text-gray-700",children:["â‚¦",Je.vendor40pay.toLocaleString()||"0.00"]})]})]})]}),D.isStockpile&&D.stockpileDuration&&s.jsxs("div",{className:"border border-black rounded-lg py-4 px-3 mt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(N,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base text-customRichBrown font-semibold",children:"Stockpile value"})]}),!ss&&s.jsx("div",{className:"space-y-2 mt-3",children:s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{className:"text-green-300 text-lg"}),s.jsx("p",{className:"font-opensans text-xs text-gray-700",children:"Subtotal:"})]}),s.jsxs("p",{className:"font-opensans text-xs font-semibold text-gray-700",children:["â‚¦",Number(Ze).toLocaleString()]})]})}),ss&&s.jsx("div",{className:"space-y-2 mt-3",children:s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{className:"text-green-300 text-lg"}),s.jsx("p",{className:"font-opensans text-xs text-gray-700",children:"Subtotal:"})]}),s.jsxs("p",{className:"font-opensans text-xs font-semibold text-gray-700",children:["â‚¦",Number(D.subtotal||0).toLocaleString()]})]})})]}),D.isStockpile&&"In Progress"===D.progressStatus&&s.jsxs("div",{className:"flex flex-col items-center mt-4",children:[!(D.requestedForShipping||!D.isActive||es)&&s.jsxs("div",{className:"mb-2 bg-gray-200 text-gray-700 text-[10px] px-3 py-1 rounded-full font-opensans",children:["available in ",(()=>{if(null===ue||0===ue)return"";const e=n.duration(ue);return`${e.days()}d ${e.hours()}h ${e.minutes()}m ${e.seconds()}s`})()]}),s.jsx("button",{onClick:()=>Pe(!0),className:"font-opensans px-16 py-2 text-base rounded-full transition-opacity duration-300\n        "+(D.requestedForShipping||!D.isActive||es?"bg-customOrange text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),disabled:!(D.requestedForShipping||!D.isActive||es),children:"Move to Shipping"})]}),s.jsx("div",{className:"flex justify-between mt-4",children:"Pending"===D.progressStatus&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>ie(!0),className:"bg-transparent font-medium text-customOrange text-sm font-opensans py-2.5 px-14 rounded-full border-customBrown border",children:ke?s.jsx($,{strokeColor:"orange",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0}):"Decline"}),s.jsx("button",{onClick:async()=>{var e,s,n,o,l,m;me(!0);try{const u=t(r,"orders",D.id),p=await a(u);if(!p.exists())return void d.error("Order not found");const h=p.data(),f=c(x,"acceptVendorOrder"),b=await f({orderId:D.id}),{alreadyAccepted:v,vendor60Pay:j,isStockpile:g,stockpileDuration:N}=b.data||{};if(v)return d.success("Order already accepted âœ…"),void i();let y=null,k=null;const w=await a(t(r,"vendors",D.vendorId));if(w.exists()&&(y=w.data().coverImageUrl||null),null==(e=D.cartItems)?void 0:e.length){const e=D.cartItems[0],i=await a(t(r,"products",e.productId));if(i.exists()){const t=i.data();k=e.subProductId?(null==(o=null==(n=null==(s=t.subProducts)?void 0:s.find((s=>s.subProductId===e.subProductId)))?void 0:n.images)?void 0:o[0])||null:(null==(l=t.imageUrls)?void 0:l[0])||null}}if(await se(h.userId,D.id,"In Progress",(null==(m=w.data())?void 0:m.shopName)||"Vendor",y,k,null,null),!g&&j){const e=`â‚¦${Number(j).toLocaleString()}`;await te(D.vendorId,"Youâ€™ve Been Credited ðŸ’°",`Youâ€™ve received ${e} as a 60% payout for order ID: ${D.id}.`,"transactions")}else g&&await te(D.vendorId,"Stockpile Payment in Full ðŸ’°",`You have been paid in full for the stockpile order (ID: ${D.id}).`,"transactions");d.success("Order accepted successfully"),i()}catch(u){d.error("Failed to accept the order")}finally{me(!1)}},className:"text-sm font-medium text-white font-opensans py-2.5 px-14 rounded-full bg-customOrange",disabled:xe,children:xe?s.jsx($,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0}):"Accept"})]})}),s.jsxs("div",{className:"flex justify-between mt-4",children:["Shipped"===as&&!D.isStockpile&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{ve(!0)},className:"bg-transparent font-medium text-customOrange text-xs font-opensans py-2.5 px-8 rounded-full border-customBrown border",children:"Contact Us"}),s.jsx("button",{onClick:()=>fe(!0),className:"text-xs font-medium text-white font-opensans py-2.5 px-8 rounded-full bg-customOrange",disabled:Ne,children:Ne?s.jsx($,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0}):"Mark as Delivered"})]}),"Shipped"===as&&D.isStockpile&&s.jsx("div",{className:"w-full flex justify-center",children:s.jsx("button",{onClick:()=>fe(!0),className:"text-xs font-medium text-white font-opensans py-2.5 px-8 rounded-full bg-customOrange",disabled:Ne,children:Ne?s.jsx($,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0}):"Mark Stockpile as Delivered"})})]}),s.jsxs(P,{isOpen:le,onRequestClose:()=>ie(!1),className:"modal-content-reason "+("Other"===de?"h-auto":"h-[50%]"),overlayClassName:"modal-overlay",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(U,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Reason for decline"})]}),s.jsx(Y,{className:"text-black text-xl cursor-pointer",onClick:()=>ie(!1)})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[["Out of stock","Delivery Timing","Can't deliver to Location","Other"].map(((e,t)=>s.jsxs("div",{className:"cursor-pointer flex items-center text-gray-800 mb-1 "+(de===e?"border-customOrange":"border-gray-200"),onClick:()=>{ce(e),"Other"!==e&&Fe("")},children:[s.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex justify-center items-center mr-3 "+(de===e?"border-customOrange":"border-customOrange border-opacity-80"),children:de===e&&s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"})}),s.jsx("span",{className:"font-opensans text-black",children:e})]},t))),"Other"===de&&s.jsx("input",{type:"text",placeholder:"Other reason...",className:"border px-2 h-20 text-xs rounded w-full",value:Te,onChange:e=>Fe(e.target.value)})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx("button",{onClick:()=>{de&&("Other"!==de||Te)?(async()=>{var e,s,n,o,l,m;if(!de&&""===Te)return void d.error("Select a reason or type one.");const u="Other"===de?Te:de;we(!0);try{const p=c(x,"declineVendorOrder"),{data:h}=await p({orderId:D.id,declineReason:u});if(h.alreadyDeclined)return d.success("Order already declined"),void i();const f=await a(t(r,"vendors",D.vendorId)),b=f.exists()?f.data().coverImageUrl??null:null;let v=null;if(null==(e=D.cartItems)?void 0:e.length){const e=D.cartItems[0],i=await a(t(r,"products",e.productId));if(i.exists()){const t=i.data();v=e.subProductId?(null==(o=null==(n=null==(s=t.subProducts)?void 0:s.find((s=>s.subProductId===e.subProductId)))?void 0:n.images)?void 0:o[0])||null:(null==(l=t.imageUrls)?void 0:l[0])||null}}await se(D.userId,D.id,"Declined",(null==(m=f.data())?void 0:m.shopName)||"Vendor",b,v,u,null),await te(D.vendorId,"Order Declined ðŸ›‘",`Order with ID: ${D.id} was declined. Reason: ${u}.`,"order"),d.success("Order declined successfully"),i()}catch(p){d.error("Failed to decline the order")}finally{we(!1)}})():d.error("Please select or enter a reason for decline.")},className:"bg-customOrange text-white font-opensans py-2 px-12 rounded-full",disabled:ke,children:ke?s.jsx($,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0}):"Send"})})]}),s.jsxs(P,{isOpen:Oe,onRequestClose:Xe,className:"modal-content-rider h-auto",overlayClassName:"modal-overlay backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(R,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Delivery Details"})]}),s.jsx(Y,{className:"text-xl relative -top-2",onClick:Xe})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsx("h1",{className:"text-xs font-opensans text-black font-medium",children:"Rider's Name"}),s.jsx("input",{type:"text",placeholder:"Rider's Name",value:Ae,onChange:e=>Re(e.target.value),className:"w-full p-2 border text-xs rounded h-10 focus:outline-none"}),s.jsx("h1",{className:"text-xs font-opensans text-black font-medium",children:"Rider's Number"}),s.jsx("input",{type:"number",placeholder:"Enter Rider's Phone Number",value:Me,onChange:e=>Ee(e.target.value.slice(0,11)),className:"w-full p-2 border text-xs h-10 rounded focus:outline-none"}),s.jsx("textarea",{placeholder:"Add a short note here (optional)",value:$e,onChange:e=>Ye(e.target.value),className:"w-full p-2 border text-xs h-20 rounded focus:outline-none"})]}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx("button",{onClick:async()=>{Se(!0);try{if(!qe||0===qe.length)throw new Error("No stockpile orders available.");const e=qe[0];for(const a of qe){if("Declined"===a.progressStatus)continue;const s=t(r,"orders",a.id);a.id===e.id?await I(s,{progressStatus:"Shipped",riderInfo:{riderName:Ae,riderNumber:Me,note:$e},shippedAt:S()}):await I(s,{progressStatus:"Shipped"})}if(D.stockpileDocId){const e=t(r,"stockpiles",D.stockpileDocId);await I(e,{isActive:!1})}await te(e.vendorId,"Stockpile Shipped",`Stockpile (ID: ${D.stockpileDocId}) has been shipped. Rider: ${Ae}`,"order");const s=c(x,"notifyUserStockpileUpdate");await s({eventType:"shipping",userEmail:e.userInfo.email,userName:e.userInfo.displayName,orderId:e.id,stockpileDocId:e.stockpileDocId,vendorName:Le,riderInfo:{riderName:Ae,riderNumber:Me,note:$e},userPhone:e.userInfo.phoneNumber}),d.success("Stockpile moved to Shipping successfully."),Pe(!1),i()}catch(e){d.error("Failed to move stockpile to Shipping.")}finally{Se(!1)}},className:"bg-customOrange text-white font-opensans py-2 px-12 rounded-full flex items-center",disabled:Ie||Ue,children:Ie?s.jsx($,{strokeColor:"white",width:"20"}):"Send"})})]}),s.jsxs(P,{isOpen:he,onRequestClose:()=>fe(!1),contentLabel:"Confirm Delivery",ariaHideApp:!1,className:"modal-content-reason",overlayClassName:"modal-overlay",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(h,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Confirm Delivery"})]}),s.jsx(Y,{className:"text-black text-xl cursor-pointer",onClick:()=>fe(!1)})]}),s.jsx("p",{className:"text-xs text-gray-700 font-opensans mb-6",children:"Please confirm that the order has been successfully delivered to the customer. Here are some points to ensure successful delivery:"}),s.jsxs("ul",{className:"list-disc pl-2 text-xs text-gray-700 font-opensans font-medium space-y-2",children:[s.jsxs("li",{className:"flex",children:[s.jsx(K,{className:"text-green-800 mr-4 text-4xl"})," You have spoken to the rider/logistics company, and they have confirmed that the order has been delivered."]}),s.jsxs("li",{className:"flex ",children:[s.jsx(K,{className:"text-green-800 mr-4 text-4xl"}),"You received delivery confirmation or a signed proof of delivery from the logistics provider."]})]}),s.jsxs("p",{className:"text-xs text-gray-700 font-opensans mt-4",children:["For more details on marking an order as delivered, please refer to our",s.jsx("span",{onClick:()=>{Ve("/delivery-guidelines")},className:"text-customOrange underline cursor-pointer",children:"Order Delivery Guide"}),"."]}),s.jsxs("div",{className:"flex mt-4 items-center mb-4",children:[s.jsx("input",{type:"checkbox",checked:je,onChange:()=>ge(!je),className:"mr-2"}),s.jsx("span",{className:"text-xs font-opensans text-red-500",children:"I confirm that the order has been delivered and accept full responsibility for this action."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>{D.isStockpile?(async()=>{var e,s,n,o,l;ye(!0);try{const m=c(x,"markStockpileDelivered"),{data:u}=await m({stockpileDocId:D.stockpileDocId});if(u.alreadyDelivered)return d.success("Stockpile already delivered âœ…"),void i();const p=qe.find((e=>e.id===u.primaryOrderId))||qe[0];let h=D.vendorName,f=null;if(!h&&D.vendorId){const e=await a(t(r,"vendors",D.vendorId));if(e.exists()){const s=e.data();h=s.shopName||"Unknown Vendor",f=s.coverImageUrl||null}}let b=null;if(null==(e=p.cartItems)?void 0:e.length){const e=p.cartItems[0],i=await a(t(r,"products",e.productId));if(i.exists()){const t=i.data();b=e.subProductId?(null==(o=null==(n=null==(s=t.subProducts)?void 0:s.find((s=>s.subProductId===e.subProductId)))?void 0:n.images)?void 0:o[0])||null:(null==(l=t.imageUrls)?void 0:l[0])||null}}await se(u.userId,p.id,"Delivered",h,f,b),await te(u.vendorId,"Stockpile Delivered ðŸ˜Š","Youâ€™ve marked this entire stockpile as delivered. If this was a mistake, reach out immediately!","order"),localStorage.removeItem(`vendorRevenue_${u.vendorId}`),localStorage.removeItem(`vendorRevenue_time_${u.vendorId}`),C(u.vendorId).then((e=>O(e))).catch((()=>{})),d.success("Stockpile marked as delivered. Congrats!"),i()}catch(m){d.error("Failed to mark stockpile as delivered")}finally{ye(!1),fe(!1)}})():(async()=>{var e,s,n,o,l;if(je){ye(!0);try{const m=c(x,"markOrderDelivered"),{data:u}=await m({orderId:D.id});if(u.alreadyDelivered)return d.success("Order is already delivered âœ…"),void i();let p=D.vendorName,h=null;if(!p&&D.vendorId){const e=await a(t(r,"vendors",D.vendorId));if(e.exists()){const s=e.data();p=s.shopName||"Unknown Vendor",h=s.coverImageUrl||null}}let f=null;if(null==(e=D.cartItems)?void 0:e.length){const e=D.cartItems[0],i=await a(t(r,"products",e.productId));if(i.exists()){const t=i.data();f=e.subProductId?(null==(o=null==(n=null==(s=t.subProducts)?void 0:s.find((s=>s.subProductId===e.subProductId)))?void 0:n.images)?void 0:o[0])||null:(null==(l=t.imageUrls)?void 0:l[0])||null}}D.kwikJob||await se(D.userId,D.id,"Delivered",p,h,f),await te(D.vendorId,"Order Delivered ðŸ˜Š","You marked this order as delivered.","order"),localStorage.removeItem(`vendorRevenue_${D.vendorId}`),localStorage.removeItem(`vendorRevenue_time_${D.vendorId}`),C(D.vendorId).then((e=>{O(e)})).catch((()=>{})),d.success("Order marked as delivered!"),i()}catch(m){d.error("Failed to mark as delivered. Please try again.")}finally{ye(!1),fe(!1)}}})()},className:"bg-customOrange text-white font-opensans py-2 px-8 rounded-full",disabled:!je||Ne,children:Ne?s.jsx($,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0}):"Confirm"})})]}),s.jsxs(P,{isOpen:We,onRequestClose:()=>_e(!1),contentLabel:"Decline Info",ariaHideApp:!1,className:"modal-content-reason",overlayClassName:"modal-overlay",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(z,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Declined Order"})]}),s.jsx(Y,{className:"text-black text-xl cursor-pointer",onClick:()=>_e(!1)})]}),s.jsx("div",{children:s.jsx("p",{className:"font-opensans text-sm text-black font-medium",children:"Order was declined by you (Vendor). This process cannot be reversed!"})})]}),s.jsxs(P,{isOpen:De,onRequestClose:()=>Ce(!1),contentLabel:"About Charges",ariaHideApp:!1,className:"modal-content-charge",overlayClassName:"modal-overlay backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(L,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"About Charges"})]}),s.jsx(Y,{className:"text-black text-xl cursor-pointer",onClick:()=>Ce(!1)})]}),s.jsx("p",{className:"text-xs text-gray-700 font-opensans mb-6",children:"Please note that the charges reflected in the total amount after tax are incurred due to processing fees from our payment partners (Paystack). If you have any questions or concerns, please contact support. My Thrift does not take any percentage from your stipend."}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>Ce(!1),className:"bg-customOrange text-white font-opensans py-1.5 text-xs px-6 rounded-full",children:"I Understand"})})]}),s.jsxs(P,{isOpen:be,onRequestClose:()=>ve(!1),contentLabel:"Contact Support",ariaHideApp:!1,className:"modal-content-reason",overlayClassName:"modal-overlay",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-7 h-7 bg-rose-100 flex justify-center items-center rounded-full",children:s.jsx(h,{className:"text-customRichBrown"})}),s.jsx("h2",{className:"font-opensans text-base font-semibold",children:"Contact Support"})]}),s.jsx(Y,{className:"text-black text-xl cursor-pointer",onClick:()=>ve(!1)})]}),s.jsx("p",{className:"text-xs text-gray-700 font-opensans mb-6",children:"If you are facing issues with this order, please contact us. Recommended reasons to call:"}),s.jsxs("ul",{className:"text-xs text-gray-700 font-opensans mb-6 list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"- Order mishandling or damage."}),s.jsx("li",{children:"- Rider missing or unresponsive."}),s.jsx("li",{children:"- Issues with the delivery location."}),s.jsx("li",{children:"- Delivery delayed beyond the expected timeframe."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>{ve(!1),window.open("tel:08105911662","_self")},className:"bg-customOrange text-white font-opensans py-2 px-8 rounded-full",children:"Proceed"})})]})]})})},ie=()=>{const{currentUser:t}=D(),[r,a]=e.useState("Pending"),[n,o]=e.useState(!1),[l,i]=e.useState(null),[d,c]=e.useState(0),x=C((e=>{var s;return null==(s=e.orders)?void 0:s.orders})),m=null==x,u=e.useMemo((()=>{if(!x||!(null==t?void 0:t.uid))return[];let e=[];return e="Stockpiles"===r?x.filter((e=>!0===e.isStockpile&&e.vendorId===t.uid&&"accepted"===e.vendorStatus)):"Shipped"===r?x.filter((e=>!e.isStockpile&&["Shipped","Delivered"].includes(e.progressStatus))):x.filter((e=>e.progressStatus===r)),e.sort(((e,s)=>{var t,r,a,n;const o=(null==(r=null==(t=e.createdAt)?void 0:t.toMillis)?void 0:r.call(t))||0;return((null==(n=null==(a=s.createdAt)?void 0:a.toMillis)?void 0:n.call(a))||0)-o}))}),[x,r,null==t?void 0:t.uid]),p=e=>{i(e),o(!0)};return s.jsxs(s.Fragment,{children:[s.jsx(Z,{title:"Vendor Orders - My Thrift",description:"Orders on your My Thrift store",url:"https://www.shopmythrift.store/vendor-orders"}),s.jsxs("div",{className:"p-3 bg-white min-h-screen flex flex-col items-center",children:[s.jsx(O,{}),s.jsxs("div",{className:"bg-customDeepOrange rounded-xl w-full h-28 text-center mb-4 flex items-center justify-center relative",children:[s.jsx("div",{className:"absolute top-0 right-0",children:s.jsx("img",{src:"./Vector.png",alt:"icon",className:"w-16 h-20"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("h1",{className:"font-opensans font-normal text-white text-sm capitalize",children:[r," Orders"]}),s.jsx("p",{className:"text-4xl font-opensans font-semibold text-white mt-2",children:u.length})]})]}),s.jsx("div",{className:"tabs flex flex-wrap justify-center gap-5 mb-1",children:["Pending","Stockpiles","In Progress","Shipped","Declined"].map((e=>s.jsxs("button",{onClick:()=>a(e),className:"relative pb-2 text-xs font-normal font-opensans "+(r===e?"border-b-2 border-customDeepOrange text-customDeepOrange":"text-gray-500"),children:[e,"Stockpiles"===e&&s.jsx("span",{className:"absolute -top-2.5 -right-4 bg-customOrange text-[10px] text-white px-1 rounded-md font-bold",children:"Beta"})]},e)))}),s.jsx("div",{className:"orders-list pb-16 w-full px-4 space-y-3 text-center",children:m?s.jsx(f,{count:2,height:60,className:"mb-4"}):u.length>0?"Pending"===r?s.jsx(ee,{orders:u,openModal:p}):"Stockpiles"===r?s.jsx(oe,{orders:u,openModal:e=>{i(e),o(!0)}}):"In Progress"===r?s.jsx(re,{orders:u,openModal:p}):"Shipped"===r?s.jsx(ae,{orders:u,openModal:p}):s.jsx(ne,{orders:u,openModal:p}):s.jsx("div",{className:"text-gray-500 text-sm mt-6",children:(()=>{switch(r){case"Pending":return s.jsx("div",{className:"text-center translate-y-20 text-gray-700 text-xs font-normal font-opensans",children:"ðŸ“¦ No pending orders at the moment. Keep an eye here â€“ your next sale could be just around the corner!"});case"Stockpiles":return s.jsx("div",{className:"text-center translate-y-20 text-gray-700 text-xs font-normal font-opensans",children:"ðŸ“¦ No stockpile orders yet. Encourage customers to stockpile, support eco friendly fashionðŸŒ´."});case"In Progress":return s.jsx("div",{className:"text-center translate-y-20 text-gray-700 text-xs font-normal font-opensans",children:"ðŸš§ All caught up! No orders in progress right now."});case"Shipped":return s.jsx("div",{className:"text-center translate-y-20 text-gray-700 text-xs font-normal font-opensans",children:"ðŸ“¦ No shipped or delivered orders to track currently. Your fulfilled orders will show here."});case"Declined":return s.jsx("div",{className:"text-center translate-y-20 text-gray-700 text-xs font-normal font-opensans",children:"ðŸ™ No declined orders in the list. Keep providing great service!"});default:return s.jsx("div",{className:"text-center translate-y-20 text-gray-700 text-xs font-normal font-opensans",children:"No orders found."})}})()})}),s.jsx(le,{isOpen:n,onClose:()=>{i(null),o(!1)},order:l,fetchVendorRevenue:async e=>{try{const s="d4f6f60628bfc7bdc540b58dda56067333685de482d8ec416581bc5bbb65aaa2",t="https://mythriftpayments.site/api/v1/",r=await fetch(`${t}/vendorRevenue/${e}`,{method:"GET",headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}});if(!r.ok)throw new Error("Failed to fetch vendor revenue");const a=await r.json();return c(a.revenue),a.revenue}catch(s){throw s}},setTotalRevenue:c})]})]})};export{ie as default};
