import{j as i,L as t,r as s,h as a,i as o,bu as x,c as e,a as d,q as r,dh as n,w as k,g as y,e7 as c,y as m,d as p}from"./index-CvIXhaMv.js";const h={nm:"4 Springy Dots Loader",ddd:0,h:1e3,w:1e3,meta:{g:"@lottiefiles/toolkit-js 0.33.2"},layers:[{ty:4,nm:"Dot_04",sr:1,st:11,op:72,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{s:!0,x:{a:0,k:723.3,ix:3},y:{a:0,k:494,ix:4},z:{a:0,k:0}},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,174],[0,-176]]},ix:2}},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:2,e:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[49.5],t:12},{o:{x:.333,y:0},i:{x:.667,y:1},s:[97],t:24},{o:{x:.333,y:0},i:{x:.667,y:1},s:[28.8],t:34},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.2],t:43},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.6],t:51},{s:[49.5],t:59}],ix:2},o:{a:0,k:0,ix:3},s:{a:1,k:[{o:{x:.527,y:0},i:{x:.774,y:.963},s:[49.7],t:15},{o:{x:1,y:0},i:{x:.667,y:1},s:[97],t:25},{o:{x:.739,y:0},i:{x:.667,y:1},s:[28.9],t:35},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.3],t:45},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.3],t:52},{s:[49.7],t:59}],ix:1},m:1},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:114,ix:5},c:{a:0,k:[.9216,.9216,.9216],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"Dot_03",sr:1,st:7,op:72,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{s:!0,x:{a:0,k:574.9,ix:3},y:{a:0,k:494,ix:4},z:{a:0,k:0}},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,174],[0,-176]]},ix:2}},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:2,e:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[49.5],t:8},{o:{x:.333,y:0},i:{x:.667,y:1},s:[97],t:20},{o:{x:.333,y:0},i:{x:.667,y:1},s:[28.8],t:30},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.2],t:39},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.6],t:47},{s:[49.5],t:55}],ix:2},o:{a:0,k:0,ix:3},s:{a:1,k:[{o:{x:.527,y:0},i:{x:.774,y:.963},s:[49.7],t:11},{o:{x:1,y:0},i:{x:.667,y:1},s:[97],t:21},{o:{x:.739,y:0},i:{x:.667,y:1},s:[28.9],t:31},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.3],t:41},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.3],t:48},{s:[49.7],t:55}],ix:1},m:1},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:114,ix:5},c:{a:0,k:[.9216,.9216,.9216],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"Dot_02",sr:1,st:3,op:72,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{s:!0,x:{a:0,k:426.5,ix:3},y:{a:0,k:494,ix:4},z:{a:0,k:0}},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,174],[0,-176]]},ix:2}},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:2,e:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[49.5],t:4},{o:{x:.333,y:0},i:{x:.667,y:1},s:[97],t:16},{o:{x:.333,y:0},i:{x:.667,y:1},s:[28.8],t:26},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.2],t:35},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.6],t:43},{s:[49.5],t:51}],ix:2},o:{a:0,k:0,ix:3},s:{a:1,k:[{o:{x:.527,y:0},i:{x:.774,y:.963},s:[49.7],t:7},{o:{x:1,y:0},i:{x:.667,y:1},s:[97],t:17},{o:{x:.739,y:0},i:{x:.667,y:1},s:[28.9],t:27},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.3],t:37},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.3],t:44},{s:[49.7],t:51}],ix:1},m:1},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:114,ix:5},c:{a:0,k:[.9216,.9216,.9216],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"Dot_01",sr:1,st:-1,op:72,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[278,494,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,174],[0,-176]]},ix:2}},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:2,e:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[49.5],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[97],t:12},{o:{x:.333,y:0},i:{x:.667,y:1},s:[28.8],t:22},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.2],t:31},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.6],t:39},{s:[49.5],t:47}],ix:2},o:{a:0,k:0,ix:3},s:{a:1,k:[{o:{x:.527,y:0},i:{x:.774,y:.963},s:[49.7],t:3},{o:{x:1,y:0},i:{x:.667,y:1},s:[97],t:13},{o:{x:.739,y:0},i:{x:.667,y:1},s:[28.9],t:23},{o:{x:.333,y:0},i:{x:.667,y:1},s:[57.3],t:33},{o:{x:.333,y:0},i:{x:.667,y:1},s:[45.3],t:40},{s:[49.7],t:47}],ix:1},m:1},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:114,ix:5},c:{a:0,k:[.9216,.9216,.9216],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4}],v:"5.5.10",fr:60,op:70,ip:0,assets:[]},l=()=>i.jsxs("div",{children:[" ",i.jsx("div",{className:"flex justify-start items-start ",children:i.jsx(t,{className:"w-12 h-12",animationData:h,loop:!0,autoplay:!0})})]}),u=({product:t})=>{const[h,u]=s.useState([]),[f,b]=s.useState(!0),v=a(),{isActive:D=!1,vendorId:g=null}=o((i=>i.quickMode??{})),j=D&&g&&(null==t?void 0:t.vendorId)===g,w=async i=>{const t=await m(p(d,"vendors",i));if(!t.exists())return!1;const{isApproved:s,isDeactivated:a}=t.data();return s&&!a};return s.useEffect((()=>{(async()=>{if(!t)return;b(!0);const i=e(d,"products");if(j){const s=[],a=r(i,k("vendorId","==",t.vendorId),k("productType","==",t.productType),k("published","==",!0),k("isDeleted","==",!1),n(50)),o=await y(a);for(const i of o.docs)if(i.id!==t.id&&(s.push({id:i.id,...i.data()}),s.length>=6))break;const x=r(i,k("vendorId","==",t.vendorId),k("published","==",!0),k("isDeleted","==",!1),c("createdAt","desc"),n(50)),e=await y(x),d=new Set([t.id,...s.map((i=>i.id))]),m=[];for(const i of e.docs)d.has(i.id)||m.push({id:i.id,...i.data()});m.sort((()=>.5-Math.random()));const p=Math.max(0,24-s.length);return s.push(...m.slice(0,p)),u(s),void b(!1)}const s=[],a=[],o=[],x=[],m=r(i,k("vendorId","==",t.vendorId),k("productType","==",t.productType),k("published","==",!0),k("isDeleted","==",!1),n(5)),p=await y(m);for(const e of p.docs)if(e.id!==t.id&&await w(e.data().vendorId)&&(s.push({id:e.id,...e.data()}),s.length>=4))break;const h=r(i,k("vendorId","!=",t.vendorId),k("productType","==",t.productType),k("published","==",!0),k("isDeleted","==",!1),n(15)),l=await y(h);for(const t of l.docs)if(await w(t.data().vendorId)&&(a.push({id:t.id,...t.data()}),a.length>=10))break;const f=r(i,k("category","==",t.category),k("published","==",!0),k("isDeleted","==",!1),n(15)),v=await y(f);for(const e of v.docs){if(e.id===t.id)continue;const i=e.data().vendorId,d=i===t.vendorId;if(await w(i)&&(!s.some((i=>i.id===e.id))&&!a.some((i=>i.id===e.id))))if(d){if(x.push({id:e.id,...e.data()}),x.length>=4)continue}else if(o.push({id:e.id,...e.data()}),o.length>=10)continue}u([...s,...a,...o,...x]),b(!1)})()}),[t,j]),f?i.jsx(l,{}):h.length?i.jsxs("div",{className:"related-products p-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold font-opensans",children:"You might also like"}),!j&&i.jsx("button",{onClick:()=>v(`/producttype/${t.productType}`,{state:{products:h}}),className:"text-xs font-normal text-customOrange",children:"Show all"})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:h.map((t=>i.jsx(x,{product:t,vendorId:t.vendorId,quickForThisVendor:j},t.id)))})]}):null};export{l as L,u as R};
